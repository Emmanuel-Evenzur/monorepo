*Note: This file is generated by `third_party/java/java_tools/update_java_tools.sh`. Please do not edit it manually.*

# How to upgrade the Java tools version in Bazel

First make sure the following environment variables are set accordingly:

```
BAZEL_WORKSPACE the root of your local bazel repository
VERSION the new version of the Java tools (see below)
NEW_BRANCH  the name of a new git branch
```

To get the new version of the Java tools please check the previous version in
`src/main/java/com/google/devtools/build/lib/bazel/rules/java/jdk.WORKSPACE`
by looking at the target `remote_java_tools`. For example if the url ends in
`java_tools_pkg-0.4.tar.gz` than the current version is `0.4` and the new
version will be `0.5`. For now only increase the minor version.

## Step 1: Update the Java tools

Updating the Java tools consists of three steps: building the Java tools under `third_party/java/java_tools/`,
archiving the tools, uploading the archive to the cloud. Follow the instructions:

**In your terminal**

```
$ cd $BAZEL_WORKSPACE
$ git checkout -b $NEW_BRANCH
$ third_party/java/java_tools/update_java_tools.sh
$ git add . && git commit -m "Update the Java tools under third_party/java/java_tools/" && git push origin $NEW_BRANCH
$ bazel build third_party:java_tools_pkg-gz
$ cp bazel-bin/third_party/java_tools_pkg-gz.tar.gz ~/java_tools_pkg-$VERSION.tar.gz

```

**In your browser** go to https://pantheon.corp.google.com/storage/browser/bazel-mirror/bazel_java_tools/
and push the "Upload files" button in the upper-left side. Upload `~/java_tools_pkg-$VERSION.tar.gz`
**and** `third_party/java/java_tools/java_tools-srcs.zip`.

## Step 2: Upgrade the Java tools version

**In your terminal**:

```
$ sha256sum ~/java_tools_pkg-$VERSION.tar.gz | awk '{print $1}'
```

**In your bazel repository** update the urls and sha256 for the target `remote_java_tools` in
`src/main/java/com/google/devtools/build/lib/bazel/rules/java/jdk.WORKSPACE`
and also the name, urls and sha256 of all the occurrences in `WORKSPACE`
(targets `jdk_WORKSPACE_files` and `additional_distfiles`).
See for example [upgrading the java tools version from 0.4 to 0.5](https://github.com/bazelbuild/bazel/pull/7541/commits/93eee0e222df9d8aedd6661ea73311645824f188)

# Status of `third_party/java/java_tools/`

The following tools were built with bazel 0.22.0 at commit 569e2cb4d1b7653b5a02bbf664765476233e6c33
by running:
$ third_party/java/java_tools/update_java_tools.sh



The following tools were built with bazel $bazel_version at commit $git_head
by running:
$ third_party/java/java_tools/update_java_tools.sh $@