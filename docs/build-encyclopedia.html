---
layout: default
---


<!--
 This document is synchronized with Bazel releases.
 To edit, submit changes to the Bazel source code.
-->

<!-- Generated by //java/com/google/devtools/build/docgen:build-encyclopedia.html -->





<div style="width:100%;">

<div id="main-panel" >

<h1>Bazel BUILD Encyclopedia of Functions</h1>
<h2>Contents</h2>

  <h3>Concepts and terminology</h3>
  <table class="layout"><tr><td>
  <ul class="toc">
    <li><a href="#common-definitions">Common definitions</a>:
      <ul>
      <li><a href="#sh-tokenization">Bourne shell tokenization</a></li>
      <li><a href="#label-expansion">Label expansion</a></li>
      <li><a href="#common-attributes">Common attributes</a></li>
      <li><a href="#common-attributes-tests">Common attributes for tests</a></li>
      <li><a href="#common-attributes-binaries">Common attributes for binaries</a></li>
      <li><a href="#configurable-attributes">Configurable attributes</a></li>
      <li><a href="#implicit-outputs">Implicit output targets</a></li>
      </ul>
    </li>
  </ul>
  </td><td>
  <ul class="toc">
    <li><a href="#make_variables">"Make" variables</a>
    <ul class="toc">
      <li><a href="#make-var-substitution">"Make" variable substitution</a></li>
      <li><a href="#predefined_variables">Predefined variables</a></li>

    </ul>
    <li><a href="#predefined-python-variables">Predefined Python Variables</a></li>
  </ul>
  </td><td>
  <ul class="toc">
    <li><a href="#load">load</a></li>

    <li><a href="#package">package</a></li>
    <li><a href="#package_group">package_group</a></li>

    <li><a href="#licenses">licenses</a></li>
    <li><a href="#exports_files">exports_files</a></li>
    <li><a href="#glob">glob</a></li>
    <li><a href="#select">select</a></li>
    <li><a href="#workspace">workspace</a></li>
  </ul>
  </td></tr></table>

  <h3>Rules</h3>

<table id="rules" summary="Table of rules sorted by language">
<colgroup span="5" width="20%"></colgroup>
<tr><th>Language</th><th>Binary rules</th><th>Library rules</th><th>Test rules</th><th>Other rules</th><th></th></tr>
<tr>
<td class="lang">C / C++</td>
<td><a href="#cc_binary">cc_binary</a></td>
<td><a href="#cc_library">cc_library</a></td>
<td><a href="#cc_test">cc_test</a></td>
<td></td>
<td></td>
</tr>
<tr>
<td class="lang">Java</td>
<td><a href="#java_binary">java_binary</a></td>
<td><a href="#java_import">java_import</a><br/><a href="#java_library">java_library</a></td>
<td><a href="#java_test">java_test</a></td>
<td><a href="#java_plugin">java_plugin</a></td>
<td></td>
</tr>
<tr>
<td class="lang">Objective-C</td>
<td><a href="#ios_application">ios_application</a><br/><a href="#ios_device">ios_device</a><br/><a href="#ios_extension">ios_extension</a><br/><a href="#ios_extension_binary">ios_extension_binary</a><br/><a href="#objc_binary">objc_binary</a></td>
<td><a href="#objc_bundle">objc_bundle</a><br/><a href="#objc_bundle_library">objc_bundle_library</a><br/><a href="#objc_framework">objc_framework</a><br/><a href="#objc_import">objc_import</a><br/><a href="#objc_library">objc_library</a><br/><a href="#objc_proto_library">objc_proto_library</a></td>
<td><a href="#ios_test">ios_test</a></td>
<td><a href="#objc_xcodeproj">objc_xcodeproj</a></td>
<td></td>
</tr>
<tr>
<td class="lang">Shell</td>
<td><a href="#sh_binary">sh_binary</a></td>
<td><a href="#sh_library">sh_library</a></td>
<td><a href="#sh_test">sh_test</a></td>
<td></td>
<td></td>
</tr>
<tr><th>&nbsp;</th></tr><tr><th colspan="5">Rules that do not apply to a specific programming language</th></tr><tr>
<td class="lang">Extra Actions</td>
<td><a href="#action_listener">action_listener</a></td>
<td><a href="#extra_action">extra_action</a></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td class="lang">General</td>
<td><a href="#filegroup">filegroup</a></td>
<td><a href="#genquery">genquery</a></td>
<td><a href="#test_suite">test_suite</a></td>
<td><a href="#bind">bind</a><br/><a href="#config_setting">config_setting</a><br/><a href="#genrule">genrule</a><br/><a href="#http_archive">http_archive</a><br/><a href="#http_jar">http_jar</a></td>
<td><a href="#local_repository">local_repository</a><br/><a href="#maven_jar">maven_jar</a><br/><a href="#new_http_archive">new_http_archive</a><br/><a href="#new_local_repository">new_local_repository</a></td>
</tr>
</table>


<h2 id="common-definitions">Common definitions</h2>

<p>This section defines various terms and concepts that are common to
many functions or build rules below.
</p>

<h3 id='sh-tokenization'>Bourne shell tokenization</h3>
<p>
  Certain string attributes of some rules are split into multiple
  words according to the tokenization rules of the Bourne shell:
  unquoted spaces delimit separate words, and single- and
  double-quotes characters and backslashes are used to prevent
  tokenization.
</p>
<p>
  Those attributes that are subject to this tokenization are
  explicitly indicated as such in their definitions in this document.
</p>
<p>
  Attributes subject to "Make" variable expansion and Bourne shell
  tokenization are typically used for passing arbitrary options to
  compilers and other tools. Examples of such attributes are
  <code>cc_library.copts</code> and <code>java_library.javacopts</code>.
  Together these substitutions allow a
  single string variable to expand into a configuration-specific list
  of option words.
</p>

<h3 id='label-expansion'>Label expansion</h3>
<p>
  Some string attributes of a very few rules are subject to label
  expansion: if those strings contain a valid label as a
  substring, such as <code>//mypkg:target</code>, and that label is a
  declared prerequisite of the current rule, it is expanded into the
  pathname of the file represented by the target <code>//mypkg:target</code>.
</p>

<p>
  Example attributes include <code>genrule.cmd</code> and
  <code>cc_binary.linkopts</code>.  The details may vary significantly in
  each case, over such issues as: whether relative labels are
  expanded; how labels that expand to multiple files are
  treated, etc.  Consult the rule attribute documentation for
  specifics.
</p>

<h3 id="common-attributes">Attributes common to all build rules</h3>

<p>This section describes attributes that are common to all build rules.<br/>
Please note that it is an error to list the same label twice in a list of
labels attribute.
</p>

<ul>
<li id="common.deps"><code>deps</code>:
A list of dependencies of this rule.
<i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>
The precise semantics of what it means for this rule to depend on
another using <code>deps</code> are specific to the kind of this rule,
and the rule-specific documentation below goes into more detail.
At a minimum, though, the targets named via <code>deps</code> will
appear in the <code>*.runfiles</code> area of this rule, if it has
one.
<p>Most often, a <code>deps</code> dependency is used to allow one
module to use symbols defined in another module written in the
same programming language and separately compiled.  Cross-language
dependencies are also permitted in many cases: for example,
a <code>java_library</code> rule may depend on C++ code in
a <code>cc_library</code> rule, by declaring the latter in
the <code>deps</code> attribute.  See the definition
of <a href="build-ref.html#deps">dependencies</a> for more
information.</p>
<p>Almost all rules permit a <code>deps</code> attribute, but where
this attribute is not allowed, this fact is documented under the
specific rule.</p>
</li>
<li id="common.data"><code>data</code>:
The list of files needed by this rule at runtime.
<i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>
Targets named in the <code>data</code> attribute will appear in
the <code>*.runfiles</code> area of this rule, if it has one.  This
may include data files needed by a binary or library, or other
programs needed by it.  See the
<a href="build-ref.html#data">data dependencies</a> section for more
information about how to depend on and use data files.
<p>Almost all rules permit a <code>data</code> attribute, but where
this attribute is not allowed, this fact is documented under the
specific rule.</p>
</li>
<li id="common.deprecation"><code>deprecation</code>:
<i>(String; optional)</i><br/>
An explanatory warning message associated with this rule.
Typically this is used to notify users that a rule has become obsolete,
or has become superseded by another rule, is private to a package, or is
perhaps considered harmful for some reason. It is a good idea to include
some reference (like a webpage, a bug number or example migration CLs) so
that one can easily find out what changes are required to avoid the message.
If there is a new target that can be used as a drop in replacement, it is a
good idea to just migrate all users of the old target.
<p>
This attribute has no effect on the way things are built, but it
may affect a build tool's diagnostic output.  The build tool issues a
warning when a rule with a <code>deprecation</code> attribute is
depended upon by another rule.</p>
<p>
Intra-package dependencies are exempt from this warning, so that,
for example, building the tests of a deprecated rule does not
encounter a warning.</p>
<p>
If a deprecated rule depends on another deprecated rule, no warning
message is issued.</p>
<p>
Once people have stopped using it, the package can be removed or marked as
<a href="#common.obsolete"><code>obsolete</code></a>.</p>
</li>
<li id="common.distribs"><code>distribs</code>:
<i>(List of strings; optional)</i><br/>
A list of distribution-method strings to be used for this particular build rule.
Overrides the <code>BUILD</code>-file scope defaults defined by the
<a href="#distribs"><code>distribs()</code></a> directive.
</li>
<li id="common.licenses"><code>licenses</code>:
<i>(List of strings; optional)</i><br/>
A list of license-type strings to be used for this particular build rule.
Overrides the <code>BUILD</code>-file scope defaults defined by the
<a href="#licenses"><code>licenses()</code></a> directive.
</li>
<li id="common.tags"><code>tags</code>:
List of arbitrary text tags.  Tags may be any valid string; default is the
empty list.<br/>
<i>Tags</i> can be used on any rule; but <i>tags</i> are most useful
on test and <code>test_suite</code> rules.  Tags on non-test rules
are only useful to humans and/or external programs.
<i>Tags</i> are generally used to annotate a test's role in your debug
and release process.  Typically, tags are most useful for C++ and
Python tests, which
lack any runtime annotation ability.  The use of tags and size elements
gives flexibility in assembling suites of tests based around codebase
check-in policy.
<p>
A few tags have special meaning to the build tool, such as
indicating that a particular test cannot be run remotely, for
example. Consult
the <a href='bazel-user-manual.html#tags_keywords'>Bazel
documentation</a> for details.
</p>
</li>
<li id="common.testonly"><code>testonly</code>:
<i>(Boolean; optional; default 0 except as noted)</i><br />
If 1, only testonly targets (such as tests) can depend on this target.
<p>Equivalently, a rule that is not <code>testonly</code> is not allowed to
depend on any rule that is <code>testonly</code>.</p>
<p>Tests (<code>*_test</code> rules)
and test suites (<a href="#test_suite">test_suite</a> rules)
are <code>testonly</code> by default.</p>
<p>By virtue of
<a href="#package.default_testonly"><code>default_testonly</code></a>,
targets under <code>javatests</code> are <code>testonly</code> by default.</p>
<p>This attribute is intended to mean that the target should not be
contained in binaries that are released to production.</p>
<p>Because testonly is enforced at build time, not run time, and propagates
virally through the dependency tree, it should be applied judiciously. For
example, stubs and fakes that
are useful for unit tests may also be useful for integration tests
involving the same binaries that will be released to production, and
therefore should probably not be marked testonly. Conversely, rules that
are dangerous to even link in, perhaps because they unconditionally
override normal behavior, should definitely be marked testonly.</p>
</li>
<li id="common.visibility"><code>visibility</code>:
<i>(List of <a href="build-ref.html#labels">labels</a>; optional;
default private)</i><br/>
<p>The <code>visibility</code> attribute on a rule controls whether
the rule can be used by other packages. Rules are always visible to
other rules declared in the same package.</p>
<p>There are five forms (and one temporary form) a visibility label can take:
<ul>
<li><code>["//visibility:public"]</code>: Anyone can use this rule.</li>
<li><code>["//visibility:private"]</code>: Only rules in this package
can use this rule.  Rules in <code>javatests/foo/bar</code>
can always use rules in <code>java/foo/bar</code>.
</li>
<li><code>["//some/package:__pkg__", "//other/package:__pkg__"]</code>:
Only rules in <code>some/package</code> and <code>other/package</code>
(defined in <code>some/package/BUILD</code> and
<code>other/package/BUILD</code>) have access to this rule. Note that
sub-packages do not have access to the rule; for example,
<code>//some/package/foo:bar</code> or
<code>//other/package/testing:bla</code> wouldn't have access.
<code>__pkg__</code> is a special target and must be used verbatim.
It represents all of the rules in the package.
</li>
<li><code>["//project:__subpackages__", "//other:__subpackages__"]</code>:
Only rules in packages <code>project</code> or <code>other</code> or
in one of their sub-packages have access to this rule. For example,
<code>//project:rule</code>, <code>//project/library:lib</code> or
<code>//other/testing/internal:munge</code> are allowed to depend on
this rule (but not <code>//independent:evil</code>)
</li>
<li><code>["//some/package:my_package_group"]</code>:
A <a href="#package_group">package group</a> is
a named set of package names. Package groups can also grant access rights
to entire subtrees, e.g.<code>//myproj/...</code>.
</li>

</ul>
<p>The visibility specifications of

<code>//visibility:public</code> and <code>//visibility:private</code>
can not be combined with any other visibility specifications.
A visibility specification may contain a combination of package labels
(i.e. <code>//foo:__pkg__</code>) and <code>package_group</code>s.</p>
<p>If a rule does not specify the visibility attribute,
the <code><a href="#package">default_visibility</a></code>
attribute of the <code><a href="#package">package</a></code>
statement in the BUILD file containing the rule is used
(except <a href="#exports_files">exports_files</a>

).</p>
<p>If the default visibility for the package is not specified,
the rule is private.</p>
<p><b>Example</b>:</p>
<p>
File <code>//frobber/bin/BUILD</code>:
</p>
<pre class="code">
# This rule is visible to everyone
cc_binary(
    name = "executable",
    visibility = ["//visibility:public"],
    deps = [":library"],
)

# This rule is visible only to rules declared in the same package
cc_library(
    name = "library",
    visibility = ["//visibility:private"],
)

# This rule is visible to rules in package //object and //noun
cc_library(
    name = "subject",
    visibility = [
        "//noun:__pkg__",
        "//object:__pkg__",
    ],
)

# See package group "//frobber:friends" (below) for who can access this rule.
cc_library(
    name = thingy,
    visibility = ["//frobber:friends"],
)
</pre>
<p>
File <code>//frobber/BUILD</code>:
</p>
<pre class="code">
# This is the package group declaration to which rule //frobber/bin:thingy refers.
#
# Our friends are packages //frobber, //fribber and any subpackage of //fribber.
package_group(
    name = "friends",
    packages = [
        "//fribber/...",
        "//frobber",
    ],
)
</pre>
</li>
</ul>


<h3 id="common-attributes-tests">Attributes common to all test rules (*_test)</h3>

<p>This section describes attributes that are common to all test rules.</p>

<ul>
<li id="test.args"><code>args</code>:
Add these arguments to the <code>--test_arg</code>
when executed by <code>bazel test</code>.
<i>(List of strings; optional; subject to
<a href="#location">$(location)</a> and
<a href="#make_variables">"Make variable"</a> substitution, and 
<a href="#sh-tokenization">Bourne shell tokenization</a>)</i><br/>
These arguments are passed before the <code>--test_arg</code> values
specified on the <code>bazel test</code> command line.
</li>
<li id="test.flaky"><code>flaky</code>:
Marks test as flaky. <i>(Boolean; optional)</i><br/>
If set, executes the test up to 3 times before being declared as failed.
By default this attribute is set to 0 and test is considered to be stable.
Note, that use of this attribute is generally discouraged - we do prefer
all tests to be stable.
</li>
<li id="test.size"><code>size</code>:
How "heavy" the test is
<i>(String "enormous", "large" "medium" or "small",
default is "medium")</i><br/>
A classification of the test's "heaviness": how much time/resources
it needs to run.
Unittests are considered "small", integration tests "medium", and
end-to-end tests "large" or "enormous". Bazel uses the size only
to determine a default timeout.
</li>
<li id="test.timeout"><code>timeout</code>:
How long the test is
normally expected to run before returning.
<i>(String "eternal", "long", "moderate", or "short"
with the default derived from a test's size attribute)</i><br/>
While a test's size attribute controls resource estimation, a test's
timeout may be set independently.  If not explicitly specified, the
timeout is based on the test's size (with "small" &rArr; "short",
"medium" &rArr; "moderate", etc...). "short" means 1 minute, "moderate"
5 minutes, and "long" 15 minutes.
</li>
</ul>


<h3 id="common-attributes-binaries">Attributes common to all binary rules (*_binary)</h3>

<p>This section describes attributes that are common to all binary rules.</p>

<ul>
<li id="binary.args"><code>args</code>:
Add these arguments to the target when executed by
<code>bazel run</code>.
<i>(List of strings; optional; subject to
<a href="#location">$(location)</a> and
<a href="#make_variables">"Make variable"</a> substitution, and
<a href="#sh-tokenization">Bourne shell tokenization</a>)</i><br/>
These arguments are passed to the target before the target options
specified on the <code>bazel run</code> command line.
<p>Most binary rules permit an <code>args</code> attribute, but where
this attribute is not allowed, this fact is documented under the
specific rule.</p>
</li>
<li id="binary.output_licenses"><code>output_licenses</code>:
The licenses of the output files that this binary generates.
<i>(List of strings; optional)</i><br/>
Describes the licenses of the output of the binary generated by
the rule. When a binary is referenced in a host attribute (for
example, the <code>tools</code> attribute of
a <code>genrule</code>), this license declaration is used rather
than the union of the licenses of its transitive closure. This
argument is useful when a binary is used as a tool during the
build of a rule, and it is not desirable for its license to leak
into the license of that rule. If this attribute is missing, the
license computation proceeds as if the host dependency was a
regular dependency.
<p>(For more about the distinction between host and target
configurations,
see <a href="bazel-user-manual.html#configurations">Build
configurations</a> in the Bazel manual.)
<p><em class="harmful">WARNING: in some cases (specifically, in
genrules) the build tool cannot guarantee that the binary
referenced by this attribute is actually used as a tool, and is
not, for example, copied to the output. In these cases, it is the
responsibility of the user to make sure that this is
true.</em></p>
</li>
</ul>


<h3 id="configurable-attributes">Configurable attributes</h3>

<p>
  Most rule attributes can be "configured" so that their values can
  depend on the command-line flags passed to Bazel. This can be used,
  for example, to declare platform-dependent <code>srcs</code> or custom
  compiler flags depending on the
  <a href="bazel-user-manual.html#flag--compilation_mode">compilation
  mode</a>. This feature is very close in spirit to
  <a href="#cc_library.abi_deps">abi_deps</a>, except that it's not
  limited to <code>cc_*</code> rules and the <code>deps</code> attribute.
</p>

</p>

<h3 id="implicit-outputs">Implicit output targets</h3>

<p>When you define a build rule in a BUILD file, you are explicitly
  declaring a new, named rule target in a package.  Many build rule
  functions also <i>implicitly</i> entail one or more output file
  targets, whose contents and meaning are rule-specific.

  For example, when you explicitly declare a
  <code>java_binary(name='foo', ...)</code> rule, you are also
  <i>implicitly</i> declaring an output file
  target <code>foo_deploy.jar</code> as a member of the same package.
  (This particular target is a self-contained Java archive suitable
  for deployment.)
</p>

<p>
  Implicit output targets are first-class members of the global
  target graph.  Just like other targets, they are built on demand,
  either when specified in the top-level built command, or when they
  are necessary prerequisites for other build targets.  They can be
  referenced as dependencies in BUILD files, and can be observed in
  the output of analysis tools such as <code>bazel query</code>.
</p>

<p>
  For each kind of build rule, the rule's documentation contains a
  special section detailing the names and contents of any implicit
  outputs entailed by a declaration of that kind of rule.
</p>

<p>
  An important but somewhat subtle distinction between the
  two namespaces used by the build system:
  <a href="build-ref.html#labels">labels</a> identify <em>targets</em>,
  which may be rules or files, and file targets may be divided into
  either source (or input) file targets and derived (or output) file
  targets.  These are the things you can mention in BUILD files,
  build from the command-line, or examine using <code>bazel query</code>;
  this is the <em>target namespace</em>.  Each file target corresponds
  to one actual file on disk (the "file system namespace"); each rule
  target may correspond to zero, one or more actual files on disk.
  There may be files on disk that have no corresponding target; for
  example, <code>.o</code> object files produced during C++ compilation
  cannot be referenced from within BUILD files or from the command line.
  In this way, the build tool may hide certain implementation details of
  how it does its job. This is explained more fully in
  the <a href="build-ref.html">BUILD Concept Reference</a>.
</p>

<!-- ============================================
                      binary
     ============================================
-->
<h2 id="binary">*_binary</h2>

<p>A <code>*_binary</code> rule compiles an application. This might be
   an executable, a <code>.jar</code> file, and/or a collection of scripts.</p>

<h3 id="cc_binary">cc_binary</h3>


<p class="rule-signature">
cc_binary(<a href="#cc_binary.name">name</a>,
<a href="#cc_binary.deps">deps</a>,
<a href="#cc_binary.srcs">srcs</a>,
<a href="#common.data">data</a>,
<a href="#cc_binary.abi">abi</a>,
<a href="#cc_binary.abi_deps">abi_deps</a>,
<a href="#binary.args">args</a>,
<a href="#cc_binary.copts">copts</a>,
<a href="#cc_binary.defines">defines</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#cc_binary.hdrs_check">hdrs_check</a>,
<a href="#cc_binary.includes">includes</a>,
<a href="#common.licenses">licenses</a>,
<a href="#cc_binary.linkopts">linkopts</a>,
<a href="#cc_binary.linkshared">linkshared</a>,
<a href="#cc_binary.linkstatic">linkstatic</a>,
<a href="#cc_binary.malloc">malloc</a>,
<a href="#cc_binary.nocopts">nocopts</a>,
<a href="#binary.output_licenses">output_licenses</a>,
<a href="#cc_binary.stamp">stamp</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<h4 id="cc_binary_implicit_outputs">Implicit output targets</h4>
          <ul>
          <li><code><var>name</var>.stripped</code> (only built if explicitly requested): A stripped
            version of the binary. <code>strip -g</code> is run on the binary to remove debug
            symbols.  Additional strip options can be provided on the command line using
            <code>--stripopt=-foo</code>. This output is only built if explicitly requested.</li>
          <li><code><var>name</var>.dwp</code> (only built if explicitly requested): If
            <a href="https://gcc.gnu.org/wiki/DebugFission">Fission</a> is enabled: a debug
            information package file suitable for debugging remotely deployed binaries. Else: an
            empty file.</li>
          </ul>


<h4 id="cc_binary_args">Arguments</h4>
<ul>
<li id="cc_binary.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="cc_binary.deps"><code>deps</code>:
          The list of other libraries to be linked in to the binary target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          <p>These are always <code>cc_library</code> rules.</p>
</li>
<li id="cc_binary.srcs"><code>srcs</code>:
          The list of C and C++ files that are processed to create the target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          These are C/C++ source and header files, either non-generated (normal source
          code) or generated.
          <p>All <code>.cc</code>, <code>.c</code>, and <code>.cpp</code> files will
             be compiled. These might be generated files: if a named file is in
             the <code>outs</code> of some other rule, this rule
             will automatically depend on that other rule.
          </p>
          <p>A <code>.h</code> file will not be compiled, but will be available for
             inclusion by sources in this rule. Both <code>.cc</code> and
             <code>.h</code> files can directly include headers listed in
             these <code>srcs</code> or in the <code>hdrs</code> of any rule listed in
             the <code>deps</code> argument. For compatibility with older
             implementations, and depending on the checking strictness specified by
             each library, additional headers may be available for inclusion. See
             <a href="#cc_library.hdrs_check"><code>cc_library.hdrs_check</code></a>.
          </p>
          <p>All <code>#include</code>d files must be mentioned in the
             <code>srcs</code> attribute of this rule, or in the
             <code>hdrs</code> attribute of referenced <code>cc_library()</code>s.
             The recommended style is for headers associated with a library to be
             listed in that library's <code>hdrs</code> attribute, and any remaining
             headers associated with this rule's sources to be listed in
             <code>srcs</code>. See <a href="#hdrs">"Header inclusion checking"</a>
             for a more detailed description.
          </p>
          <p>If a rule's name is in the <code>srcs</code>,
             then this rule automatically depends on that one.
             If the named rule's <code>outs</code> are C or C++
             source files, they are compiled into this rule;
             if they are library files, they are linked in.
          </p>
          <p>
            Permitted <code>srcs</code> file types:
          </p>
          <ul>
            <li>C and C++ source files: <code>.c</code>, <code>.cc</code>, <code>.cpp</code>,
              <code>.cxx</code>, <code>.C</code></li>
            <li>C and C++ header files: <code>.h</code>, <code>.hh</code>, <code>.hpp</code>,
              <code>.hxx</code>, <code>.inc</code></li>
            <li>Assembler with C preprocessor: <code>.S</code></li>
            <li>Archive: <code>.a</code>, <code>.pic.a</code></li>
            <li>"Always link" library: <code>.lo</code>, <code>.pic.lo</code></li>
            <li>Shared library, versioned or unversioned: <code>.so</code>,
              <code>.so.<i>version</i></code></li>
            <li>Object file: <code>.o</code>, <code>.pic.o</code></li>
          </ul>
          <p>
            ...and any rules that produce those files.
            Different extensions denote different programming languages in
            accordance with gcc convention.
          </p>
</li>
<li id="cc_binary.abi" class="deprecated"><code>abi</code>:
           Platform-specific information string which is used in combination
            with <code>abi_deps</code>.
            <i>(String; optional; default is "$(ABI)")</i><br/>

            Subject to <a href="#make_variables">"Make" variable</a> substitution.
            <p>
              This string typically includes references to one or more "Make" variables of the form
              <code>"$(VAR)"</code>. The default value is <code>"$(ABI)"</code>.
            </p>
            <p>
              With <code>abi_deps</code>, the regular expression <code>patterns</code> will be
              matched against this string.
            </p>
</li>
<li id="cc_binary.abi_deps" class="deprecated"><code>abi_deps</code>:
          The list of architecture-specific dependencies that are processed to create the target.
          <i>(Dictionary mapping strings to lists of
             <a href="build-ref.html#labels">labels</a>; optional)</i>
          <p><i><a href="#configurable-attributes">Configurable attributes</a> is a generalization
            of the same concept that works for most rules and attributes. It mostly deprecates
            <code>abi_deps</code>, which we expect to remove it as soon as possible. Use
            configurable attributes over <code>abi_deps</code> whenever possible. If the former is
            insufficient for you, please let us know why.</i>
          </p>
          <p>Each entry in this dictionary follows the form of
             <code>'pattern' : ['label1', 'label2', ...]</code>.  If the library's
             <code>abi</code> attribute is an unanchored match for the regular
             expression defined in <code>pattern</code>, the corresponding
             labels are used as dependencies as if they had appeared in the
             <code>deps</code> list.
          </p>
          <p>All pairs with a matching <code>pattern</code> will have their labels
             used.  If no matches are found, no dependencies will be used.  The
             ordering is irrelevant.
          </p>
          <p>If you want a <code>pattern</code> to not match a particular
             <code>abi</code>, for example adding a dep on all non-k8 platforms, you
             can use a negative lookahead pattern.  This would look like
             <code>(?!k8).*</code>.
          </p>
          <p>If using <code>abi_deps</code>, do not provide <code>deps</code>.
             Instead, use an entry with a <code>pattern</code> of <code>'.*'</code>
             because that matches everything.  This is also how to share
             dependencies across multiple different <code>abi</code> values.
          </p>
          <p>Typically, this mechanism is used to specify the appropriate set of
             paths to pre-compiled libraries for the target architecture of the
             current build.  Such paths are parameterized over "Make" variables
             such as <code>$(ABI)</code>, <code>$(TARGET_CPU)</code>,
             <code>$(C_COMPILER)</code>, etc, but since "Make" variables are not
             allowed in <a href="build-ref.html#labels">labels</a>, the
             architecture-specific files cannot be specified via the normal
             <code>srcs</code> attribute. Instead, this mechanism can be used
             to declare architecture-specific dependent rules for the current
             target that can specify the correct libraries in their own
             <code>srcs</code>.
          </p>
          <p>This mechanism is also used to specify the appropriate set of
             dependencies when some targets can't compile for the target architecture
             of the current build.  In most cases, uses an <code>#ifdef</code>.
             Only use <code>abi_deps</code> for more significant dependency changes.
          </p>
</li>
<li id="cc_binary.copts"><code>copts</code>:
          Add these options to the C++ compilation command.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          <p>Each string in this attribute is added in the given order to <code>COPTS</code>
          before compiling the binary target.
          The flags take effect only for compiling this target, not its dependencies,
          so be careful about header files included elsewhere.</p>
</li>
<li id="cc_binary.defines"><code>defines</code>:
          List of defines to add to the compile line.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make" variable</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          Each string, which must consist of a single Bourne shell token,
          is prepended with <code>-D</code> and added to
          <code>COPTS</code>.
          Unlike <a href="#cc_binary.copts"><code>copts</code></a>, these flags are added for the
          target and every rule that depends on it!  Be very careful, since this may have
          far-reaching effects.  When in doubt, add "-D" flags to
          <a href="#cc_binary.copts"><code>copts</code></a> instead.
</li>
<li id="cc_binary.hdrs_check" class="deprecated"><code>hdrs_check</code>:
          Deprecated: we will roll out support for C++ modules, which are strict by design.
          <a id="cc_library.hdrs_check"></a>
          The strictness of the header file check to be applied to dependents and the
          source files of this library. Must be one of: <code>"loose"</code>,
          <code>"warn"</code> or <code>"strict"</code>.
          <i>(String; optional; default is "strict")</i><br/>

          <p>
             The three levels of checking operate as follows:
          </p>
          <ul>
             <li><code>"loose"</code>: Any source header file in any of the
             directories of the containing package may be <code>#include</code>d by
             sources in this rule and dependent rules. Generated header files must be
             explicitly listed in <code>hdrs</code> or <code>srcs</code>. This
             check level is the current default, but it will be phased out.</li>
             <li><code>"warn"</code>: Enforcement is the same as for
             <code>"loose"</code>, but any case that would violate the
             <code>"strict"</code> check will cause a warning to be emitted.
             This check level is provided to help with the migration to strict.</li>
             <li><code>"strict"</code>: All <code>#include</code>d files must be explicitly declared
             somewhere in the <code>hdrs</code> or <code>srcs</code> of the rules providing the
             libraries or the rules containing the including source. Note that this means that a
             rule can include any header that is in the <code>hdrs</code> or <code>srcs</code> of
             any rule it transitively depends on. A stricter layering check is currently being
             rolled out.</li>
          </ul>
          <p>If a rule does not specify the hdrs_check attribute, the
          <code><a href="#package.default_hdrs_check">default_hdrs_check</a></code>
          attribute of the <code><a href="#package">package</a></code> statement
          in the BUILD file containing the rule is used.</p>
</li>
<li id="cc_binary.includes"><code>includes</code>:
          List of include dirs to be added to the compile line.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution.
          Each string is prepended with <code>-I</code> and added to <code>COPTS</code>. Unlike
          <a href="#cc_binary.copts">COPTS</a>, these flags are added for this rule
          and every rule that depends on it. (Note: not the rules it depends upon!) Be
          very careful, since this may have far-reaching effects.  When in doubt, add
          "-I" flags to <a href="#cc_binary.copts">COPTS</a> instead.
</li>
<li id="cc_binary.linkopts"><code>linkopts</code>:
          Add these flags to the C++ linker command.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make" variable</a> substitution,
          <a href="#sh-tokenization">Bourne shell tokenization</a>
          and <a href="#label-expansion">label expansion</a>.
          Each string in this attribute is added to <code>LINKOPTS</code> before
          linking the binary target.
          <p>
            Each element of this list that does not start with <code>$</code> or <code>-</code> is
            assumed to be the label of a target in <code>deps</code>.  The
            list of files generated by that target is appended to the linker
            options.  An error is reported if the label is invalid, or is
            not declared in <code>deps</code>.
          </p>
</li>
<li id="cc_binary.linkshared"><code>linkshared</code>:
          Create a shared library.
          <i>(Boolean; optional; default is 0)</i><br/>

          To enable this attribute, include <code>linkshared=1</code> in your rule. By default
          this option is off. If you enable it, you must name your binary
          <code>lib<i>foo</i>.so</code> (or whatever is the naming convention of libraries on the
          target platform) for some sensible value of <i>foo</i>.
          <p>
            The presence of this flag means that linking occurs with the <code>-shared</code> flag
            to <code>gcc</code>, and the resulting shared library is suitable for loading into for
            example a Java program. However, for build purposes it will never be linked into the
            dependent binary, as it is assumed that shared libraries built with a
            <a href="#cc_binary">cc_binary</a> rule are only loaded manually by other programs, so
            it should not be considered a substitute for the <a href="#cc_library">cc_library</a>
            rule. For sake of scalability we recommend avoiding this approach altogether and
            simply letting <code>java_library</code> depend on <code>cc_library</code> rules
            instead.
          </p>
          <p>
            If you specify both <code>linkopts=['-static']</code> and <code>linkshared=1</code>,
            you get a single completely self-contained unit. If you specify both
            <code>linkstatic=1</code> and <code>linkshared=1</code>, you get a single, mostly
            self-contained unit.
          </p>
</li>
<li id="cc_binary.linkstatic"><code>linkstatic</code>:
           Link the binary in mostly-static mode.
           <i>(Boolean; optional; default is 1)</i><br/>

           By default this option is on for <code>cc_binary</code> and off for <code>cc_test</code>.
           <p>
             If enabled, this tells the build tool to link in <code>.a</code>'s instead of
             <code>.so</code>'s for user libraries whenever possible. Some system libraries may
             still be linked dynamically, as are libraries for which there's no static library. So
             the resulting binary will be dynamically linked, hence only <i>mostly</i> static.
           </p>
           <p>There are really three different ways to link an executable:</p>
           <ul>
           <li> FULLY STATIC, in which everything is linked statically; e.g. "<code>gcc -static
             foo.o libbar.a libbaz.a -lm</code>".<br/>This mode is enabled by specifying
             <code>-static</code> in the <a href="#cc_binary.linkopts"><code>linkopts</code></a>
             attribute.</li>
           <li> MOSTLY STATIC, in which all user libraries are linked statically (if a static
             version is available), but where system libraries are linked dynamically, e.g.
             "<code>gcc foo.o libfoo.a libbaz.a -lm</code>".<br/>This mode is enabled by specifying
             <code>linkstatic=1</code>.</li>
           <li> DYNAMIC, in which all libraries are linked dynamically (if a dynamic version is
             available), e.g. "<code>gcc foo.o libfoo.so libbaz.so -lm</code>".<br/> This mode is
             enabled by specifying <code>linkstatic=0</code>.</li>
           </ul>
           <p>
           The <code>linkstatic</code> attribute has a different meaning if used on a
           <a href="#cc_library"><code>cc_library()</code></a> rule.
           For a C++ library, <code>linkstatic=1</code> indicates that only
           static linking is allowed, so no <code>.so</code> will be produced.
           </p>
           <p>
           If <code>linkstatic=0</code>, then the build tool will create symlinks to
           depended-upon shared libraries in the <code>*.runfiles</code> area.
           </p>
</li>
<li id="cc_binary.malloc"><code>malloc</code>:
          Override the default dependency on malloc.
          <i>(<a href="build-ref.html#labels">Label</a>; optional; default is <code>//tools/cpp:malloc</code>)</i><br/>

          <p>
            By default, Linux C++ binaries are linked against <code>//tools/cpp:malloc</code>,
            which is an empty library so the binary ends up using libc malloc. This label must
            refer to a <code>cc_library</code>. If compilation is for a non-C++ rule, this option
            has no effect. The value of this attribute is ignored if <code>linkshared=1</code> is
            specified.
          </p>
</li>
<li id="cc_binary.nocopts"><code>nocopts</code>:
          Remove matching options from the C++ compilation command.
          <i>(String; optional)</i><br/>

          Subject to <a href="#make_variables">"Make" variable</a> substitution.
          The value of this attribute is interpreted as a regular expression.
          Any preexisting <code>COPTS</code> that match this regular expression
          (not including values explicitly specified in the rule's <a
          href="#cc_binary.copts">copts</a> attribute) will be removed from
          <code>COPTS</code> for purposes of compiling this rule.
          This attribute should rarely be needed.
</li>
<li id="cc_binary.stamp"><code>stamp</code>:
          Enable link stamping.
          <i>(Integer; optional; default is -1)</i><br/>

          Whether to encode build information into the binary. Possible values:
          <ul>
            <li><code>stamp = 1</code>: Stamp the build information into the
              binary. Stamped binaries are only rebuilt when their dependencies
              change. Use this if there are tests that depend on the build
              information.</li>
            <li><code>stamp = 0</code>: Always replace build information by constant
              values. This gives good build result caching.</li>
            <li><code>stamp = -1</code>: Embedding of build information is controlled
              by the <a href="bazel-user-manual.html#flag--stamp">--[no]stamp</a> flag.</li>
          </ul>
</li>
</ul>


<h3 id="ios_application">ios_application</h3>


<p class="rule-signature">
ios_application(<a href="#ios_application.name">name</a>,
<a href="#ios_application.app_icon">app_icon</a>,
<a href="#ios_application.binary">binary</a>,
<a href="#ios_application.bundle_id">bundle_id</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#ios_application.entitlements">entitlements</a>,
<a href="#ios_application.extensions">extensions</a>,
<a href="#ios_application.families">families</a>,
<a href="#ios_application.infoplist">infoplist</a>,
<a href="#ios_application.launch_image">launch_image</a>,
<a href="#common.licenses">licenses</a>,
<a href="#ios_application.provisioning_profile">provisioning_profile</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>This rule produces an application bundle for iOS.</p>
<p>When running an iOS application using the <code>run</code> command, environment variables that
are prefixed with <code>IOS_</code> will be passed to the launched application, with the prefix
stripped. For example, if you export <code>IOS_ENV=foo</code>, <code>ENV=foo</code> will be
passed to the application.</p>

<h4 id="ios_application_implicit_outputs">Implicit output targets</h4>
        <ul>
         <li><code><var>name</var>.ipa</code>: the application bundle as an <code>.ipa</code>
             file
         <li><code><var>name</var>.xcodeproj/project.pbxproj</code>: An Xcode project file which
             can be used to develop or build on a Mac.
        </ul>


<h4 id="ios_application_args">Arguments</h4>
<ul>
<li id="ios_application.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="ios_application.app_icon"><code>app_icon</code>:
          The name of the application icon.
          <i>(String; optional)</i><br/>


          The icon should be in one of the asset catalogs of this target or
          a (transitive) dependency. In a new project, this is initialized
          to "AppIcon" by Xcode.
          <p>
          If the application icon is not in an asset catalog, do not use this
          attribute. Instead, add a CFBundleIcons entry to the Info.plist file.
</li>
<li id="ios_application.binary"><code>binary</code>:
        The binary target included in the final bundle.
        <i>(<a href="build-ref.html#labels">Label</a>; required)</i><br/>

</li>
<li id="ios_application.bundle_id"><code>bundle_id</code>:
          The bundle ID (reverse-DNS path followed by app name) of the binary.
          <i>(String; optional)</i><br/>


          If none is specified, a junk value will be used.
</li>
<li id="ios_application.entitlements"><code>entitlements</code>:
          The entitlements file required for device builds of this application.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>


          See
          <a href="https://developer.apple.com/library/mac/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AboutEntitlements.html">the apple documentation</a>
          for more information. If absent, the default entitlements from the
          provisioning profile will be used.
          <p>
          The following variables are substituted as per
          <a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html">their definitions in Apple's documentation</a>:
          $(AppIdentifierPrefix) and $(CFBundleIdentifier).
</li>
<li id="ios_application.extensions"><code>extensions</code>:
        Any extensions to include in the final application.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="ios_application.families"><code>families</code>:
          The device families to which this binary is targeted.
          <i>(List of strings; optional)</i><br/>


          This is known as the <code>TARGETED_DEVICE_FAMILY</code> build setting
          in Xcode project files. It is a list of one or more of the strings
          <code>"iphone"</code> and <code>"ipad"</code>.
</li>
<li id="ios_application.infoplist"><code>infoplist</code>:
          The infoplist file. This corresponds to <i>appname</i>-Info.plist in Xcode projects.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

          Bazel will perform variable substitution on the plist file for the following values:
          <ul>
            <li><code>${EXECUTABLE_NAME}</code>: The name of the executable generated and included
               in the bundle by bazel, which can be used as the value for
               <code>CFBundleExecutable</code> within the plist.
            <li><code>${BUNDLE_NAME}</code>: This target's name and bundle suffix (.bundle or .app)
               in the form<code><var>name</var></code>.<code>suffix</code>.
            <li><code>${PRODUCT_NAME}</code>: This target's name.
         </ul>
</li>
<li id="ios_application.launch_image"><code>launch_image</code>:
          The name of the launch image.
          <i>(String; optional)</i><br/>


          The icon should be in one of the asset catalogs of this target or
          a (transitive) dependency. In a new project, this is initialized
          to "LaunchImage" by Xcode.
          <p>
          If the launch image is not in an asset catalog, do not use this
          attribute. Instead, add an appropriately-named image resource to the
          bundle.
</li>
<li id="ios_application.provisioning_profile"><code>provisioning_profile</code>:
          The provisioning profile (.mobileprovision file) to use when bundling
          the application.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>


          This is only used for non-simulator builds.
</li>
</ul>


<h3 id="ios_device">ios_device</h3>


<p class="rule-signature">
ios_device(<a href="#ios_device.name">name</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#ios_device.ios_version">ios_version</a>,
<a href="#common.licenses">licenses</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#ios_device.type">type</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>This rule defines an iOS device profile that defines a simulator against
which to run tests.</p>

<h4 id="ios_device_args">Arguments</h4>
<ul>
<li id="ios_device.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="ios_device.ios_version"><code>ios_version</code>:
        The operating system version of the device. This corresponds to the
        <code>simctl</code> runtime.
        <i>(String; required)</i><br/>

</li>
<li id="ios_device.type"><code>type</code>:
        The hardware type. This corresponds to the <code>simctl</code> device
        type.
        <i>(String; required)</i><br/>

</li>
</ul>


<h3 id="ios_extension">ios_extension</h3>


<p class="rule-signature">
ios_extension(<a href="#ios_extension.name">name</a>,
<a href="#ios_extension.app_icon">app_icon</a>,
<a href="#ios_extension.binary">binary</a>,
<a href="#ios_extension.bundle_id">bundle_id</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#ios_extension.entitlements">entitlements</a>,
<a href="#ios_extension.families">families</a>,
<a href="#ios_extension.infoplist">infoplist</a>,
<a href="#ios_extension.launch_image">launch_image</a>,
<a href="#common.licenses">licenses</a>,
<a href="#ios_extension.provisioning_profile">provisioning_profile</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>This rule produces a bundled binary for an iOS app extension from a compiled binary and bundle
metadata.</p>

<p>An iOS app extension is a nested bundle that is located inside the application bundle and is
released with it. An iOS app extension cannot be released alone, although this rule allows you to
build an <code>.ipa</code> with only the extension.

<p>Bundles generated by this rule use a bundle directory called
<code>PlugIns/<var>target-name</var>.appex</code>, while an application bundle uses
<code>Payload/<var>target-name</var>.app</code>. For instance, if an application call Foo has an app
extension called Bar, the Bar extension bundle files will be stored in
<code>Payload/Foo.app/PlugIns/Bar.appex</code> in the final application <code>.ipa</code>.

<p>There are many similarities between app extensions and applications with little to no difference
between how each thing is processed:
<ul>
  <li>both have entitlements and Info.plist files
  <li>both are code-signed. Signing and merging happens in this order: the extension is code-signed,
      bundles are merged, application is code-signed
  <li>both can have an app icon and launch image, and of course asset catalogs and all kinds of
      resources
  <li>both have linked binaries. The app extension binary is different in that it is linked with
      these additional flags:
      <ul>
          <li><code>-e _NSExtensionMain</code> - sets the entry point to a standard function in the
              iOS runtime rather than <code>main()</code>
          <li><code>-fapplicationextension</code>
      </ul>
</ul>

<h4 id="ios_extension_implicit_outputs">Implicit output targets</h4>
        <ul>
         <li><code><var>name</var>.ipa</code>: the extension bundle as an <code>.ipa</code>
             file</li>
         <li><code><var>name</var>.xcodeproj/project.pbxproj</code>: An Xcode project file which
             can be used to develop or build on a Mac.</li>
        </ul>


<h4 id="ios_extension_args">Arguments</h4>
<ul>
<li id="ios_extension.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="ios_extension.app_icon"><code>app_icon</code>:
          The name of the application icon.
          <i>(String; optional)</i><br/>


          The icon should be in one of the asset catalogs of this target or
          a (transitive) dependency. In a new project, this is initialized
          to "AppIcon" by Xcode.
          <p>
          If the application icon is not in an asset catalog, do not use this
          attribute. Instead, add a CFBundleIcons entry to the Info.plist file.
</li>
<li id="ios_extension.binary"><code>binary</code>:
        The binary target containing the logic for the extension.
        <i>(<a href="build-ref.html#labels">Label</a>; required)</i><br/>

</li>
<li id="ios_extension.bundle_id"><code>bundle_id</code>:
          The bundle ID (reverse-DNS path followed by app name) of the binary.
          <i>(String; optional)</i><br/>


          If none is specified, a junk value will be used.
</li>
<li id="ios_extension.entitlements"><code>entitlements</code>:
          The entitlements file required for device builds of this application.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>


          See
          <a href="https://developer.apple.com/library/mac/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AboutEntitlements.html">the apple documentation</a>
          for more information. If absent, the default entitlements from the
          provisioning profile will be used.
          <p>
          The following variables are substituted as per
          <a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html">their definitions in Apple's documentation</a>:
          $(AppIdentifierPrefix) and $(CFBundleIdentifier).
</li>
<li id="ios_extension.families"><code>families</code>:
          The device families to which this binary is targeted.
          <i>(List of strings; optional)</i><br/>


          This is known as the <code>TARGETED_DEVICE_FAMILY</code> build setting
          in Xcode project files. It is a list of one or more of the strings
          <code>"iphone"</code> and <code>"ipad"</code>.
</li>
<li id="ios_extension.infoplist"><code>infoplist</code>:
          The infoplist file. This corresponds to <i>appname</i>-Info.plist in Xcode projects.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

          Bazel will perform variable substitution on the plist file for the following values:
          <ul>
            <li><code>${EXECUTABLE_NAME}</code>: The name of the executable generated and included
               in the bundle by bazel, which can be used as the value for
               <code>CFBundleExecutable</code> within the plist.
            <li><code>${BUNDLE_NAME}</code>: This target's name and bundle suffix (.bundle or .app)
               in the form<code><var>name</var></code>.<code>suffix</code>.
            <li><code>${PRODUCT_NAME}</code>: This target's name.
         </ul>
</li>
<li id="ios_extension.launch_image"><code>launch_image</code>:
          The name of the launch image.
          <i>(String; optional)</i><br/>


          The icon should be in one of the asset catalogs of this target or
          a (transitive) dependency. In a new project, this is initialized
          to "LaunchImage" by Xcode.
          <p>
          If the launch image is not in an asset catalog, do not use this
          attribute. Instead, add an appropriately-named image resource to the
          bundle.
</li>
<li id="ios_extension.provisioning_profile"><code>provisioning_profile</code>:
          The provisioning profile (.mobileprovision file) to use when bundling
          the application.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>


          This is only used for non-simulator builds.
</li>
</ul>


<h3 id="ios_extension_binary">ios_extension_binary</h3>


<p class="rule-signature">
ios_extension_binary(<a href="#ios_extension_binary.name">name</a>,
<a href="#ios_extension_binary.deps">deps</a>,
<a href="#ios_extension_binary.srcs">srcs</a>,
<a href="#ios_extension_binary.resources">resources</a>,
<a href="#ios_extension_binary.hdrs">hdrs</a>,
<a href="#ios_extension_binary.asset_catalogs">asset_catalogs</a>,
<a href="#ios_extension_binary.bundles">bundles</a>,
<a href="#ios_extension_binary.copts">copts</a>,
<a href="#ios_extension_binary.datamodels">datamodels</a>,
<a href="#ios_extension_binary.defines">defines</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#ios_extension_binary.includes">includes</a>,
<a href="#common.licenses">licenses</a>,
<a href="#ios_extension_binary.non_arc_srcs">non_arc_srcs</a>,
<a href="#ios_extension_binary.non_propagated_deps">non_propagated_deps</a>,
<a href="#ios_extension_binary.pch">pch</a>,
<a href="#ios_extension_binary.sdk_dylibs">sdk_dylibs</a>,
<a href="#ios_extension_binary.sdk_frameworks">sdk_frameworks</a>,
<a href="#ios_extension_binary.sdk_includes">sdk_includes</a>,
<a href="#ios_extension_binary.storyboards">storyboards</a>,
<a href="#ios_extension_binary.strings">strings</a>,
<a href="#ios_extension_binary.structured_resources">structured_resources</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>,
<a href="#ios_extension_binary.weak_sdk_frameworks">weak_sdk_frameworks</a>,
<a href="#ios_extension_binary.xibs">xibs</a>)
</p>


<p>This rule produces a binary for an iOS app extension by linking one or more
Objective-C libraries.</p>

<h4 id="ios_extension_binary_implicit_outputs">Implicit output targets</h4>
        <ul>
         <li><code><var>name</var>.xcodeproj/project.pbxproj</code>: An Xcode project file which
             can be used to develop or build on a Mac.</li>
        </ul>


<h4 id="ios_extension_binary_args">Arguments</h4>
<ul>
<li id="ios_extension_binary.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="ios_extension_binary.deps"><code>deps</code>:
          The list of targets that are linked together to form the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="ios_extension_binary.srcs"><code>srcs</code>:
          The list of C, C++, Objective-C, and Objective-C++ files that are
          processed to create the library target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          These are your checked-in source files, plus any generated files.
          These are compiled into .o files with Clang, so headers should not go
          here (see the hdrs attribute).
</li>
<li id="ios_extension_binary.resources"><code>resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. These files are placed
          in the root of the bundle (e.g. Payload/foo.app/...) in most cases.
          However, if they appear to be localized (i.e. are contained in a
          directory called *.lproj), they will be placed in a directory of the
          same name in the app bundle.
</li>
<li id="ios_extension_binary.hdrs"><code>hdrs</code>:
          The list of Objective-C files that are included as headers by source
          files in this rule or by users of this library.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="ios_extension_binary.asset_catalogs"><code>asset_catalogs</code>:
          Files that comprise the asset catalogs of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcassets. This
          containing directory becomes the root of one of the asset catalogs
          linked with any binary that depends directly or indirectly on this
          target.
</li>
<li id="ios_extension_binary.bundles"><code>bundles</code>:
          The list of bundle targets that this target requires to be included
          in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="ios_extension_binary.copts"><code>copts</code>:
          Extra flags to pass to the compiler.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          These flags will only apply to this target, and not those upon which
          it depends, or those which depend on it.
</li>
<li id="ios_extension_binary.datamodels"><code>datamodels</code>:
          Files that comprise the data models of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcdatamodel, which
          is usually contained by another *.xcdatamodeld (note the added d)
          directory.
</li>
<li id="ios_extension_binary.defines"><code>defines</code>:
          Extra <code>-D</code> flags to pass to the compiler. They should be in
          the form <code>KEY=VALUE</code> or simply <code>KEY</code> and are
          passed not only the compiler for this target (as <code>copts</code>
          are) but also to all <code>objc_</code> dependers of this target.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
</li>
<li id="ios_extension_binary.includes"><code>includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets.
          <i>(List of strings; optional)</i><br/>


          This is to support third party and open-sourced libraries that do not
          specify the entire workspace path in their
          <code>#import/#include</code> statements.
          <p>
          The paths are interpreted relative to the package directory, and the
          genfiles and bin roots (e.g. <code>bazel-genfiles/pkg/includedir</code>
          and <code>bazel-out/pkg/includedir</code>) are included in addition to the
          actual client root.
</li>
<li id="ios_extension_binary.non_arc_srcs"><code>non_arc_srcs</code>:
          The list of Objective-C files that are processed to create the
          library target that DO NOT use ARC.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          The files in this attribute are treated very similar to those in the
          srcs attribute, but are compiled without ARC enabled.
</li>
<li id="ios_extension_binary.non_propagated_deps"><code>non_propagated_deps</code>:
          The list of targets that are required in order to build this target,
          but which are not included in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          This attribute should only rarely be used, and probably only for proto
          dependencies.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="ios_extension_binary.pch"><code>pch</code>:
          Header file to prepend to every source file being compiled (both arc
          and non-arc).
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

          Note that the file will not be precompiled - this is simply a
          convenience, not a build-speed enhancement.
</li>
<li id="ios_extension_binary.sdk_dylibs"><code>sdk_dylibs</code>:
          Names of SDK .dylib libraries to link with. For instance, "libz" or
          "libarchive".
           <i>(List of strings; optional)</i><br/>


          "libc++" is included automatically if the binary has any C++ or
          Objective-C++ sources in its dependency tree. When linking a binary,
          all libraries named in that binary's transitive dependency graph are
          used.
</li>
<li id="ios_extension_binary.sdk_frameworks"><code>sdk_frameworks</code>:
          Names of SDK frameworks to link with.
          <i>(List of strings; optional)</i><br/>

          For instance, "XCTest" or "Cocoa". "UIKit" and "Foundation" are always
          included and do not mean anything if you include them.

          <p>When linking a library, only those frameworks named in that library's
          sdk_frameworks attribute are linked in. When linking a binary, all
          SDK frameworks named in that binary's transitive dependency graph are
          used.
</li>
<li id="ios_extension_binary.sdk_includes"><code>sdk_includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets, where each path is relative to
          <code>$(SDKROOT)/usr/include</code>.
          <i>(List of strings; optional)</i><br/>

</li>
<li id="ios_extension_binary.storyboards"><code>storyboards</code>:
          Files which are .storyboard resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .storyboardc directories, which are
          placed in the bundle root of the final package. If the storyboards's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable UI.
</li>
<li id="ios_extension_binary.strings"><code>strings</code>:
          Files which are plists of strings, often localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are converted to binary plists (if they are not already)
          and placed in the bundle root of the final package. If this file's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable strings.
</li>
<li id="ios_extension_binary.structured_resources"><code>structured_resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. In differences to
          <code>resources</code> these files are placed in the bundle root in
          the same structure passed to this argument, so
          <code>["res/foo.png"]</code> will end up in
          <code>Payload/foo.app/res/foo.png</code>.
</li>
<li id="ios_extension_binary.weak_sdk_frameworks"><code>weak_sdk_frameworks</code>:
          Names of SDK frameworks to weakly link with. For instance,
          "MediaAccessibility".
          <i>(List of strings; optional)</i><br/>


          In difference to regularly linked SDK frameworks, symbols
          from weakly linked frameworks do not cause an error if they
          are not present at runtime.
</li>
<li id="ios_extension_binary.xibs"><code>xibs</code>:
          Files which are .xib resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .nib files and placed the bundle root of
          the final package. If this file's immediate containing directory is
          named *.lproj (e.g. en.lproj, Base.lproj), it will be placed under a
          directory of that name in the final bundle. This allows for
          localizable UI.
</li>
</ul>


<h3 id="java_binary">java_binary</h3>


<p class="rule-signature">
java_binary(<a href="#java_binary.name">name</a>,
<a href="#java_binary.deps">deps</a>,
<a href="#java_binary.srcs">srcs</a>,
<a href="#common.data">data</a>,
<a href="#java_binary.resources">resources</a>,
<a href="#binary.args">args</a>,
<a href="#java_binary.classpath_resources">classpath_resources</a>,
<a href="#java_binary.create_executable">create_executable</a>,
<a href="#java_binary.deploy_manifest_lines">deploy_manifest_lines</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#java_binary.javacopts">javacopts</a>,
<a href="#java_binary.jvm_flags">jvm_flags</a>,
<a href="#common.licenses">licenses</a>,
<a href="#java_binary.main_class">main_class</a>,
<a href="#binary.output_licenses">output_licenses</a>,
<a href="#java_binary.plugins">plugins</a>,
<a href="#java_binary.runtime_deps">runtime_deps</a>,
<a href="#java_binary.stamp">stamp</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
  Builds a Java archive ("jar file"), plus a wrapper shell script with the same name as the rule.
  The wrapper shell script uses a classpath that includes, among other things, a jar file for each
  library on which the binary depends.
</p>
<p>
  The wrapper script accepts several unique flags. Refer to
  <code>//src/main/java/com/google/devtools/build/lib/bazel/rules/java/java_stub_template.txt</code>
  for a list of configurable flags and environment variables accepted by the wrapper.
</p>

<h4 id="java_binary_implicit_outputs">Implicit output targets</h4>
        <ul>
          <li><code><var>name</var>.jar</code>: A Java archive, containing the class files and other
            resources corresponding to the binary's direct dependencies.</li>
          <li><code><var>name</var>-src.jar</code>: An archive containing the sources ("source
            jar").</li>
          <li><code><var>name</var>_deploy.jar</code>: A Java archive suitable for deployment (only
            built if explicitly requested).
            <p>
              Building the <code>&lt;<var>name</var>&gt;_deploy.jar</code> target for your rule
              creates a self-contained jar file with a manifest that allows it to be run with the
              <code>java -jar</code> command or with the wrapper script's <code>--singlejar</code>
              option. Using the wrapper script is preferred to <code>java -jar</code> because it
              also passes the <a href="#java_binary.jvm_flags">JVM flags</a> and the options to load
              native libraries.
            </p>
            <p>
              The deploy jar contains all the classes that would be found by a classloader that
              searched the classpath from the binary's wrapper script from beginning to end. It also
              contains the native libraries needed for dependencies. These are automatically loaded
              into the JVM at runtime.
            </p>
          </li>
          <li><code><var>name</var>_deploy-src.jar</code>: An archive containing the sources
            collected from the transitive closure of the target. These will match the classes in the
            <code>deploy.jar</code> except where jars have no matching source jar.</li>
        </ul>


<p>
  A <code>deps</code> attribute is not allowed in a <code>java_binary</code> rule without
  <a href="#java_binary.srcs"><code>srcs</code></a>; such a rule requires a
  <a href="#java_binary.main_class"><code>main_class</code></a> provided by
  <a href="#java_binary.runtime_deps"><code>runtime_deps</code></a>.
</p>

<p>The following code snippet illustrates a common mistake:</p>

<pre class="code">
java_binary(
    name = "DontDoThis",
    srcs = [
        <var>...</var>,
        <code class="deprecated">"GeneratedJavaFile.java"</code>,  # a generated .java file
    ],
    deps = [<code class="deprecated">":generating_rule",</code>],  # rule that generates that file
)
</pre>

<p>Do this instead:</p>

<pre class="code">
java_binary(
    name = "DoThisInstead",
    srcs = [
        <var>...</var>,
        ":generating_rule",
    ],
)
</pre>

<h4 id="java_binary_args">Arguments</h4>
<ul>
<li id="java_binary.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i>    <br/>It is good practice to use the name of the source file that is the main entry point of the
    application (minus the extension). For example, if your entry point is called
    <code>Main.java</code>, then your name could be <code>Main</code>.
</li>
<li id="java_binary.deps"><code>deps</code>:
          The list of other libraries to be linked in to the target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          See general comments about <code>deps</code> at <a href="#common-attributes">Attributes
          common to all build rules</a>.
</li>
<li id="java_binary.srcs"><code>srcs</code>:
          The list of source files that are processed to create the target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          This attribute is almost always required; see exceptions below.
          <p>
            Source files of type <code>.java</code> are compiled. In case of generated
            <code>.java</code> files it is generally advisable to put the generating rule's name
            here instead of the name of the file itself. This not only improves readability but
            makes the rule more resilient to future changes: if the generating rule generates
            different files in the future, you only need to fix one place: the <code>outs</code> of
            the generating rule. You should not list the generating rule in <code>deps</code>
            because it is a no-op.
          </p>
          <p>
            Source files of type <code>.srcjar</code> are unpacked and compiled. (This is useful if
            you need to generate a set of <code>.java</code> files with a genrule.)
          </p>
          <p>
            Source files of type <code>.jar</code> are linked in. <em class="harmful">This is
            discouraged, use <a href="#java_import"><code>java_import</code></a></em> if you need to
            link against existing (or generated) jar files (which is useful if you have a
            <code>.jar</code> file without sources).
          </p>
          <p>
            Rules: if the rule (typically <code>genrule</code> or <code>filegroup</code>) generates
            any of the files listed above, they will be used the same way as described for source
            files.
          </p>

          <p>
            This argument is almost always required, except if a
            <a href="#java_binary.main_class"><code>main_class</code></a> attribute specifies a
            class on the runtime classpath or you specify the <code>runtime_deps</code> argument.
          </p>
</li>
<li id="java_binary.resources"><code>resources</code>:
          A list of data files to include in a Java jar.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          If resources are specified, they will be bundled in the jar along with the usual
          <code>.class</code> files produced by compilation. The location of the resources inside of
          the jar file is determined using a heuristic, but it's often in a directory corresponding
          to the build package name. Resources may be source files or generated files.
</li>
<li id="java_binary.classpath_resources"><code>classpath_resources</code>:
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          <em class="harmful">DO NOT USE THIS OPTION UNLESS THERE IS NO OTHER WAY)</em>
          <p>
            A list of resources that must be located at the root of the java tree. This attribute's
            only purpose is to support third-party libraries that require that their resources be
            found on the classpath as exactly <code>"myconfig.xml"</code>. It is only allowed on
            binaries and not libraries, due to the danger of namespace conflicts.
          </p>
</li>
<li id="java_binary.create_executable"><code>create_executable</code>:
          Whether to build the executable wrapper script or not.
          <i>(Boolean; optional; default is 1)</i><br/>

          If this option is present, no executable wrapper script is built around the
          <code>.jar</code> file. Incompatible with <code>main_class</code> attribute.
</li>
<li id="java_binary.deploy_manifest_lines"><code>deploy_manifest_lines</code>:
          <i>(List of strings; optional)</i><br/>

          A list of lines to add to the <code>META-INF/manifest.mf</code> file generated for the
          <code>*_deploy.jar</code> target. The contents of this attribute are <em>not</em> subject
          to <a href="#make_variables">"Make variable"</a> substitution.
</li>
<li id="java_binary.javacopts"><code>javacopts</code>:
          Extra compiler options for this library.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          <p>These compiler options are passed to javac after the global compiler options.</p>
</li>
<li id="java_binary.jvm_flags"><code>jvm_flags</code>:
          A list of flags to embed in the wrapper script generated for running this binary.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          <p>
            The wrapper script for a Java binary includes a <code>CLASSPATH</code> definition (to
            find all the dependent jars) and invokes the right Java interpreter. The command line
            generated by the wrapper script includes the name of the main class followed by a
            <code>"$@"</code> so you can pass along other arguments after the classname.  However,
            arguments intended for parsing by the JVM must be specified <i>before</i> the classname
            on the command line. The contents of <code>jvm_flags</code> are added to the wrapper
            script before the classname is listed.
          </p>
</li>
<li id="java_binary.main_class"><code>main_class</code>:
          Name of class with <code>main()</code> method to use as entry point.
          <i>(String; optional)</i><br/>

          If a rule uses this option, it does not need a <code>srcs=[...]</code> list.
          Thus, with this attribute one can make an executable from a Java library that already
          contains one or more <code>main()</code> methods.
          <p>
            The value of this attribute is a class name, not a source file. The class must be
            available at runtime: it may be compiled by this rule (from <code>srcs</code>) or
            provided by direct or transitive dependencies (through <code>runtime_deps</code> or
            <code>deps</code>). If the class is unavailable, the binary will fail at runtime; there
            is no build-time check.
          </p>
</li>
<li id="java_binary.plugins"><code>plugins</code>:
          Java compiler plugins to run at compile-time.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          Every <code>java_plugin</code> specified in this attribute will be run whenever this rule
          is built. A library may also inherit plugins from dependencies that use
          <code><a href="#java_library.exported_plugins">exported_plugins</a></code>. Resources
          generated by the plugin will be included in the resulting jar of this rule.
</li>
<li id="java_binary.runtime_deps"><code>runtime_deps</code>:
          Libraries to make available to the final binary or test at runtime only.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          Like ordinary <code>deps</code>, these will appear on the runtime classpath, but unlike
          them, not on the compile-time classpath. Dependencies needed only at runtime should be
          listed here. Dependency-analysis tools should ignore targets that appear in both
          <code>runtime_deps</code> and <code>deps</code>.
</li>
<li id="java_binary.stamp"><code>stamp</code>:
          Enable link stamping.
          <i>(Integer; optional; default is -1)</i><br/>

          Whether to encode build information into the binary. Possible values:
          <ul>
            <li><code>stamp = 1</code>: Stamp the build information into the binary. Stamped
              binaries are only rebuilt when their dependencies change. Use this if there are tests
              that depend on the build information.</li>
            <li><code>stamp = 0</code>: Always replace build information by constant values. This
              gives good build result caching.</li>
            <li><code>stamp = -1</code>: Embedding of build information is controlled by the
              <a href="bazel-user-manual.html#flag--stamp">--[no]stamp</a> flag.</li>
          </ul>
</li>
</ul>


<h3 id="objc_binary">objc_binary</h3>


<p class="rule-signature">
objc_binary(<a href="#objc_binary.name">name</a>,
<a href="#objc_binary.deps">deps</a>,
<a href="#objc_binary.srcs">srcs</a>,
<a href="#objc_binary.resources">resources</a>,
<a href="#objc_binary.hdrs">hdrs</a>,
<a href="#objc_binary.app_icon">app_icon</a>,
<a href="#objc_binary.asset_catalogs">asset_catalogs</a>,
<a href="#objc_binary.bundle_id">bundle_id</a>,
<a href="#objc_binary.bundles">bundles</a>,
<a href="#objc_binary.copts">copts</a>,
<a href="#objc_binary.datamodels">datamodels</a>,
<a href="#objc_binary.defines">defines</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#objc_binary.entitlements">entitlements</a>,
<a href="#objc_binary.families">families</a>,
<a href="#objc_binary.includes">includes</a>,
<a href="#objc_binary.infoplist">infoplist</a>,
<a href="#objc_binary.launch_image">launch_image</a>,
<a href="#common.licenses">licenses</a>,
<a href="#objc_binary.non_arc_srcs">non_arc_srcs</a>,
<a href="#objc_binary.non_propagated_deps">non_propagated_deps</a>,
<a href="#objc_binary.pch">pch</a>,
<a href="#objc_binary.provisioning_profile">provisioning_profile</a>,
<a href="#objc_binary.sdk_dylibs">sdk_dylibs</a>,
<a href="#objc_binary.sdk_frameworks">sdk_frameworks</a>,
<a href="#objc_binary.sdk_includes">sdk_includes</a>,
<a href="#objc_binary.storyboards">storyboards</a>,
<a href="#objc_binary.strings">strings</a>,
<a href="#objc_binary.structured_resources">structured_resources</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>,
<a href="#objc_binary.weak_sdk_frameworks">weak_sdk_frameworks</a>,
<a href="#objc_binary.xibs">xibs</a>)
</p>


<p>This rule produces one or more Objective-C libraries for bundling in an
<code>ios_application</code>.</p>

<p>Any application-related attributes (infoplist, app_icon, ...) on this rule are deprecated and
you should define them on <code>ios_application</code> instead. They will be removed from
<code>objc_binary</code> soon.</p>

<h4 id="objc_binary_implicit_outputs">Implicit output targets</h4>
        <ul>
         <li><code><var>name</var>.ipa</code>: the application bundle as an <code>.ipa</code>
             file</li>
         <li><code><var>name</var>.xcodeproj/project.pbxproj</code>: An Xcode project file which
             can be used to develop or build on a Mac.</li>
        </ul>


<h4 id="objc_binary_args">Arguments</h4>
<ul>
<li id="objc_binary.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="objc_binary.deps"><code>deps</code>:
          The list of targets that are linked together to form the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_binary.srcs"><code>srcs</code>:
          The list of C, C++, Objective-C, and Objective-C++ files that are
          processed to create the library target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          These are your checked-in source files, plus any generated files.
          These are compiled into .o files with Clang, so headers should not go
          here (see the hdrs attribute).
</li>
<li id="objc_binary.resources"><code>resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. These files are placed
          in the root of the bundle (e.g. Payload/foo.app/...) in most cases.
          However, if they appear to be localized (i.e. are contained in a
          directory called *.lproj), they will be placed in a directory of the
          same name in the app bundle.
</li>
<li id="objc_binary.hdrs"><code>hdrs</code>:
          The list of Objective-C files that are included as headers by source
          files in this rule or by users of this library.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_binary.app_icon"><code>app_icon</code>:
          The name of the application icon.
          <i>(String; optional)</i><br/>


          The icon should be in one of the asset catalogs of this target or
          a (transitive) dependency. In a new project, this is initialized
          to "AppIcon" by Xcode.
          <p>
          If the application icon is not in an asset catalog, do not use this
          attribute. Instead, add a CFBundleIcons entry to the Info.plist file.
</li>
<li id="objc_binary.asset_catalogs"><code>asset_catalogs</code>:
          Files that comprise the asset catalogs of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcassets. This
          containing directory becomes the root of one of the asset catalogs
          linked with any binary that depends directly or indirectly on this
          target.
</li>
<li id="objc_binary.bundle_id"><code>bundle_id</code>:
          The bundle ID (reverse-DNS path followed by app name) of the binary.
          <i>(String; optional)</i><br/>


          If none is specified, a junk value will be used.
</li>
<li id="objc_binary.bundles"><code>bundles</code>:
          The list of bundle targets that this target requires to be included
          in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_binary.copts"><code>copts</code>:
          Extra flags to pass to the compiler.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          These flags will only apply to this target, and not those upon which
          it depends, or those which depend on it.
</li>
<li id="objc_binary.datamodels"><code>datamodels</code>:
          Files that comprise the data models of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcdatamodel, which
          is usually contained by another *.xcdatamodeld (note the added d)
          directory.
</li>
<li id="objc_binary.defines"><code>defines</code>:
          Extra <code>-D</code> flags to pass to the compiler. They should be in
          the form <code>KEY=VALUE</code> or simply <code>KEY</code> and are
          passed not only the compiler for this target (as <code>copts</code>
          are) but also to all <code>objc_</code> dependers of this target.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
</li>
<li id="objc_binary.entitlements"><code>entitlements</code>:
          The entitlements file required for device builds of this application.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>


          See
          <a href="https://developer.apple.com/library/mac/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AboutEntitlements.html">the apple documentation</a>
          for more information. If absent, the default entitlements from the
          provisioning profile will be used.
          <p>
          The following variables are substituted as per
          <a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html">their definitions in Apple's documentation</a>:
          $(AppIdentifierPrefix) and $(CFBundleIdentifier).
</li>
<li id="objc_binary.families"><code>families</code>:
          The device families to which this binary is targeted.
          <i>(List of strings; optional)</i><br/>


          This is known as the <code>TARGETED_DEVICE_FAMILY</code> build setting
          in Xcode project files. It is a list of one or more of the strings
          <code>"iphone"</code> and <code>"ipad"</code>.
</li>
<li id="objc_binary.includes"><code>includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets.
          <i>(List of strings; optional)</i><br/>


          This is to support third party and open-sourced libraries that do not
          specify the entire workspace path in their
          <code>#import/#include</code> statements.
          <p>
          The paths are interpreted relative to the package directory, and the
          genfiles and bin roots (e.g. <code>bazel-genfiles/pkg/includedir</code>
          and <code>bazel-out/pkg/includedir</code>) are included in addition to the
          actual client root.
</li>
<li id="objc_binary.infoplist"><code>infoplist</code>:
          The infoplist file. This corresponds to <i>appname</i>-Info.plist in Xcode projects.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

          Bazel will perform variable substitution on the plist file for the following values:
          <ul>
            <li><code>${EXECUTABLE_NAME}</code>: The name of the executable generated and included
               in the bundle by bazel, which can be used as the value for
               <code>CFBundleExecutable</code> within the plist.
            <li><code>${BUNDLE_NAME}</code>: This target's name and bundle suffix (.bundle or .app)
               in the form<code><var>name</var></code>.<code>suffix</code>.
            <li><code>${PRODUCT_NAME}</code>: This target's name.
         </ul>
</li>
<li id="objc_binary.launch_image"><code>launch_image</code>:
          The name of the launch image.
          <i>(String; optional)</i><br/>


          The icon should be in one of the asset catalogs of this target or
          a (transitive) dependency. In a new project, this is initialized
          to "LaunchImage" by Xcode.
          <p>
          If the launch image is not in an asset catalog, do not use this
          attribute. Instead, add an appropriately-named image resource to the
          bundle.
</li>
<li id="objc_binary.non_arc_srcs"><code>non_arc_srcs</code>:
          The list of Objective-C files that are processed to create the
          library target that DO NOT use ARC.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          The files in this attribute are treated very similar to those in the
          srcs attribute, but are compiled without ARC enabled.
</li>
<li id="objc_binary.non_propagated_deps"><code>non_propagated_deps</code>:
          The list of targets that are required in order to build this target,
          but which are not included in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          This attribute should only rarely be used, and probably only for proto
          dependencies.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_binary.pch"><code>pch</code>:
          Header file to prepend to every source file being compiled (both arc
          and non-arc).
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

          Note that the file will not be precompiled - this is simply a
          convenience, not a build-speed enhancement.
</li>
<li id="objc_binary.provisioning_profile"><code>provisioning_profile</code>:
          The provisioning profile (.mobileprovision file) to use when bundling
          the application.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>


          This is only used for non-simulator builds.
</li>
<li id="objc_binary.sdk_dylibs"><code>sdk_dylibs</code>:
          Names of SDK .dylib libraries to link with. For instance, "libz" or
          "libarchive".
           <i>(List of strings; optional)</i><br/>


          "libc++" is included automatically if the binary has any C++ or
          Objective-C++ sources in its dependency tree. When linking a binary,
          all libraries named in that binary's transitive dependency graph are
          used.
</li>
<li id="objc_binary.sdk_frameworks"><code>sdk_frameworks</code>:
          Names of SDK frameworks to link with.
          <i>(List of strings; optional)</i><br/>

          For instance, "XCTest" or "Cocoa". "UIKit" and "Foundation" are always
          included and do not mean anything if you include them.

          <p>When linking a library, only those frameworks named in that library's
          sdk_frameworks attribute are linked in. When linking a binary, all
          SDK frameworks named in that binary's transitive dependency graph are
          used.
</li>
<li id="objc_binary.sdk_includes"><code>sdk_includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets, where each path is relative to
          <code>$(SDKROOT)/usr/include</code>.
          <i>(List of strings; optional)</i><br/>

</li>
<li id="objc_binary.storyboards"><code>storyboards</code>:
          Files which are .storyboard resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .storyboardc directories, which are
          placed in the bundle root of the final package. If the storyboards's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable UI.
</li>
<li id="objc_binary.strings"><code>strings</code>:
          Files which are plists of strings, often localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are converted to binary plists (if they are not already)
          and placed in the bundle root of the final package. If this file's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable strings.
</li>
<li id="objc_binary.structured_resources"><code>structured_resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. In differences to
          <code>resources</code> these files are placed in the bundle root in
          the same structure passed to this argument, so
          <code>["res/foo.png"]</code> will end up in
          <code>Payload/foo.app/res/foo.png</code>.
</li>
<li id="objc_binary.weak_sdk_frameworks"><code>weak_sdk_frameworks</code>:
          Names of SDK frameworks to weakly link with. For instance,
          "MediaAccessibility".
          <i>(List of strings; optional)</i><br/>


          In difference to regularly linked SDK frameworks, symbols
          from weakly linked frameworks do not cause an error if they
          are not present at runtime.
</li>
<li id="objc_binary.xibs"><code>xibs</code>:
          Files which are .xib resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .nib files and placed the bundle root of
          the final package. If this file's immediate containing directory is
          named *.lproj (e.g. en.lproj, Base.lproj), it will be placed under a
          directory of that name in the final bundle. This allows for
          localizable UI.
</li>
</ul>


<h3 id="sh_binary">sh_binary</h3>


<p>
  The <code>sh_binary</code> rule is used to declare executable Bourne shell scripts.
  (<code>sh_binary</code> is a misnomer: its outputs aren't necessarily binaries.) This rule ensures
  that all dependencies are built, and appear in the <code>runfiles</code> area at execution time.
  We recommend that you name your <code>sh_binary()</code> rules after the name of the script minus
  the extension (e.g. <code>.sh</code>); do not give the rule and the file the same name.
</p>

<p class="rule-signature">
sh_binary(<a href="#sh_binary.name">name</a>,
<a href="#sh_binary.deps">deps</a>,
<a href="#sh_binary.srcs">srcs</a>,
<a href="#common.data">data</a>,
<a href="#binary.args">args</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#binary.output_licenses">output_licenses</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<h4 id="sh_binary_args">Arguments</h4>
<ul>
<li id="sh_binary.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="sh_binary.deps"><code>deps</code>:
          The list of "library" targets to be aggregated into this target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          See general comments about <code>deps</code>
          at <a href="#common-attributes.deps">Attributes common to all build rules</a>.
          <p>
            This attribute should be used to list other <code>sh_library</code> rules that provide
            interpreted program source code depended on by the code in <code>srcs</code>. The files
            provided by these rules will be present among the <code>runfiles</code> of this target.
          </p>
</li>
<li id="sh_binary.srcs"><code>srcs</code>:
          The file containing the shell script.
          <i>(List of <a href="build-ref.html#labels">labels</a>; required)</i><br/>

          <p>
            This attribute must be a singleton list, whose element is the shell script.
            This script must be executable, and may be a source file or a generated file.
            All other files required at runtime (whether scripts or data) belong in the
            <code>data</code> attribute.
          </p>
</li>
</ul>


<h4 id="sh_binary_examples">Example</h4>

<p>For a simple shell script with no dependencies or data:
</p>

<pre class="code">
sh_binary(
    name = "foo",
    srcs = ["foo.sh"],
    data = glob(["datafiles/*.txt"]),
)
</pre>



<!-- ============================================
                      library
     ============================================
-->
<h2 id="library">*_library</h2>

<p>A <code>*_library()</code> rule compiles some sources into a library.
   In general, a <code><var>language</var>_library</code> rule works like
   the corresponding <code><var>language</var>_binary</code> rule, but
   doesn't generate an executable.</p>

<h3 id="cc_library">cc_library</h3>


<p class="rule-signature">
cc_library(<a href="#cc_library.name">name</a>,
<a href="#cc_library.deps">deps</a>,
<a href="#cc_library.srcs">srcs</a>,
<a href="#common.data">data</a>,
<a href="#cc_library.hdrs">hdrs</a>,
<a href="#cc_library.abi">abi</a>,
<a href="#cc_library.abi_deps">abi_deps</a>,
<a href="#cc_library.alwayslink">alwayslink</a>,
<a href="#cc_library.copts">copts</a>,
<a href="#cc_library.defines">defines</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#cc_library.hdrs_check">hdrs_check</a>,
<a href="#cc_library.includes">includes</a>,
<a href="#common.licenses">licenses</a>,
<a href="#cc_library.linkopts">linkopts</a>,
<a href="#cc_library.linkstatic">linkstatic</a>,
<a href="#cc_library.nocopts">nocopts</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<h4 id="cc_library_args">Arguments</h4>
<ul>
<li id="cc_library.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="cc_library.deps"><code>deps</code>:
          The list of other libraries to be linked in to the binary target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          <p>These are always <code>cc_library</code> rules.</p>
</li>
<li id="cc_library.srcs"><code>srcs</code>:
          The list of C and C++ files that are processed to create the target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          These are C/C++ source and header files, either non-generated (normal source
          code) or generated.
          <p>All <code>.cc</code>, <code>.c</code>, and <code>.cpp</code> files will
             be compiled. These might be generated files: if a named file is in
             the <code>outs</code> of some other rule, this rule
             will automatically depend on that other rule.
          </p>
          <p>A <code>.h</code> file will not be compiled, but will be available for
             inclusion by sources in this rule. Both <code>.cc</code> and
             <code>.h</code> files can directly include headers listed in
             these <code>srcs</code> or in the <code>hdrs</code> of any rule listed in
             the <code>deps</code> argument. For compatibility with older
             implementations, and depending on the checking strictness specified by
             each library, additional headers may be available for inclusion. See
             <a href="#cc_library.hdrs_check"><code>cc_library.hdrs_check</code></a>.
          </p>
          <p>All <code>#include</code>d files must be mentioned in the
             <code>srcs</code> attribute of this rule, or in the
             <code>hdrs</code> attribute of referenced <code>cc_library()</code>s.
             The recommended style is for headers associated with a library to be
             listed in that library's <code>hdrs</code> attribute, and any remaining
             headers associated with this rule's sources to be listed in
             <code>srcs</code>. See <a href="#hdrs">"Header inclusion checking"</a>
             for a more detailed description.
          </p>
          <p>If a rule's name is in the <code>srcs</code>,
             then this rule automatically depends on that one.
             If the named rule's <code>outs</code> are C or C++
             source files, they are compiled into this rule;
             if they are library files, they are linked in.
          </p>
          <p>
            Permitted <code>srcs</code> file types:
          </p>
          <ul>
            <li>C and C++ source files: <code>.c</code>, <code>.cc</code>, <code>.cpp</code>,
              <code>.cxx</code>, <code>.C</code></li>
            <li>C and C++ header files: <code>.h</code>, <code>.hh</code>, <code>.hpp</code>,
              <code>.hxx</code>, <code>.inc</code></li>
            <li>Assembler with C preprocessor: <code>.S</code></li>
            <li>Archive: <code>.a</code>, <code>.pic.a</code></li>
            <li>"Always link" library: <code>.lo</code>, <code>.pic.lo</code></li>
            <li>Shared library, versioned or unversioned: <code>.so</code>,
              <code>.so.<i>version</i></code></li>
            <li>Object file: <code>.o</code>, <code>.pic.o</code></li>
          </ul>
          <p>
            ...and any rules that produce those files.
            Different extensions denote different programming languages in
            accordance with gcc convention.
          </p>
</li>
<li id="cc_library.hdrs"><code>hdrs</code>:
           The list of header files published by
           this library to be directly included by sources in dependent rules.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          <p>This is the strongly preferred location for declaring header files that
             describe the interface for the library. These headers will be made
             available for inclusion by sources in this rule or in dependent rules.
             Headers not meant to be included by a client of this library should be
             listed in the <code>srcs</code> attribute instead, even if they are
             included by a published header. See <a href="#hdrs">"Header inclusion
             checking"</a> for a more detailed description. </p>
          <p>Permitted <code>headers</code> file types:
            <code>.h</code>,
            <code>.hh</code>,
            <code>.hpp</code>,
            <code>.hxx</code>.
          </p>
</li>
<li id="cc_library.abi" class="deprecated"><code>abi</code>:
           Platform-specific information string which is used in combination
            with <code>abi_deps</code>.
            <i>(String; optional; default is "$(ABI)")</i><br/>

            Subject to <a href="#make_variables">"Make" variable</a> substitution.
            <p>
              This string typically includes references to one or more "Make" variables of the form
              <code>"$(VAR)"</code>. The default value is <code>"$(ABI)"</code>.
            </p>
            <p>
              With <code>abi_deps</code>, the regular expression <code>patterns</code> will be
              matched against this string.
            </p>
</li>
<li id="cc_library.abi_deps" class="deprecated"><code>abi_deps</code>:
          The list of architecture-specific dependencies that are processed to create the target.
          <i>(Dictionary mapping strings to lists of
             <a href="build-ref.html#labels">labels</a>; optional)</i>
          <p><i><a href="#configurable-attributes">Configurable attributes</a> is a generalization
            of the same concept that works for most rules and attributes. It mostly deprecates
            <code>abi_deps</code>, which we expect to remove it as soon as possible. Use
            configurable attributes over <code>abi_deps</code> whenever possible. If the former is
            insufficient for you, please let us know why.</i>
          </p>
          <p>Each entry in this dictionary follows the form of
             <code>'pattern' : ['label1', 'label2', ...]</code>.  If the library's
             <code>abi</code> attribute is an unanchored match for the regular
             expression defined in <code>pattern</code>, the corresponding
             labels are used as dependencies as if they had appeared in the
             <code>deps</code> list.
          </p>
          <p>All pairs with a matching <code>pattern</code> will have their labels
             used.  If no matches are found, no dependencies will be used.  The
             ordering is irrelevant.
          </p>
          <p>If you want a <code>pattern</code> to not match a particular
             <code>abi</code>, for example adding a dep on all non-k8 platforms, you
             can use a negative lookahead pattern.  This would look like
             <code>(?!k8).*</code>.
          </p>
          <p>If using <code>abi_deps</code>, do not provide <code>deps</code>.
             Instead, use an entry with a <code>pattern</code> of <code>'.*'</code>
             because that matches everything.  This is also how to share
             dependencies across multiple different <code>abi</code> values.
          </p>
          <p>Typically, this mechanism is used to specify the appropriate set of
             paths to pre-compiled libraries for the target architecture of the
             current build.  Such paths are parameterized over "Make" variables
             such as <code>$(ABI)</code>, <code>$(TARGET_CPU)</code>,
             <code>$(C_COMPILER)</code>, etc, but since "Make" variables are not
             allowed in <a href="build-ref.html#labels">labels</a>, the
             architecture-specific files cannot be specified via the normal
             <code>srcs</code> attribute. Instead, this mechanism can be used
             to declare architecture-specific dependent rules for the current
             target that can specify the correct libraries in their own
             <code>srcs</code>.
          </p>
          <p>This mechanism is also used to specify the appropriate set of
             dependencies when some targets can't compile for the target architecture
             of the current build.  In most cases, uses an <code>#ifdef</code>.
             Only use <code>abi_deps</code> for more significant dependency changes.
          </p>
</li>
<li id="cc_library.alwayslink"><code>alwayslink</code>:
          If 1, any binary that depends (directly or indirectly) on this C++
          library will link in all the object files for the files listed in
          <code>srcs</code>, even if some contain no symbols referenced by the binary.
          <i>(Boolean; optional; default is 0)</i><br/>

          This is useful if your code isn't explicitly called by code in
          the binary, e.g., if your code registers to receive some callback
          provided by some service.
</li>
<li id="cc_library.copts"><code>copts</code>:
          Add these options to the C++ compilation command.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          <p>Each string in this attribute is added in the given order to <code>COPTS</code>
          before compiling the binary target.
          The flags take effect only for compiling this target, not its dependencies,
          so be careful about header files included elsewhere.</p>
</li>
<li id="cc_library.defines"><code>defines</code>:
          List of defines to add to the compile line.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make" variable</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          Each string, which must consist of a single Bourne shell token,
          is prepended with <code>-D</code> and added to
          <code>COPTS</code>.
          Unlike <a href="#cc_binary.copts"><code>copts</code></a>, these flags are added for the
          target and every rule that depends on it!  Be very careful, since this may have
          far-reaching effects.  When in doubt, add "-D" flags to
          <a href="#cc_binary.copts"><code>copts</code></a> instead.
</li>
<li id="cc_library.hdrs_check" class="deprecated"><code>hdrs_check</code>:
          Deprecated: we will roll out support for C++ modules, which are strict by design.
          <a id="cc_library.hdrs_check"></a>
          The strictness of the header file check to be applied to dependents and the
          source files of this library. Must be one of: <code>"loose"</code>,
          <code>"warn"</code> or <code>"strict"</code>.
          <i>(String; optional; default is "strict")</i><br/>

          <p>
             The three levels of checking operate as follows:
          </p>
          <ul>
             <li><code>"loose"</code>: Any source header file in any of the
             directories of the containing package may be <code>#include</code>d by
             sources in this rule and dependent rules. Generated header files must be
             explicitly listed in <code>hdrs</code> or <code>srcs</code>. This
             check level is the current default, but it will be phased out.</li>
             <li><code>"warn"</code>: Enforcement is the same as for
             <code>"loose"</code>, but any case that would violate the
             <code>"strict"</code> check will cause a warning to be emitted.
             This check level is provided to help with the migration to strict.</li>
             <li><code>"strict"</code>: All <code>#include</code>d files must be explicitly declared
             somewhere in the <code>hdrs</code> or <code>srcs</code> of the rules providing the
             libraries or the rules containing the including source. Note that this means that a
             rule can include any header that is in the <code>hdrs</code> or <code>srcs</code> of
             any rule it transitively depends on. A stricter layering check is currently being
             rolled out.</li>
          </ul>
          <p>If a rule does not specify the hdrs_check attribute, the
          <code><a href="#package.default_hdrs_check">default_hdrs_check</a></code>
          attribute of the <code><a href="#package">package</a></code> statement
          in the BUILD file containing the rule is used.</p>
</li>
<li id="cc_library.includes"><code>includes</code>:
          List of include dirs to be added to the compile line.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution.
          Each string is prepended with <code>-I</code> and added to <code>COPTS</code>. Unlike
          <a href="#cc_binary.copts">COPTS</a>, these flags are added for this rule
          and every rule that depends on it. (Note: not the rules it depends upon!) Be
          very careful, since this may have far-reaching effects.  When in doubt, add
          "-I" flags to <a href="#cc_binary.copts">COPTS</a> instead.
</li>
<li id="cc_library.linkopts"><code>linkopts</code>:
          Add these flags to the C++ linker command.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make" variable</a> substitution,
          <a href="#sh-tokenization">Bourne shell tokenization</a>
          and <a href="#label-expansion">label expansion</a>.
          Each string in this attribute is added to <code>LINKOPTS</code> before
          linking the binary target.
          <p>
            Each element of this list that does not start with <code>$</code> or <code>-</code> is
            assumed to be the label of a target in <code>deps</code>.  The
            list of files generated by that target is appended to the linker
            options.  An error is reported if the label is invalid, or is
            not declared in <code>deps</code>.
          </p>
</li>
<li id="cc_library.linkstatic"><code>linkstatic</code>:
           Link the binary in mostly-static mode.
           <i>(Boolean; optional; default is 0)</i><br/>

           By default this option is on for <code>cc_binary</code> and off for <code>cc_test</code>.
           <p>
             If enabled, this tells the build tool to link in <code>.a</code>'s instead of
             <code>.so</code>'s for user libraries whenever possible. Some system libraries may
             still be linked dynamically, as are libraries for which there's no static library. So
             the resulting binary will be dynamically linked, hence only <i>mostly</i> static.
           </p>
           <p>There are really three different ways to link an executable:</p>
           <ul>
           <li> FULLY STATIC, in which everything is linked statically; e.g. "<code>gcc -static
             foo.o libbar.a libbaz.a -lm</code>".<br/>This mode is enabled by specifying
             <code>-static</code> in the <a href="#cc_binary.linkopts"><code>linkopts</code></a>
             attribute.</li>
           <li> MOSTLY STATIC, in which all user libraries are linked statically (if a static
             version is available), but where system libraries are linked dynamically, e.g.
             "<code>gcc foo.o libfoo.a libbaz.a -lm</code>".<br/>This mode is enabled by specifying
             <code>linkstatic=1</code>.</li>
           <li> DYNAMIC, in which all libraries are linked dynamically (if a dynamic version is
             available), e.g. "<code>gcc foo.o libfoo.so libbaz.so -lm</code>".<br/> This mode is
             enabled by specifying <code>linkstatic=0</code>.</li>
           </ul>
           <p>
           The <code>linkstatic</code> attribute has a different meaning if used on a
           <a href="#cc_library"><code>cc_library()</code></a> rule.
           For a C++ library, <code>linkstatic=1</code> indicates that only
           static linking is allowed, so no <code>.so</code> will be produced.
           </p>
           <p>
           If <code>linkstatic=0</code>, then the build tool will create symlinks to
           depended-upon shared libraries in the <code>*.runfiles</code> area.
           </p>
</li>
<li id="cc_library.nocopts"><code>nocopts</code>:
          Remove matching options from the C++ compilation command.
          <i>(String; optional)</i><br/>

          Subject to <a href="#make_variables">"Make" variable</a> substitution.
          The value of this attribute is interpreted as a regular expression.
          Any preexisting <code>COPTS</code> that match this regular expression
          (not including values explicitly specified in the rule's <a
          href="#cc_binary.copts">copts</a> attribute) will be removed from
          <code>COPTS</code> for purposes of compiling this rule.
          This attribute should rarely be needed.
</li>
</ul>


<h3 id="java_import">java_import</h3>


<p class="rule-signature">
java_import(<a href="#java_import.name">name</a>,
<a href="#common.data">data</a>,
<a href="#java_import.constraints">constraints</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#java_import.exports">exports</a>,
<a href="#java_import.jars">jars</a>,
<a href="#common.licenses">licenses</a>,
<a href="#java_import.neverlink">neverlink</a>,
<a href="#java_import.srcjar">srcjar</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
  This rule allows the use of precompiled JAR files as libraries for
  <code><a href="#java_library">java_library</a></code> rules.
</p>

<h4 id="java_import_args">Arguments</h4>
<ul>
<li id="java_import.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="java_import.constraints"><code>constraints</code>:
        Extra constraints imposed on this rule as a Java library.
        <i>(List of strings; optional)</i><br/>

        See <a href="#java_library.constraints">java_library.constraints</a>.
</li>
<li id="java_import.exports"><code>exports</code>:
        Targets to make available to users of this rule.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        See <a href="#java_library.exports">java_library.exports</a>.
</li>
<li id="java_import.jars"><code>jars</code>:
        The list of JAR files provided to Java targets that depend on this target.
        <i>(List of <a href="build-ref.html#labels">labels</a>; required)</i><br/>

</li>
<li id="java_import.neverlink"><code>neverlink</code>:
        Only use this library for compilation and not at runtime.
        <i>(Boolean; optional; default is 0)</i><br/>

        Useful if the library will be provided by the runtime environment
        during execution. Examples of libraries like this are IDE APIs
        for IDE plug-ins or <code>tools.jar</code> for anything running on
        a standard JDK.
</li>
<li id="java_import.srcjar"><code>srcjar</code>:
        A JAR file that contains source code for the compiled JAR files.
        <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

</li>
</ul>


<h4 id="java_import_examples">Examples</h4>

<pre class="code">
    java_import(
        name = "maven_model",
        jars = [
            "maven_model/maven-aether-provider-3.2.3.jar",
            "maven_model/maven-model-3.2.3.jar",
            "maven_model/maven-model-builder-3.2.3.jar",
        ],
    )
</pre>

<h3 id="java_library">java_library</h3>


<p class="rule-signature">
java_library(<a href="#java_library.name">name</a>,
<a href="#java_library.deps">deps</a>,
<a href="#java_library.srcs">srcs</a>,
<a href="#java_library.data">data</a>,
<a href="#java_library.resources">resources</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#java_library.exported_plugins">exported_plugins</a>,
<a href="#java_library.exports">exports</a>,
<a href="#java_library.javacopts">javacopts</a>,
<a href="#common.licenses">licenses</a>,
<a href="#java_library.neverlink">neverlink</a>,
<a href="#java_library.plugins">plugins</a>,
<a href="#java_library.runtime_deps">runtime_deps</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>This rule compiles and links sources into a <code>.jar</code> file.</p>

<h4 id="java_library_implicit_outputs">Implicit output targets</h4>
        <ul>
          <li><code>lib<var>name</var>.jar</code>: A Java archive containing the class files.</li>
          <li><code>lib<var>name</var>-src.jar</code>: An archive containing the sources ("source
            jar").</li>
        </ul>


<h4 id="java_library_args">Arguments</h4>
<ul>
<li id="java_library.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="java_library.deps"><code>deps</code>:
        The list of libraries to link into this library.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        See general comments about <code>deps</code> at <a href="#common-attributes">Attributes
        common to all build rules</a>.
        <p>
          The jars built by <code>java_library</code> rules listed in <code>deps</code> will be on
          the compile-time classpath of this rule. Furthermore the transitive closure of their
          <code>deps</code>, <code>runtime_deps</code> and <code>exports</code> will be on the
          runtime classpath.
        </p>
        <p>
          By contrast, targets in the <code>data</code> attribute are included in the runfiles but
          on neither the compile-time nor runtime classpath.
        </p>
</li>
<li id="java_library.srcs"><code>srcs</code>:
          The list of source files that are processed to create the target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          This attribute is almost always required; see exceptions below.
          <p>
            Source files of type <code>.java</code> are compiled. In case of generated
            <code>.java</code> files it is generally advisable to put the generating rule's name
            here instead of the name of the file itself. This not only improves readability but
            makes the rule more resilient to future changes: if the generating rule generates
            different files in the future, you only need to fix one place: the <code>outs</code> of
            the generating rule. You should not list the generating rule in <code>deps</code>
            because it is a no-op.
          </p>
          <p>
            Source files of type <code>.srcjar</code> are unpacked and compiled. (This is useful if
            you need to generate a set of <code>.java</code> files with a genrule.)
          </p>
          <p>
            Source files of type <code>.jar</code> are linked in. <em class="harmful">This is
            discouraged, use <a href="#java_import"><code>java_import</code></a></em> if you need to
            link against existing (or generated) jar files (which is useful if you have a
            <code>.jar</code> file without sources).
          </p>
          <p>
            Rules: if the rule (typically <code>genrule</code> or <code>filegroup</code>) generates
            any of the files listed above, they will be used the same way as described for source
            files.
          </p>

          <p>
            This argument is almost always required, except if a
            <a href="#java_binary.main_class"><code>main_class</code></a> attribute specifies a
            class on the runtime classpath or you specify the <code>runtime_deps</code> argument.
          </p>
</li>
<li id="java_library.data"><code>data</code>:
        The list of files needed by this library at runtime.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        See general comments about <code>data</code> at <a href="#common-attributes">Attributes
        common to all build rules</a>.
        <p>
          When building a <code>java_library</code>, Bazel doesn't put these files anywhere; if the
          <code>data</code> files are generated files then Bazel generates them. When building a
          test that depends on this <code>java_library</code> Bazel copies or links the
          <code>data</code> files into the runfiles area.
        </p>
</li>
<li id="java_library.resources"><code>resources</code>:
          A list of data files to include in a Java jar.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          If resources are specified, they will be bundled in the jar along with the usual
          <code>.class</code> files produced by compilation. The location of the resources inside of
          the jar file is determined using a heuristic, but it's often in a directory corresponding
          to the build package name. Resources may be source files or generated files.
</li>
<li id="java_library.exported_plugins"><code>exported_plugins</code>:
        The list of <code><a href="#java_plugin">java_plugin</a></code>s (e.g. annotation
        processors) to export to libraries that directly depend on this library.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        <p>
          The specified list of <code>java_plugin</code>s will be applied to any library which
          directly depends on this library, just as if that library had explicitly declared these
          labels in <code><a href="#java_library.plugins">plugins</a></code>.
        </p>
</li>
<li id="java_library.exports"><code>exports</code>:
        Exported libraries.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        <p>
          Listing rules here will make them available to parent rules, as if the parents explicitly
          depended on these rules. This is not true for regular (non-exported) <code>deps</code>.
        </p>
        <p>
          Summary: a rule <i>X</i> can access the code in <i>Y</i> if there exists a dependency
          path between them that begins with a <code>deps</code> edge followed by zero or more
          <code>exports</code> edges. Let's see some examples to illustrate this.
        </p>
        <p>
          Assume <i>A</i> depends on <i>B</i> and <i>B</i> depends on <i>C</i>. In this case
          C is a <em>transitive</em> dependency of A, so changing C's sources and rebuilding A will
          correctly rebuild everything. However A will not be able to use classes in C. To allow
          that, either A has to declare C in its <code>deps</code>, or B can make it easier for A
          (and anything that may depend on A) by declaring C in its (B's) <code>exports</code>
          attribute.
        </p>
        <p>
          The closure of exported libraries is available to all direct parent rules. Take a slightly
          different example: A depends on B, B depends on C and D, and also exports C but not D.
          Now A has access to C but not to D. Now, if C and D exported some libraries, C' and D'
          respectively, A could only access C' but not D'.
        </p>
        <p>
          Important: an exported rule is not a regular dependency. Sticking to the previous example,
          if B exports C and wants to also use C, it has to also list it in its own
          <code>deps</code>.
        </p>
</li>
<li id="java_library.javacopts"><code>javacopts</code>:
          Extra compiler options for this library.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          <p>These compiler options are passed to javac after the global compiler options.</p>
</li>
<li id="java_library.neverlink"><code>neverlink</code>:
        Whether this library should only be used for compilation and not at runtime.
        <i>(Boolean; optional; default is 0)</i><br/>

        Useful if the library will be provided by the runtime environment during execution. Examples
        of such libraries are the IDE APIs for IDE plug-ins or <code>tools.jar</code> for anything
        running on a standard JDK.
        <p>
          Note that <code>neverlink = 1</code> does not prevent the compiler from inlining material
          from this library into compilation targets that depend on it, as permitted by the Java
          Language Specification (e.g., <code>static final</code> constants of <code>String</code>
          or of primitive types). The preferred use case is therefore when the runtime library is
          identical to the compilation library.
        </p>
        <p>
          If the runtime library differs from the compilation library then you must ensure that it
          differs only in places that the JLS forbids compilers to inline (and that must hold for
          all future versions of the JLS).
        </p>
</li>
<li id="java_library.plugins"><code>plugins</code>:
          Java compiler plugins to run at compile-time.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          Every <code>java_plugin</code> specified in this attribute will be run whenever this rule
          is built. A library may also inherit plugins from dependencies that use
          <code><a href="#java_library.exported_plugins">exported_plugins</a></code>. Resources
          generated by the plugin will be included in the resulting jar of this rule.
</li>
<li id="java_library.runtime_deps"><code>runtime_deps</code>:
          Libraries to make available to the final binary or test at runtime only.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          Like ordinary <code>deps</code>, these will appear on the runtime classpath, but unlike
          them, not on the compile-time classpath. Dependencies needed only at runtime should be
          listed here. Dependency-analysis tools should ignore targets that appear in both
          <code>runtime_deps</code> and <code>deps</code>.
</li>
</ul>


<h3 id="objc_bundle">objc_bundle</h3>


<p class="rule-signature">
objc_bundle(<a href="#objc_bundle.name">name</a>,
<a href="#objc_bundle.bundle_imports">bundle_imports</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>This rule encapsulates an already-built bundle. It is defined by a list of
files in one or more <code>.bundle</code> directories.

<h4 id="objc_bundle_args">Arguments</h4>
<ul>
<li id="objc_bundle.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="objc_bundle.bundle_imports"><code>bundle_imports</code>:
        The list of files under a <code>.bundle</code> directory which are
        provided to Objective-C targets that depend on this target.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
</ul>


<h3 id="objc_bundle_library">objc_bundle_library</h3>


<p class="rule-signature">
objc_bundle_library(<a href="#objc_bundle_library.name">name</a>,
<a href="#objc_bundle_library.resources">resources</a>,
<a href="#objc_bundle_library.asset_catalogs">asset_catalogs</a>,
<a href="#objc_bundle_library.bundles">bundles</a>,
<a href="#objc_bundle_library.datamodels">datamodels</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#objc_bundle_library.infoplist">infoplist</a>,
<a href="#common.licenses">licenses</a>,
<a href="#objc_bundle_library.storyboards">storyboards</a>,
<a href="#objc_bundle_library.strings">strings</a>,
<a href="#objc_bundle_library.structured_resources">structured_resources</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>,
<a href="#objc_bundle_library.xibs">xibs</a>)
</p>


<p>This rule encapsulates a library which is provided to dependers as a bundle.
A <code>objc_bundle_library</code>'s resources are put in a nested bundle in
the final iOS application.

<h4 id="objc_bundle_library_args">Arguments</h4>
<ul>
<li id="objc_bundle_library.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="objc_bundle_library.resources"><code>resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. These files are placed
          in the root of the bundle (e.g. Payload/foo.app/...) in most cases.
          However, if they appear to be localized (i.e. are contained in a
          directory called *.lproj), they will be placed in a directory of the
          same name in the app bundle.
</li>
<li id="objc_bundle_library.asset_catalogs"><code>asset_catalogs</code>:
          Files that comprise the asset catalogs of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcassets. This
          containing directory becomes the root of one of the asset catalogs
          linked with any binary that depends directly or indirectly on this
          target.
</li>
<li id="objc_bundle_library.bundles"><code>bundles</code>:
          The list of bundle targets that this target requires to be included
          in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_bundle_library.datamodels"><code>datamodels</code>:
          Files that comprise the data models of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcdatamodel, which
          is usually contained by another *.xcdatamodeld (note the added d)
          directory.
</li>
<li id="objc_bundle_library.infoplist"><code>infoplist</code>:
          The infoplist file. This corresponds to <i>appname</i>-Info.plist in Xcode projects.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

          Bazel will perform variable substitution on the plist file for the following values:
          <ul>
            <li><code>${EXECUTABLE_NAME}</code>: The name of the executable generated and included
               in the bundle by bazel, which can be used as the value for
               <code>CFBundleExecutable</code> within the plist.
            <li><code>${BUNDLE_NAME}</code>: This target's name and bundle suffix (.bundle or .app)
               in the form<code><var>name</var></code>.<code>suffix</code>.
            <li><code>${PRODUCT_NAME}</code>: This target's name.
         </ul>
</li>
<li id="objc_bundle_library.storyboards"><code>storyboards</code>:
          Files which are .storyboard resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .storyboardc directories, which are
          placed in the bundle root of the final package. If the storyboards's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable UI.
</li>
<li id="objc_bundle_library.strings"><code>strings</code>:
          Files which are plists of strings, often localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are converted to binary plists (if they are not already)
          and placed in the bundle root of the final package. If this file's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable strings.
</li>
<li id="objc_bundle_library.structured_resources"><code>structured_resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. In differences to
          <code>resources</code> these files are placed in the bundle root in
          the same structure passed to this argument, so
          <code>["res/foo.png"]</code> will end up in
          <code>Payload/foo.app/res/foo.png</code>.
</li>
<li id="objc_bundle_library.xibs"><code>xibs</code>:
          Files which are .xib resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .nib files and placed the bundle root of
          the final package. If this file's immediate containing directory is
          named *.lproj (e.g. en.lproj, Base.lproj), it will be placed under a
          directory of that name in the final bundle. This allows for
          localizable UI.
</li>
</ul>


<h3 id="objc_framework">objc_framework</h3>


<p class="rule-signature">
objc_framework(<a href="#objc_framework.name">name</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#objc_framework.framework_imports">framework_imports</a>,
<a href="#common.licenses">licenses</a>,
<a href="#objc_framework.sdk_dylibs">sdk_dylibs</a>,
<a href="#objc_framework.sdk_frameworks">sdk_frameworks</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>,
<a href="#objc_framework.weak_sdk_frameworks">weak_sdk_frameworks</a>)
</p>


<p>This rule encapsulates an already-built framework. It is defined by a list
of files in one or more <code>.framework</code> directories.

<h4 id="objc_framework_args">Arguments</h4>
<ul>
<li id="objc_framework.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="objc_framework.framework_imports"><code>framework_imports</code>:
        The list of files under a <code>.framework</code> directory which are
        provided to Objective-C targets that depend on this target.
        <i>(List of <a href="build-ref.html#labels">labels</a>; required)</i><br/>

</li>
<li id="objc_framework.sdk_dylibs"><code>sdk_dylibs</code>:
          Names of SDK .dylib libraries to link with. For instance, "libz" or
          "libarchive".
           <i>(List of strings; optional)</i><br/>


          "libc++" is included automatically if the binary has any C++ or
          Objective-C++ sources in its dependency tree. When linking a binary,
          all libraries named in that binary's transitive dependency graph are
          used.
</li>
<li id="objc_framework.sdk_frameworks"><code>sdk_frameworks</code>:
          Names of SDK frameworks to link with.
          <i>(List of strings; optional)</i><br/>

          For instance, "XCTest" or "Cocoa". "UIKit" and "Foundation" are always
          included and do not mean anything if you include them.

          <p>When linking a library, only those frameworks named in that library's
          sdk_frameworks attribute are linked in. When linking a binary, all
          SDK frameworks named in that binary's transitive dependency graph are
          used.
</li>
<li id="objc_framework.weak_sdk_frameworks"><code>weak_sdk_frameworks</code>:
          Names of SDK frameworks to weakly link with. For instance,
          "MediaAccessibility".
          <i>(List of strings; optional)</i><br/>


          In difference to regularly linked SDK frameworks, symbols
          from weakly linked frameworks do not cause an error if they
          are not present at runtime.
</li>
</ul>


<h3 id="objc_import">objc_import</h3>


<p class="rule-signature">
objc_import(<a href="#objc_import.name">name</a>,
<a href="#objc_import.resources">resources</a>,
<a href="#objc_import.hdrs">hdrs</a>,
<a href="#objc_import.alwayslink">alwayslink</a>,
<a href="#objc_import.archives">archives</a>,
<a href="#objc_import.asset_catalogs">asset_catalogs</a>,
<a href="#objc_import.bundles">bundles</a>,
<a href="#objc_import.datamodels">datamodels</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#objc_import.includes">includes</a>,
<a href="#common.licenses">licenses</a>,
<a href="#objc_import.sdk_dylibs">sdk_dylibs</a>,
<a href="#objc_import.sdk_frameworks">sdk_frameworks</a>,
<a href="#objc_import.sdk_includes">sdk_includes</a>,
<a href="#objc_import.storyboards">storyboards</a>,
<a href="#objc_import.strings">strings</a>,
<a href="#objc_import.structured_resources">structured_resources</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>,
<a href="#objc_import.weak_sdk_frameworks">weak_sdk_frameworks</a>,
<a href="#objc_import.xibs">xibs</a>)
</p>


<p>This rule encapsulates an already-compiled static library in the form of an
<code>.a</code> file. It also allows exporting headers and resources using the same
attributes supported by <code>objc_library</code>.</p>

<h4 id="objc_import_args">Arguments</h4>
<ul>
<li id="objc_import.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="objc_import.resources"><code>resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. These files are placed
          in the root of the bundle (e.g. Payload/foo.app/...) in most cases.
          However, if they appear to be localized (i.e. are contained in a
          directory called *.lproj), they will be placed in a directory of the
          same name in the app bundle.
</li>
<li id="objc_import.hdrs"><code>hdrs</code>:
          The list of Objective-C files that are included as headers by source
          files in this rule or by users of this library.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_import.alwayslink"><code>alwayslink</code>:
          If 1, any bundle or binary that depends (directly or indirectly) on this
          library will link in all the object files for the files listed in
          <code>srcs</code> and <code>non_arc_srcs</code>, even if some contain no
          symbols referenced by the binary.
          <i>(Boolean; optional; default is 0)</i><br/>

          This is useful if your code isn't explicitly called by code in
          the binary, e.g., if your code registers to receive some callback
          provided by some service.
</li>
<li id="objc_import.archives"><code>archives</code>:
        The list of <code>.a</code> files provided to Objective-C targets that
        depend on this target.
        <i>(List of <a href="build-ref.html#labels">labels</a>; required)</i><br/>

</li>
<li id="objc_import.asset_catalogs"><code>asset_catalogs</code>:
          Files that comprise the asset catalogs of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcassets. This
          containing directory becomes the root of one of the asset catalogs
          linked with any binary that depends directly or indirectly on this
          target.
</li>
<li id="objc_import.bundles"><code>bundles</code>:
          The list of bundle targets that this target requires to be included
          in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_import.datamodels"><code>datamodels</code>:
          Files that comprise the data models of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcdatamodel, which
          is usually contained by another *.xcdatamodeld (note the added d)
          directory.
</li>
<li id="objc_import.includes"><code>includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets.
          <i>(List of strings; optional)</i><br/>


          This is to support third party and open-sourced libraries that do not
          specify the entire workspace path in their
          <code>#import/#include</code> statements.
          <p>
          The paths are interpreted relative to the package directory, and the
          genfiles and bin roots (e.g. <code>bazel-genfiles/pkg/includedir</code>
          and <code>bazel-out/pkg/includedir</code>) are included in addition to the
          actual client root.
</li>
<li id="objc_import.sdk_dylibs"><code>sdk_dylibs</code>:
          Names of SDK .dylib libraries to link with. For instance, "libz" or
          "libarchive".
           <i>(List of strings; optional)</i><br/>


          "libc++" is included automatically if the binary has any C++ or
          Objective-C++ sources in its dependency tree. When linking a binary,
          all libraries named in that binary's transitive dependency graph are
          used.
</li>
<li id="objc_import.sdk_frameworks"><code>sdk_frameworks</code>:
          Names of SDK frameworks to link with.
          <i>(List of strings; optional)</i><br/>

          For instance, "XCTest" or "Cocoa". "UIKit" and "Foundation" are always
          included and do not mean anything if you include them.

          <p>When linking a library, only those frameworks named in that library's
          sdk_frameworks attribute are linked in. When linking a binary, all
          SDK frameworks named in that binary's transitive dependency graph are
          used.
</li>
<li id="objc_import.sdk_includes"><code>sdk_includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets, where each path is relative to
          <code>$(SDKROOT)/usr/include</code>.
          <i>(List of strings; optional)</i><br/>

</li>
<li id="objc_import.storyboards"><code>storyboards</code>:
          Files which are .storyboard resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .storyboardc directories, which are
          placed in the bundle root of the final package. If the storyboards's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable UI.
</li>
<li id="objc_import.strings"><code>strings</code>:
          Files which are plists of strings, often localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are converted to binary plists (if they are not already)
          and placed in the bundle root of the final package. If this file's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable strings.
</li>
<li id="objc_import.structured_resources"><code>structured_resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. In differences to
          <code>resources</code> these files are placed in the bundle root in
          the same structure passed to this argument, so
          <code>["res/foo.png"]</code> will end up in
          <code>Payload/foo.app/res/foo.png</code>.
</li>
<li id="objc_import.weak_sdk_frameworks"><code>weak_sdk_frameworks</code>:
          Names of SDK frameworks to weakly link with. For instance,
          "MediaAccessibility".
          <i>(List of strings; optional)</i><br/>


          In difference to regularly linked SDK frameworks, symbols
          from weakly linked frameworks do not cause an error if they
          are not present at runtime.
</li>
<li id="objc_import.xibs"><code>xibs</code>:
          Files which are .xib resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .nib files and placed the bundle root of
          the final package. If this file's immediate containing directory is
          named *.lproj (e.g. en.lproj, Base.lproj), it will be placed under a
          directory of that name in the final bundle. This allows for
          localizable UI.
</li>
</ul>


<h3 id="objc_library">objc_library</h3>


<p class="rule-signature">
objc_library(<a href="#objc_library.name">name</a>,
<a href="#objc_library.deps">deps</a>,
<a href="#objc_library.srcs">srcs</a>,
<a href="#objc_library.resources">resources</a>,
<a href="#objc_library.hdrs">hdrs</a>,
<a href="#objc_library.alwayslink">alwayslink</a>,
<a href="#objc_library.asset_catalogs">asset_catalogs</a>,
<a href="#objc_library.bundles">bundles</a>,
<a href="#objc_library.copts">copts</a>,
<a href="#objc_library.datamodels">datamodels</a>,
<a href="#objc_library.defines">defines</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#objc_library.includes">includes</a>,
<a href="#common.licenses">licenses</a>,
<a href="#objc_library.non_arc_srcs">non_arc_srcs</a>,
<a href="#objc_library.non_propagated_deps">non_propagated_deps</a>,
<a href="#objc_library.pch">pch</a>,
<a href="#objc_library.sdk_dylibs">sdk_dylibs</a>,
<a href="#objc_library.sdk_frameworks">sdk_frameworks</a>,
<a href="#objc_library.sdk_includes">sdk_includes</a>,
<a href="#objc_library.storyboards">storyboards</a>,
<a href="#objc_library.strings">strings</a>,
<a href="#objc_library.structured_resources">structured_resources</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>,
<a href="#objc_library.weak_sdk_frameworks">weak_sdk_frameworks</a>,
<a href="#objc_library.xibs">xibs</a>)
</p>


<p>This rule produces a static library from the given Objective-C source files.</p>

<h4 id="objc_library_implicit_outputs">Implicit output targets</h4>
        <ul>
         <li><code><var>name</var>.xcodeproj/project.pbxproj</code>: An Xcode project file which
             can be used to develop or build on a Mac.</li>
        </ul>


<h4 id="objc_library_args">Arguments</h4>
<ul>
<li id="objc_library.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="objc_library.deps"><code>deps</code>:
          The list of targets that are linked together to form the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_library.srcs"><code>srcs</code>:
          The list of C, C++, Objective-C, and Objective-C++ files that are
          processed to create the library target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          These are your checked-in source files, plus any generated files.
          These are compiled into .o files with Clang, so headers should not go
          here (see the hdrs attribute).
</li>
<li id="objc_library.resources"><code>resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. These files are placed
          in the root of the bundle (e.g. Payload/foo.app/...) in most cases.
          However, if they appear to be localized (i.e. are contained in a
          directory called *.lproj), they will be placed in a directory of the
          same name in the app bundle.
</li>
<li id="objc_library.hdrs"><code>hdrs</code>:
          The list of Objective-C files that are included as headers by source
          files in this rule or by users of this library.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_library.alwayslink"><code>alwayslink</code>:
          If 1, any bundle or binary that depends (directly or indirectly) on this
          library will link in all the object files for the files listed in
          <code>srcs</code> and <code>non_arc_srcs</code>, even if some contain no
          symbols referenced by the binary.
          <i>(Boolean; optional; default is 0)</i><br/>

          This is useful if your code isn't explicitly called by code in
          the binary, e.g., if your code registers to receive some callback
          provided by some service.
</li>
<li id="objc_library.asset_catalogs"><code>asset_catalogs</code>:
          Files that comprise the asset catalogs of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcassets. This
          containing directory becomes the root of one of the asset catalogs
          linked with any binary that depends directly or indirectly on this
          target.
</li>
<li id="objc_library.bundles"><code>bundles</code>:
          The list of bundle targets that this target requires to be included
          in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_library.copts"><code>copts</code>:
          Extra flags to pass to the compiler.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          These flags will only apply to this target, and not those upon which
          it depends, or those which depend on it.
</li>
<li id="objc_library.datamodels"><code>datamodels</code>:
          Files that comprise the data models of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcdatamodel, which
          is usually contained by another *.xcdatamodeld (note the added d)
          directory.
</li>
<li id="objc_library.defines"><code>defines</code>:
          Extra <code>-D</code> flags to pass to the compiler. They should be in
          the form <code>KEY=VALUE</code> or simply <code>KEY</code> and are
          passed not only the compiler for this target (as <code>copts</code>
          are) but also to all <code>objc_</code> dependers of this target.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
</li>
<li id="objc_library.includes"><code>includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets.
          <i>(List of strings; optional)</i><br/>


          This is to support third party and open-sourced libraries that do not
          specify the entire workspace path in their
          <code>#import/#include</code> statements.
          <p>
          The paths are interpreted relative to the package directory, and the
          genfiles and bin roots (e.g. <code>bazel-genfiles/pkg/includedir</code>
          and <code>bazel-out/pkg/includedir</code>) are included in addition to the
          actual client root.
</li>
<li id="objc_library.non_arc_srcs"><code>non_arc_srcs</code>:
          The list of Objective-C files that are processed to create the
          library target that DO NOT use ARC.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          The files in this attribute are treated very similar to those in the
          srcs attribute, but are compiled without ARC enabled.
</li>
<li id="objc_library.non_propagated_deps"><code>non_propagated_deps</code>:
          The list of targets that are required in order to build this target,
          but which are not included in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          This attribute should only rarely be used, and probably only for proto
          dependencies.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_library.pch"><code>pch</code>:
          Header file to prepend to every source file being compiled (both arc
          and non-arc).
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

          Note that the file will not be precompiled - this is simply a
          convenience, not a build-speed enhancement.
</li>
<li id="objc_library.sdk_dylibs"><code>sdk_dylibs</code>:
          Names of SDK .dylib libraries to link with. For instance, "libz" or
          "libarchive".
           <i>(List of strings; optional)</i><br/>


          "libc++" is included automatically if the binary has any C++ or
          Objective-C++ sources in its dependency tree. When linking a binary,
          all libraries named in that binary's transitive dependency graph are
          used.
</li>
<li id="objc_library.sdk_frameworks"><code>sdk_frameworks</code>:
          Names of SDK frameworks to link with.
          <i>(List of strings; optional)</i><br/>

          For instance, "XCTest" or "Cocoa". "UIKit" and "Foundation" are always
          included and do not mean anything if you include them.

          <p>When linking a library, only those frameworks named in that library's
          sdk_frameworks attribute are linked in. When linking a binary, all
          SDK frameworks named in that binary's transitive dependency graph are
          used.
</li>
<li id="objc_library.sdk_includes"><code>sdk_includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets, where each path is relative to
          <code>$(SDKROOT)/usr/include</code>.
          <i>(List of strings; optional)</i><br/>

</li>
<li id="objc_library.storyboards"><code>storyboards</code>:
          Files which are .storyboard resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .storyboardc directories, which are
          placed in the bundle root of the final package. If the storyboards's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable UI.
</li>
<li id="objc_library.strings"><code>strings</code>:
          Files which are plists of strings, often localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are converted to binary plists (if they are not already)
          and placed in the bundle root of the final package. If this file's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable strings.
</li>
<li id="objc_library.structured_resources"><code>structured_resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. In differences to
          <code>resources</code> these files are placed in the bundle root in
          the same structure passed to this argument, so
          <code>["res/foo.png"]</code> will end up in
          <code>Payload/foo.app/res/foo.png</code>.
</li>
<li id="objc_library.weak_sdk_frameworks"><code>weak_sdk_frameworks</code>:
          Names of SDK frameworks to weakly link with. For instance,
          "MediaAccessibility".
          <i>(List of strings; optional)</i><br/>


          In difference to regularly linked SDK frameworks, symbols
          from weakly linked frameworks do not cause an error if they
          are not present at runtime.
</li>
<li id="objc_library.xibs"><code>xibs</code>:
          Files which are .xib resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .nib files and placed the bundle root of
          the final package. If this file's immediate containing directory is
          named *.lproj (e.g. en.lproj, Base.lproj), it will be placed under a
          directory of that name in the final bundle. This allows for
          localizable UI.
</li>
</ul>


<h3 id="objc_proto_library">objc_proto_library</h3>


<p class="rule-signature">
objc_proto_library(<a href="#objc_proto_library.name">name</a>,
<a href="#objc_proto_library.deps">deps</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#objc_proto_library.options_file">options_file</a>,
<a href="#objc_proto_library.output_cpp">output_cpp</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>This rule produces a static library from the given proto_library dependencies, after applying an
options file.</p>

<h4 id="objc_proto_library_args">Arguments</h4>
<ul>
<li id="objc_proto_library.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="objc_proto_library.deps"><code>deps</code>:
        The directly depended upon proto_library rules.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="objc_proto_library.options_file"><code>options_file</code>:
        Optional options file to apply to protos which affects compilation (e.g. class
        whitelist/blacklist settings).
        <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

</li>
<li id="objc_proto_library.output_cpp"><code>output_cpp</code>:
        If true, output C++ rather than ObjC.
        <i>(Boolean; optional; default is 0)</i><br/>

</li>
</ul>


<h3 id="sh_library">sh_library</h3>


<p class="rule-signature">
sh_library(<a href="#sh_library.name">name</a>,
<a href="#sh_library.deps">deps</a>,
<a href="#sh_library.srcs">srcs</a>,
<a href="#common.data">data</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
  The main use for this rule is to aggregate together a logical
  "library" consisting of related scripts&mdash;programs in an
  interpreted language that does not require compilation or linking,
  such as the Bourne shell&mdash;and any data those programs need at
  run-time. Such "libraries" can then be used from
  the <code>data</code> attribute of one or
  more <code>sh_binary</code> rules.
</p>

<p>
  You can use the <a href="#filegroup"><code>filegroup</code></a> rule to aggregate data files.
</p>

<p>
  In interpreted programming languages, there's not always a clear
  distinction between "code" and "data": after all, the program is
  just "data" from the interpreter's point of view. For this reason
  this rule has three attributes which are all essentially equivalent:
  <code>srcs</code>, <code>deps</code> and <code>data</code>.
  The current implementation does not distinguish between the elements of these lists.
  All three attributes accept rules, source files and generated files.
  It is however good practice to use the attributes for their usual purpose (as with other rules).
</p>

<h4 id="sh_library_args">Arguments</h4>
<ul>
<li id="sh_library.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="sh_library.deps"><code>deps</code>:
          The list of "library" targets to be aggregated into this target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          See general comments about <code>deps</code>
          at <a href="#common-attributes.deps">Attributes common to all build rules</a>.
          <p>
            This attribute should be used to list other <code>sh_library</code> rules that provide
            interpreted program source code depended on by the code in <code>srcs</code>. The files
            provided by these rules will be present among the <code>runfiles</code> of this target.
          </p>
</li>
<li id="sh_library.srcs"><code>srcs</code>:
        The list of input files.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        <p>
          This attribute should be used to list shell script source files that belong to
          this library. Scripts can load other scripts using the shell's <code>source</code>
          or <code>.</code> command.
        </p>
</li>
</ul>


<h4 id="sh_library_examples">Examples</h4>

<pre class="code">
sh_library(
    name = "foo",
    data = [
        ":foo_service_script",  # an sh_binary with srcs
        ":deploy_foo",  # another sh_binary with srcs
    ],
)
</pre>



<!-- ============================================
                      test
     ============================================
-->
<h2 id="test">*_test</h2>

<p>A <code>*_test</code> rule compiles a test.


<h3 id="cc_test">cc_test</h3>


<p class="rule-signature">
cc_test(<a href="#cc_test.name">name</a>,
<a href="#cc_test.deps">deps</a>,
<a href="#cc_test.srcs">srcs</a>,
<a href="#common.data">data</a>,
<a href="#cc_test.abi">abi</a>,
<a href="#cc_test.abi_deps">abi_deps</a>,
<a href="#test.args">args</a>,
<a href="#cc_test.copts">copts</a>,
<a href="#cc_test.defines">defines</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#test.flaky">flaky</a>,
<a href="#cc_test.hdrs_check">hdrs_check</a>,
<a href="#cc_test.includes">includes</a>,
<a href="#common.licenses">licenses</a>,
<a href="#cc_test.linkopts">linkopts</a>,
<a href="#cc_test.linkstatic">linkstatic</a>,
<a href="#cc_test.malloc">malloc</a>,
<a href="#cc_test.nocopts">nocopts</a>,
<a href="#test.size">size</a>,
<a href="#cc_test.stamp">stamp</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#test.timeout">timeout</a>,
<a href="#common.visibility">visibility</a>)
</p>


<h4 id="cc_test_args">Arguments</h4>
<ul>
<li id="cc_test.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="cc_test.deps"><code>deps</code>:
          The list of other libraries to be linked in to the binary target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          <p>These are always <code>cc_library</code> rules.</p>
</li>
<li id="cc_test.srcs"><code>srcs</code>:
          The list of C and C++ files that are processed to create the target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          These are C/C++ source and header files, either non-generated (normal source
          code) or generated.
          <p>All <code>.cc</code>, <code>.c</code>, and <code>.cpp</code> files will
             be compiled. These might be generated files: if a named file is in
             the <code>outs</code> of some other rule, this rule
             will automatically depend on that other rule.
          </p>
          <p>A <code>.h</code> file will not be compiled, but will be available for
             inclusion by sources in this rule. Both <code>.cc</code> and
             <code>.h</code> files can directly include headers listed in
             these <code>srcs</code> or in the <code>hdrs</code> of any rule listed in
             the <code>deps</code> argument. For compatibility with older
             implementations, and depending on the checking strictness specified by
             each library, additional headers may be available for inclusion. See
             <a href="#cc_library.hdrs_check"><code>cc_library.hdrs_check</code></a>.
          </p>
          <p>All <code>#include</code>d files must be mentioned in the
             <code>srcs</code> attribute of this rule, or in the
             <code>hdrs</code> attribute of referenced <code>cc_library()</code>s.
             The recommended style is for headers associated with a library to be
             listed in that library's <code>hdrs</code> attribute, and any remaining
             headers associated with this rule's sources to be listed in
             <code>srcs</code>. See <a href="#hdrs">"Header inclusion checking"</a>
             for a more detailed description.
          </p>
          <p>If a rule's name is in the <code>srcs</code>,
             then this rule automatically depends on that one.
             If the named rule's <code>outs</code> are C or C++
             source files, they are compiled into this rule;
             if they are library files, they are linked in.
          </p>
          <p>
            Permitted <code>srcs</code> file types:
          </p>
          <ul>
            <li>C and C++ source files: <code>.c</code>, <code>.cc</code>, <code>.cpp</code>,
              <code>.cxx</code>, <code>.C</code></li>
            <li>C and C++ header files: <code>.h</code>, <code>.hh</code>, <code>.hpp</code>,
              <code>.hxx</code>, <code>.inc</code></li>
            <li>Assembler with C preprocessor: <code>.S</code></li>
            <li>Archive: <code>.a</code>, <code>.pic.a</code></li>
            <li>"Always link" library: <code>.lo</code>, <code>.pic.lo</code></li>
            <li>Shared library, versioned or unversioned: <code>.so</code>,
              <code>.so.<i>version</i></code></li>
            <li>Object file: <code>.o</code>, <code>.pic.o</code></li>
          </ul>
          <p>
            ...and any rules that produce those files.
            Different extensions denote different programming languages in
            accordance with gcc convention.
          </p>
</li>
<li id="cc_test.abi" class="deprecated"><code>abi</code>:
           Platform-specific information string which is used in combination
            with <code>abi_deps</code>.
            <i>(String; optional; default is "$(ABI)")</i><br/>

            Subject to <a href="#make_variables">"Make" variable</a> substitution.
            <p>
              This string typically includes references to one or more "Make" variables of the form
              <code>"$(VAR)"</code>. The default value is <code>"$(ABI)"</code>.
            </p>
            <p>
              With <code>abi_deps</code>, the regular expression <code>patterns</code> will be
              matched against this string.
            </p>
</li>
<li id="cc_test.abi_deps" class="deprecated"><code>abi_deps</code>:
          The list of architecture-specific dependencies that are processed to create the target.
          <i>(Dictionary mapping strings to lists of
             <a href="build-ref.html#labels">labels</a>; optional)</i>
          <p><i><a href="#configurable-attributes">Configurable attributes</a> is a generalization
            of the same concept that works for most rules and attributes. It mostly deprecates
            <code>abi_deps</code>, which we expect to remove it as soon as possible. Use
            configurable attributes over <code>abi_deps</code> whenever possible. If the former is
            insufficient for you, please let us know why.</i>
          </p>
          <p>Each entry in this dictionary follows the form of
             <code>'pattern' : ['label1', 'label2', ...]</code>.  If the library's
             <code>abi</code> attribute is an unanchored match for the regular
             expression defined in <code>pattern</code>, the corresponding
             labels are used as dependencies as if they had appeared in the
             <code>deps</code> list.
          </p>
          <p>All pairs with a matching <code>pattern</code> will have their labels
             used.  If no matches are found, no dependencies will be used.  The
             ordering is irrelevant.
          </p>
          <p>If you want a <code>pattern</code> to not match a particular
             <code>abi</code>, for example adding a dep on all non-k8 platforms, you
             can use a negative lookahead pattern.  This would look like
             <code>(?!k8).*</code>.
          </p>
          <p>If using <code>abi_deps</code>, do not provide <code>deps</code>.
             Instead, use an entry with a <code>pattern</code> of <code>'.*'</code>
             because that matches everything.  This is also how to share
             dependencies across multiple different <code>abi</code> values.
          </p>
          <p>Typically, this mechanism is used to specify the appropriate set of
             paths to pre-compiled libraries for the target architecture of the
             current build.  Such paths are parameterized over "Make" variables
             such as <code>$(ABI)</code>, <code>$(TARGET_CPU)</code>,
             <code>$(C_COMPILER)</code>, etc, but since "Make" variables are not
             allowed in <a href="build-ref.html#labels">labels</a>, the
             architecture-specific files cannot be specified via the normal
             <code>srcs</code> attribute. Instead, this mechanism can be used
             to declare architecture-specific dependent rules for the current
             target that can specify the correct libraries in their own
             <code>srcs</code>.
          </p>
          <p>This mechanism is also used to specify the appropriate set of
             dependencies when some targets can't compile for the target architecture
             of the current build.  In most cases, uses an <code>#ifdef</code>.
             Only use <code>abi_deps</code> for more significant dependency changes.
          </p>
</li>
<li id="cc_test.copts"><code>copts</code>:
          Add these options to the C++ compilation command.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          <p>Each string in this attribute is added in the given order to <code>COPTS</code>
          before compiling the binary target.
          The flags take effect only for compiling this target, not its dependencies,
          so be careful about header files included elsewhere.</p>
</li>
<li id="cc_test.defines"><code>defines</code>:
          List of defines to add to the compile line.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make" variable</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          Each string, which must consist of a single Bourne shell token,
          is prepended with <code>-D</code> and added to
          <code>COPTS</code>.
          Unlike <a href="#cc_binary.copts"><code>copts</code></a>, these flags are added for the
          target and every rule that depends on it!  Be very careful, since this may have
          far-reaching effects.  When in doubt, add "-D" flags to
          <a href="#cc_binary.copts"><code>copts</code></a> instead.
</li>
<li id="cc_test.hdrs_check" class="deprecated"><code>hdrs_check</code>:
          Deprecated: we will roll out support for C++ modules, which are strict by design.
          <a id="cc_library.hdrs_check"></a>
          The strictness of the header file check to be applied to dependents and the
          source files of this library. Must be one of: <code>"loose"</code>,
          <code>"warn"</code> or <code>"strict"</code>.
          <i>(String; optional; default is "strict")</i><br/>

          <p>
             The three levels of checking operate as follows:
          </p>
          <ul>
             <li><code>"loose"</code>: Any source header file in any of the
             directories of the containing package may be <code>#include</code>d by
             sources in this rule and dependent rules. Generated header files must be
             explicitly listed in <code>hdrs</code> or <code>srcs</code>. This
             check level is the current default, but it will be phased out.</li>
             <li><code>"warn"</code>: Enforcement is the same as for
             <code>"loose"</code>, but any case that would violate the
             <code>"strict"</code> check will cause a warning to be emitted.
             This check level is provided to help with the migration to strict.</li>
             <li><code>"strict"</code>: All <code>#include</code>d files must be explicitly declared
             somewhere in the <code>hdrs</code> or <code>srcs</code> of the rules providing the
             libraries or the rules containing the including source. Note that this means that a
             rule can include any header that is in the <code>hdrs</code> or <code>srcs</code> of
             any rule it transitively depends on. A stricter layering check is currently being
             rolled out.</li>
          </ul>
          <p>If a rule does not specify the hdrs_check attribute, the
          <code><a href="#package.default_hdrs_check">default_hdrs_check</a></code>
          attribute of the <code><a href="#package">package</a></code> statement
          in the BUILD file containing the rule is used.</p>
</li>
<li id="cc_test.includes"><code>includes</code>:
          List of include dirs to be added to the compile line.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution.
          Each string is prepended with <code>-I</code> and added to <code>COPTS</code>. Unlike
          <a href="#cc_binary.copts">COPTS</a>, these flags are added for this rule
          and every rule that depends on it. (Note: not the rules it depends upon!) Be
          very careful, since this may have far-reaching effects.  When in doubt, add
          "-I" flags to <a href="#cc_binary.copts">COPTS</a> instead.
</li>
<li id="cc_test.linkopts"><code>linkopts</code>:
          Add these flags to the C++ linker command.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make" variable</a> substitution,
          <a href="#sh-tokenization">Bourne shell tokenization</a>
          and <a href="#label-expansion">label expansion</a>.
          Each string in this attribute is added to <code>LINKOPTS</code> before
          linking the binary target.
          <p>
            Each element of this list that does not start with <code>$</code> or <code>-</code> is
            assumed to be the label of a target in <code>deps</code>.  The
            list of files generated by that target is appended to the linker
            options.  An error is reported if the label is invalid, or is
            not declared in <code>deps</code>.
          </p>
</li>
<li id="cc_test.linkstatic"><code>linkstatic</code>:
           Link the binary in mostly-static mode.
           <i>(Boolean; optional; default is 0)</i><br/>

           By default this option is on for <code>cc_binary</code> and off for <code>cc_test</code>.
           <p>
             If enabled, this tells the build tool to link in <code>.a</code>'s instead of
             <code>.so</code>'s for user libraries whenever possible. Some system libraries may
             still be linked dynamically, as are libraries for which there's no static library. So
             the resulting binary will be dynamically linked, hence only <i>mostly</i> static.
           </p>
           <p>There are really three different ways to link an executable:</p>
           <ul>
           <li> FULLY STATIC, in which everything is linked statically; e.g. "<code>gcc -static
             foo.o libbar.a libbaz.a -lm</code>".<br/>This mode is enabled by specifying
             <code>-static</code> in the <a href="#cc_binary.linkopts"><code>linkopts</code></a>
             attribute.</li>
           <li> MOSTLY STATIC, in which all user libraries are linked statically (if a static
             version is available), but where system libraries are linked dynamically, e.g.
             "<code>gcc foo.o libfoo.a libbaz.a -lm</code>".<br/>This mode is enabled by specifying
             <code>linkstatic=1</code>.</li>
           <li> DYNAMIC, in which all libraries are linked dynamically (if a dynamic version is
             available), e.g. "<code>gcc foo.o libfoo.so libbaz.so -lm</code>".<br/> This mode is
             enabled by specifying <code>linkstatic=0</code>.</li>
           </ul>
           <p>
           The <code>linkstatic</code> attribute has a different meaning if used on a
           <a href="#cc_library"><code>cc_library()</code></a> rule.
           For a C++ library, <code>linkstatic=1</code> indicates that only
           static linking is allowed, so no <code>.so</code> will be produced.
           </p>
           <p>
           If <code>linkstatic=0</code>, then the build tool will create symlinks to
           depended-upon shared libraries in the <code>*.runfiles</code> area.
           </p>
</li>
<li id="cc_test.malloc"><code>malloc</code>:
          Override the default dependency on malloc.
          <i>(<a href="build-ref.html#labels">Label</a>; optional; default is <code>//tools/cpp:malloc</code>)</i><br/>

          <p>
            By default, Linux C++ binaries are linked against <code>//tools/cpp:malloc</code>,
            which is an empty library so the binary ends up using libc malloc. This label must
            refer to a <code>cc_library</code>. If compilation is for a non-C++ rule, this option
            has no effect. The value of this attribute is ignored if <code>linkshared=1</code> is
            specified.
          </p>
</li>
<li id="cc_test.nocopts"><code>nocopts</code>:
          Remove matching options from the C++ compilation command.
          <i>(String; optional)</i><br/>

          Subject to <a href="#make_variables">"Make" variable</a> substitution.
          The value of this attribute is interpreted as a regular expression.
          Any preexisting <code>COPTS</code> that match this regular expression
          (not including values explicitly specified in the rule's <a
          href="#cc_binary.copts">copts</a> attribute) will be removed from
          <code>COPTS</code> for purposes of compiling this rule.
          This attribute should rarely be needed.
</li>
<li id="cc_test.stamp"><code>stamp</code>:
          Enable link stamping.
          <i>(Integer; optional; default is 0)</i><br/>

          Whether to encode build information into the binary. Possible values:
          <ul>
            <li><code>stamp = 1</code>: Stamp the build information into the
              binary. Stamped binaries are only rebuilt when their dependencies
              change. Use this if there are tests that depend on the build
              information.</li>
            <li><code>stamp = 0</code>: Always replace build information by constant
              values. This gives good build result caching.</li>
            <li><code>stamp = -1</code>: Embedding of build information is controlled
              by the <a href="bazel-user-manual.html#flag--stamp">--[no]stamp</a> flag.</li>
          </ul>
</li>
</ul>


<h3 id="ios_test">ios_test</h3>


<p class="rule-signature">
ios_test(<a href="#ios_test.name">name</a>,
<a href="#ios_test.deps">deps</a>,
<a href="#ios_test.srcs">srcs</a>,
<a href="#ios_test.resources">resources</a>,
<a href="#ios_test.hdrs">hdrs</a>,
<a href="#ios_test.app_icon">app_icon</a>,
<a href="#test.args">args</a>,
<a href="#ios_test.asset_catalogs">asset_catalogs</a>,
<a href="#ios_test.bundle_id">bundle_id</a>,
<a href="#ios_test.bundles">bundles</a>,
<a href="#ios_test.copts">copts</a>,
<a href="#ios_test.datamodels">datamodels</a>,
<a href="#ios_test.defines">defines</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#ios_test.entitlements">entitlements</a>,
<a href="#ios_test.families">families</a>,
<a href="#test.flaky">flaky</a>,
<a href="#ios_test.includes">includes</a>,
<a href="#ios_test.infoplist">infoplist</a>,
<a href="#ios_test.launch_image">launch_image</a>,
<a href="#common.licenses">licenses</a>,
<a href="#ios_test.non_arc_srcs">non_arc_srcs</a>,
<a href="#ios_test.non_propagated_deps">non_propagated_deps</a>,
<a href="#ios_test.pch">pch</a>,
<a href="#ios_test.provisioning_profile">provisioning_profile</a>,
<a href="#ios_test.sdk_dylibs">sdk_dylibs</a>,
<a href="#ios_test.sdk_frameworks">sdk_frameworks</a>,
<a href="#ios_test.sdk_includes">sdk_includes</a>,
<a href="#test.size">size</a>,
<a href="#ios_test.storyboards">storyboards</a>,
<a href="#ios_test.strings">strings</a>,
<a href="#ios_test.structured_resources">structured_resources</a>,
<a href="#common.tags">tags</a>,
<a href="#ios_test.target_device">target_device</a>,
<a href="#common.testonly">testonly</a>,
<a href="#test.timeout">timeout</a>,
<a href="#common.visibility">visibility</a>,
<a href="#ios_test.weak_sdk_frameworks">weak_sdk_frameworks</a>,
<a href="#ios_test.xctest">xctest</a>,
<a href="#ios_test.xctest_app">xctest_app</a>,
<a href="#ios_test.xibs">xibs</a>)
</p>


<p>This rule provides a way to build iOS unit tests written in KIF, GTM and XCTest test frameworks
on both iOS simulator and real devices.
</p>

<h4 id="ios_test_args">Arguments</h4>
<ul>
<li id="ios_test.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="ios_test.deps"><code>deps</code>:
          The list of targets that are linked together to form the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="ios_test.srcs"><code>srcs</code>:
          The list of C, C++, Objective-C, and Objective-C++ files that are
          processed to create the library target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          These are your checked-in source files, plus any generated files.
          These are compiled into .o files with Clang, so headers should not go
          here (see the hdrs attribute).
</li>
<li id="ios_test.resources"><code>resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. These files are placed
          in the root of the bundle (e.g. Payload/foo.app/...) in most cases.
          However, if they appear to be localized (i.e. are contained in a
          directory called *.lproj), they will be placed in a directory of the
          same name in the app bundle.
</li>
<li id="ios_test.hdrs"><code>hdrs</code>:
          The list of Objective-C files that are included as headers by source
          files in this rule or by users of this library.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="ios_test.app_icon"><code>app_icon</code>:
          The name of the application icon.
          <i>(String; optional)</i><br/>


          The icon should be in one of the asset catalogs of this target or
          a (transitive) dependency. In a new project, this is initialized
          to "AppIcon" by Xcode.
          <p>
          If the application icon is not in an asset catalog, do not use this
          attribute. Instead, add a CFBundleIcons entry to the Info.plist file.
</li>
<li id="ios_test.asset_catalogs"><code>asset_catalogs</code>:
          Files that comprise the asset catalogs of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcassets. This
          containing directory becomes the root of one of the asset catalogs
          linked with any binary that depends directly or indirectly on this
          target.
</li>
<li id="ios_test.bundle_id"><code>bundle_id</code>:
          The bundle ID (reverse-DNS path followed by app name) of the binary.
          <i>(String; optional)</i><br/>


          If none is specified, a junk value will be used.
</li>
<li id="ios_test.bundles"><code>bundles</code>:
          The list of bundle targets that this target requires to be included
          in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="ios_test.copts"><code>copts</code>:
          Extra flags to pass to the compiler.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          These flags will only apply to this target, and not those upon which
          it depends, or those which depend on it.
</li>
<li id="ios_test.datamodels"><code>datamodels</code>:
          Files that comprise the data models of the final linked binary.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          Each file must have a containing directory named *.xcdatamodel, which
          is usually contained by another *.xcdatamodeld (note the added d)
          directory.
</li>
<li id="ios_test.defines"><code>defines</code>:
          Extra <code>-D</code> flags to pass to the compiler. They should be in
          the form <code>KEY=VALUE</code> or simply <code>KEY</code> and are
          passed not only the compiler for this target (as <code>copts</code>
          are) but also to all <code>objc_</code> dependers of this target.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
</li>
<li id="ios_test.entitlements"><code>entitlements</code>:
          The entitlements file required for device builds of this application.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>


          See
          <a href="https://developer.apple.com/library/mac/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AboutEntitlements.html">the apple documentation</a>
          for more information. If absent, the default entitlements from the
          provisioning profile will be used.
          <p>
          The following variables are substituted as per
          <a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html">their definitions in Apple's documentation</a>:
          $(AppIdentifierPrefix) and $(CFBundleIdentifier).
</li>
<li id="ios_test.families"><code>families</code>:
          The device families to which this binary is targeted.
          <i>(List of strings; optional)</i><br/>


          This is known as the <code>TARGETED_DEVICE_FAMILY</code> build setting
          in Xcode project files. It is a list of one or more of the strings
          <code>"iphone"</code> and <code>"ipad"</code>.
</li>
<li id="ios_test.includes"><code>includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets.
          <i>(List of strings; optional)</i><br/>


          This is to support third party and open-sourced libraries that do not
          specify the entire workspace path in their
          <code>#import/#include</code> statements.
          <p>
          The paths are interpreted relative to the package directory, and the
          genfiles and bin roots (e.g. <code>bazel-genfiles/pkg/includedir</code>
          and <code>bazel-out/pkg/includedir</code>) are included in addition to the
          actual client root.
</li>
<li id="ios_test.infoplist"><code>infoplist</code>:
          The infoplist file. This corresponds to <i>appname</i>-Info.plist in Xcode projects.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

          Bazel will perform variable substitution on the plist file for the following values:
          <ul>
            <li><code>${EXECUTABLE_NAME}</code>: The name of the executable generated and included
               in the bundle by bazel, which can be used as the value for
               <code>CFBundleExecutable</code> within the plist.
            <li><code>${BUNDLE_NAME}</code>: This target's name and bundle suffix (.bundle or .app)
               in the form<code><var>name</var></code>.<code>suffix</code>.
            <li><code>${PRODUCT_NAME}</code>: This target's name.
         </ul>
</li>
<li id="ios_test.launch_image"><code>launch_image</code>:
          The name of the launch image.
          <i>(String; optional)</i><br/>


          The icon should be in one of the asset catalogs of this target or
          a (transitive) dependency. In a new project, this is initialized
          to "LaunchImage" by Xcode.
          <p>
          If the launch image is not in an asset catalog, do not use this
          attribute. Instead, add an appropriately-named image resource to the
          bundle.
</li>
<li id="ios_test.non_arc_srcs"><code>non_arc_srcs</code>:
          The list of Objective-C files that are processed to create the
          library target that DO NOT use ARC.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          The files in this attribute are treated very similar to those in the
          srcs attribute, but are compiled without ARC enabled.
</li>
<li id="ios_test.non_propagated_deps"><code>non_propagated_deps</code>:
          The list of targets that are required in order to build this target,
          but which are not included in the final bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          This attribute should only rarely be used, and probably only for proto
          dependencies.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
<li id="ios_test.pch"><code>pch</code>:
          Header file to prepend to every source file being compiled (both arc
          and non-arc).
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

          Note that the file will not be precompiled - this is simply a
          convenience, not a build-speed enhancement.
</li>
<li id="ios_test.provisioning_profile"><code>provisioning_profile</code>:
          The provisioning profile (.mobileprovision file) to use when bundling
          the application.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>


          This is only used for non-simulator builds.
</li>
<li id="ios_test.sdk_dylibs"><code>sdk_dylibs</code>:
          Names of SDK .dylib libraries to link with. For instance, "libz" or
          "libarchive".
           <i>(List of strings; optional)</i><br/>


          "libc++" is included automatically if the binary has any C++ or
          Objective-C++ sources in its dependency tree. When linking a binary,
          all libraries named in that binary's transitive dependency graph are
          used.
</li>
<li id="ios_test.sdk_frameworks"><code>sdk_frameworks</code>:
          Names of SDK frameworks to link with.
          <i>(List of strings; optional)</i><br/>

          For instance, "XCTest" or "Cocoa". "UIKit" and "Foundation" are always
          included and do not mean anything if you include them.

          <p>When linking a library, only those frameworks named in that library's
          sdk_frameworks attribute are linked in. When linking a binary, all
          SDK frameworks named in that binary's transitive dependency graph are
          used.
</li>
<li id="ios_test.sdk_includes"><code>sdk_includes</code>:
          List of <code>#include/#import</code> search paths to add to this target
          and all depending targets, where each path is relative to
          <code>$(SDKROOT)/usr/include</code>.
          <i>(List of strings; optional)</i><br/>

</li>
<li id="ios_test.storyboards"><code>storyboards</code>:
          Files which are .storyboard resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .storyboardc directories, which are
          placed in the bundle root of the final package. If the storyboards's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable UI.
</li>
<li id="ios_test.strings"><code>strings</code>:
          Files which are plists of strings, often localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are converted to binary plists (if they are not already)
          and placed in the bundle root of the final package. If this file's
          immediate containing directory is named *.lproj (e.g. en.lproj,
          Base.lproj), it will be placed under a directory of that name in the
          final bundle. This allows for localizable strings.
</li>
<li id="ios_test.structured_resources"><code>structured_resources</code>:
          Files to include in the final application bundle.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          They are not processed or compiled in any way besides the processing
          done by the rules that actually generate them. In differences to
          <code>resources</code> these files are placed in the bundle root in
          the same structure passed to this argument, so
          <code>["res/foo.png"]</code> will end up in
          <code>Payload/foo.app/res/foo.png</code>.
</li>
<li id="ios_test.target_device"><code>target_device</code>:
          The device against which to run the test.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

</li>
<li id="ios_test.weak_sdk_frameworks"><code>weak_sdk_frameworks</code>:
          Names of SDK frameworks to weakly link with. For instance,
          "MediaAccessibility".
          <i>(List of strings; optional)</i><br/>


          In difference to regularly linked SDK frameworks, symbols
          from weakly linked frameworks do not cause an error if they
          are not present at runtime.
</li>
<li id="ios_test.xctest"><code>xctest</code>:
          Whether this target contains tests using the XCTest testing framework.
          <i>(Boolean; optional; default is 0)</i><br/>

</li>
<li id="ios_test.xctest_app"><code>xctest_app</code>:
          A <code>objc_binary</code> target that contains the app bundle to test against in XCTest.
          This attribute is only valid if <code>xctest</code> is true.
          <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>

</li>
<li id="ios_test.xibs"><code>xibs</code>:
          Files which are .xib resources, possibly localizable.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>


          These files are compiled to .nib files and placed the bundle root of
          the final package. If this file's immediate containing directory is
          named *.lproj (e.g. en.lproj, Base.lproj), it will be placed under a
          directory of that name in the final bundle. This allows for
          localizable UI.
</li>
</ul>


<h3 id="java_test">java_test</h3>


<p class="rule-signature">
java_test(<a href="#java_test.name">name</a>,
<a href="#java_test.deps">deps</a>,
<a href="#java_test.srcs">srcs</a>,
<a href="#common.data">data</a>,
<a href="#java_test.resources">resources</a>,
<a href="#test.args">args</a>,
<a href="#java_test.classpath_resources">classpath_resources</a>,
<a href="#java_test.create_executable">create_executable</a>,
<a href="#java_test.deploy_manifest_lines">deploy_manifest_lines</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#test.flaky">flaky</a>,
<a href="#java_test.javacopts">javacopts</a>,
<a href="#java_test.jvm_flags">jvm_flags</a>,
<a href="#common.licenses">licenses</a>,
<a href="#java_test.main_class">main_class</a>,
<a href="#java_test.plugins">plugins</a>,
<a href="#java_test.runtime_deps">runtime_deps</a>,
<a href="#test.size">size</a>,
<a href="#java_test.stamp">stamp</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#test.timeout">timeout</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
A <code>java_test()</code> rule compiles a Java test. A test is a binary wrapper around your
test code. The test runner's main method is invoked instead of the main class being compiled.
</p>

<h4 id="java_test_implicit_outputs">Implicit output targets</h4>
    <ul>
      <li><code><var>name</var>.jar</code>: A Java archive.</li>
      <li><code><var>name</var>_deploy.jar</code>: A Java archive suitable for deployment. (Only
        built if explicitly requested.)</li>
    </ul>


<h4 id="java_test_args">Arguments</h4>
<ul>
<li id="java_test.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="java_test.deps"><code>deps</code>:
          The list of other libraries to be linked in to the target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          See general comments about <code>deps</code> at <a href="#common-attributes">Attributes
          common to all build rules</a>.
</li>
<li id="java_test.srcs"><code>srcs</code>:
          The list of source files that are processed to create the target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          This attribute is almost always required; see exceptions below.
          <p>
            Source files of type <code>.java</code> are compiled. In case of generated
            <code>.java</code> files it is generally advisable to put the generating rule's name
            here instead of the name of the file itself. This not only improves readability but
            makes the rule more resilient to future changes: if the generating rule generates
            different files in the future, you only need to fix one place: the <code>outs</code> of
            the generating rule. You should not list the generating rule in <code>deps</code>
            because it is a no-op.
          </p>
          <p>
            Source files of type <code>.srcjar</code> are unpacked and compiled. (This is useful if
            you need to generate a set of <code>.java</code> files with a genrule.)
          </p>
          <p>
            Source files of type <code>.jar</code> are linked in. <em class="harmful">This is
            discouraged, use <a href="#java_import"><code>java_import</code></a></em> if you need to
            link against existing (or generated) jar files (which is useful if you have a
            <code>.jar</code> file without sources).
          </p>
          <p>
            Rules: if the rule (typically <code>genrule</code> or <code>filegroup</code>) generates
            any of the files listed above, they will be used the same way as described for source
            files.
          </p>

          <p>
            This argument is almost always required, except if a
            <a href="#java_binary.main_class"><code>main_class</code></a> attribute specifies a
            class on the runtime classpath or you specify the <code>runtime_deps</code> argument.
          </p>
</li>
<li id="java_test.resources"><code>resources</code>:
          A list of data files to include in a Java jar.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          If resources are specified, they will be bundled in the jar along with the usual
          <code>.class</code> files produced by compilation. The location of the resources inside of
          the jar file is determined using a heuristic, but it's often in a directory corresponding
          to the build package name. Resources may be source files or generated files.
</li>
<li id="java_test.classpath_resources"><code>classpath_resources</code>:
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          <em class="harmful">DO NOT USE THIS OPTION UNLESS THERE IS NO OTHER WAY)</em>
          <p>
            A list of resources that must be located at the root of the java tree. This attribute's
            only purpose is to support third-party libraries that require that their resources be
            found on the classpath as exactly <code>"myconfig.xml"</code>. It is only allowed on
            binaries and not libraries, due to the danger of namespace conflicts.
          </p>
</li>
<li id="java_test.create_executable"><code>create_executable</code>:
          Whether to build the executable wrapper script or not.
          <i>(Boolean; optional; default is 1)</i><br/>

          If this option is present, no executable wrapper script is built around the
          <code>.jar</code> file. Incompatible with <code>main_class</code> attribute.
</li>
<li id="java_test.deploy_manifest_lines"><code>deploy_manifest_lines</code>:
          <i>(List of strings; optional)</i><br/>

          A list of lines to add to the <code>META-INF/manifest.mf</code> file generated for the
          <code>*_deploy.jar</code> target. The contents of this attribute are <em>not</em> subject
          to <a href="#make_variables">"Make variable"</a> substitution.
</li>
<li id="java_test.javacopts"><code>javacopts</code>:
          Extra compiler options for this library.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          <p>These compiler options are passed to javac after the global compiler options.</p>
</li>
<li id="java_test.jvm_flags"><code>jvm_flags</code>:
          A list of flags to embed in the wrapper script generated for running this binary.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          <p>
            The wrapper script for a Java binary includes a <code>CLASSPATH</code> definition (to
            find all the dependent jars) and invokes the right Java interpreter. The command line
            generated by the wrapper script includes the name of the main class followed by a
            <code>"$@"</code> so you can pass along other arguments after the classname.  However,
            arguments intended for parsing by the JVM must be specified <i>before</i> the classname
            on the command line. The contents of <code>jvm_flags</code> are added to the wrapper
            script before the classname is listed.
          </p>
</li>
<li id="java_test.main_class"><code>main_class</code>:
          Name of class with <code>main()</code> method to use as entry point.
          <i>(String; optional; default is "org.junit.runner.JUnitCore")</i><br/>

          If a rule uses this option, it does not need a <code>srcs=[...]</code> list.
          Thus, with this attribute one can make an executable from a Java library that already
          contains one or more <code>main()</code> methods.
          <p>
            The value of this attribute is a class name, not a source file. The class must be
            available at runtime: it may be compiled by this rule (from <code>srcs</code>) or
            provided by direct or transitive dependencies (through <code>runtime_deps</code> or
            <code>deps</code>). If the class is unavailable, the binary will fail at runtime; there
            is no build-time check.
          </p>
</li>
<li id="java_test.plugins"><code>plugins</code>:
          Java compiler plugins to run at compile-time.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          Every <code>java_plugin</code> specified in this attribute will be run whenever this rule
          is built. A library may also inherit plugins from dependencies that use
          <code><a href="#java_library.exported_plugins">exported_plugins</a></code>. Resources
          generated by the plugin will be included in the resulting jar of this rule.
</li>
<li id="java_test.runtime_deps"><code>runtime_deps</code>:
          Libraries to make available to the final binary or test at runtime only.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          Like ordinary <code>deps</code>, these will appear on the runtime classpath, but unlike
          them, not on the compile-time classpath. Dependencies needed only at runtime should be
          listed here. Dependency-analysis tools should ignore targets that appear in both
          <code>runtime_deps</code> and <code>deps</code>.
</li>
<li id="java_test.stamp"><code>stamp</code>:
          Enable link stamping.
          <i>(Integer; optional; default is 0)</i><br/>

          Whether to encode build information into the binary. Possible values:
          <ul>
            <li><code>stamp = 1</code>: Stamp the build information into the binary. Stamped
              binaries are only rebuilt when their dependencies change. Use this if there are tests
              that depend on the build information.</li>
            <li><code>stamp = 0</code>: Always replace build information by constant values. This
              gives good build result caching.</li>
            <li><code>stamp = -1</code>: Embedding of build information is controlled by the
              <a href="bazel-user-manual.html#flag--stamp">--[no]stamp</a> flag.</li>
          </ul>
</li>
</ul>


<p>
See the section on <a href="#java_binary_args">java_binary()</a> arguments, with the <i>caveat</i>
that there is no <code>main_class</code> argument. This rule also supports all
<a href="#common-attributes-tests">attributes common to all test rules (*_test)</a>.
</p>

<h4 id="java_test_examples">Examples</h4>

<pre class="code">
java_library(
    name = "tests",
    srcs = glob(["*.java"]),
    deps = [
        "//java/com/foo/base:testResources",
        "//java/com/foo/testing/util",
    ],
)

java_test(
    name = "AllTests",
    size = "small",
    runtime_deps = [
        ":tests",
        "//util/mysql",
    ],
)
</pre>

<h3 id="sh_test">sh_test</h3>


<p class="rule-signature">
sh_test(<a href="#sh_test.name">name</a>,
<a href="#sh_test.deps">deps</a>,
<a href="#sh_test.srcs">srcs</a>,
<a href="#common.data">data</a>,
<a href="#test.args">args</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#test.flaky">flaky</a>,
<a href="#common.licenses">licenses</a>,
<a href="#test.size">size</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#test.timeout">timeout</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>A <code>sh_test()</code> rule creates a test written as a Bourne shell script.</p>

<h4 id="sh_test_args">Arguments</h4>
<ul>
<li id="sh_test.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="sh_test.deps"><code>deps</code>:
          The list of "library" targets to be aggregated into this target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          See general comments about <code>deps</code>
          at <a href="#common-attributes.deps">Attributes common to all build rules</a>.
          <p>
            This attribute should be used to list other <code>sh_library</code> rules that provide
            interpreted program source code depended on by the code in <code>srcs</code>. The files
            provided by these rules will be present among the <code>runfiles</code> of this target.
          </p>
</li>
<li id="sh_test.srcs"><code>srcs</code>:
          The file containing the shell script.
          <i>(List of <a href="build-ref.html#labels">labels</a>; required)</i><br/>

          <p>
            This attribute must be a singleton list, whose element is the shell script.
            This script must be executable, and may be a source file or a generated file.
            All other files required at runtime (whether scripts or data) belong in the
            <code>data</code> attribute.
          </p>
</li>
</ul>


<p>See the <a href="#common-attributes-tests">attributes common to all test rules (*_test)</a>.</p>

<h4 id="sh_test_examples">Examples</h4>

<pre class="code">
sh_test(
    name = "foo_integration_test",
    size = "small",
    srcs = ["foo_integration_test.sh"],
    deps = [":foo_sh_lib"],
    data = glob(["testdata/*.txt"]),
)
</pre>



<!-- ============================================
                      variables
     ============================================
-->
<h2 id="make_variables">"Make" Variables</h2>


<p>
  This section describes how to use a special class of built-in string variables
  that are called the "Make" environment.

  Defining custom "Make" variables is not supported.
</p>

<p>(The reason for the term "Make" is historical: the syntax and semantics of
  these variables are somewhat similar to those of GNU Make.)
</p>

<p>To see the list of all common "Make" variables and their values,
  run <code>bazel info --show_make_env</code>.
</p>

<p>Build rules can introduce additional rule specific variables. One example is
  the <a href="#genrule.cmd"><code>cmd</code> attribute of a genrule</a>.
</p>

<h3 id='make-var-substitution'>"Make" variable substitution</h3>

<p>Variables can be referenced in attributes

  using <code>$(FOO)</code>
  where <code>FOO</code> is
  the variable name. In the attribute documentation of rules, it is mentioned
  when an attribute is subject to "Make" variable substitution. For those
  attributes this means that any substrings of the form <code>$(X)</code>
  within those attributes will be interpreted as references to the "Make"
  variable <var>X</var>, and will be replaced by the appropriate value of that
  variable for the applicable build configuration. The parens may be omitted
  for variables whose name is a single character.
</p>
<p>
  It is an error if such attributes contain embedded strings of the
  form <code>$(X)</code> where <var>X</var> is not the name of a
  "Make" variable, or unclosed references such as <code>$(</code> not
  matched by a corresponding <code>)</code>.
</p>
<p>
  Within such attributes, literal dollar signs must be escaped
  as <code>$$</code> to prevent this expansion.
</p>
<p>
  Those attributes that are subject to this substitution are
  explicitly indicated as such in their definitions in this document.
</p>

<h3 id="predefined_variables">Predefined "Make" Variables</h3>

<p>Bazel defines a set of "Make" variables for you.</p>

<p>The build system also provides a consistent PATH environment variable for
genrules and tests which need to execute shell commands. For genrules, you can
indirect your commands using the "Make" variables below.  For basic Unix
utilities, prefer relying on the PATH environment variable to guarantee correct
results. For genrules involving compiler and platform invocation, you must use
the "Make" variable syntax.  The same basic command set is also available during
tests. Simply rely on the PATH.</p>

<p><strong>Compiler and Platforms available to genrules</strong></p>
These tools may not be in the PATH, therefore you must use "Make" variable syntax
in your genrule's cmd attribute.
<ul>
  <li> <code>CC</code>: The C compiler command. It is strongly recommended to
    always use <code>CC_FLAGS</code> when invoking the C compiler.</li>
  <li> <code>JAVA</code>: The "java" command (a Java virtual machine). Note that
    this can be a relative path. If you must change directories before invoking
    <code>java</code>, you need to capture the working directory before changing
    it.</li>
  <li> <code>JAVAC</code>: The "javac" command (a Java compiler). Note that
    this can be a relative path. Also, this may not be the same compiler that is
    used to compile normal Java rules (this may change in the future).</li>

  <li> <code>STRIP</code>: The strip command from the same suite as the C
    compiler.</li>
  <li> <code>AR</code>: The "ar" command from crosstool. </li>
  <li> <code>NM</code>: The "nm" command from crosstool. </li>
  <li> <code>OBJCOPY</code>: The objcopy command from the same suite as the C
    compiler. </li>
  <li> <code>C_COMPILER</code>:
    The C compiler frontend, e.g. "gcc". </li>
</ul>

<p><strong>Tool option Variables</strong></p>

<ul><!--  keep alphabetically sorted  -->
  <li><code>BINMODE</code>: "-dbg" or "-opt"

    . (<i>When using Bazel's <code>-c fastbuild</code> option,
      this variable has the value <code>-dbg</code>.</i>) </li>
  <li><code>CC_FLAGS</code>: A minimal set of flags for the C compiler to be
    used by genrules. In particular, it contains flags to select the correct
    architecture if CC supports multiple architectures. </li>
  <li><code>COMPILATION_MODE</code>: "fastbuild", "dbg", or "opt".</li>

</ul>

<p><strong>Path Variables</strong></p>

<ul><!--  keep alphabetically sorted  -->
  <li><code>BINDIR</code>: The base of the generated binary tree for the target
    architecture.  (Note that a different tree may be used for
    programs that run during the build on the host architecture,
    to support cross-compiling.  If you want to run a tool from
    within a genrule, the recommended way of specifying the path to
    the tool is to use <code>$(location <i>toolname</i>)</code>,
    where <i>toolname</i> must be listed in the <code>tools</code>
    attribute for the genrule.</li>
  <li><code>GENDIR</code>: The base of the generated code
    tree for the target architecture.</li>
  <li><code>JAVABASE</code>:
    The base directory containing the Java utilities.
    It will have a "bin" subdirectory.</li>
</ul>

<p><strong>Architecture Variables</strong></p>

<ul><!--  keep alphabetically sorted  -->
  <li><code>ABI</code>:
    The C++ ABI version; currently "gcc-3.4". </li>

  <li> <code>TARGET_CPU</code>: The target architecture's cpu,
    e.g. "piii" or "k8". </li>
</ul>

<p id="predefined_variables.genrule.cmd">
  <strong>
    Other Variables available to <a href="#genrule.cmd">the cmd attribute of a genrule</a>
  </strong>
</p>
<ul><!--  keep alphabetically sorted  -->
  <li><code>OUTS</code>: The <code>outs</code> list. If you have only one output
    file, you can also use <code>$@</code>.</li>
  <li><code>SRCS</code>: The <code>srcs</code> list (or more
    precisely, the pathnames of the files corresponding to
    labels in the <code>srcs</code> list).  If you have only one
    source file, you can also use <code>$&lt;</code>.</li>
  <li><code>&lt;</code>: <code>srcs</code>, if it is a single file.</li>
  <li><code>@</code>: <code>outs</code>, if it is a single file.</li>
  <li><code>@D</code>: The output directory.  If there is only
    one filename in <code>outs</code>, this expands to the
    directory containing that file.  If there are multiple
    filenames, this variable instead expands to the package's root
    directory in the <code>genfiles</code> tree, <i>even if all
    the generated files belong to the same subdirectory</i>!
    <!-- (as a consequence of the "middleman" implementation) -->
    If the genrule needs to generate temporary intermediate files
    (perhaps as a result of using some other tool like a compiler)
    then it should attempt to write the temporary files to
    <code>@D</code> (although <code>/tmp</code> will also be
    writable), and to remove any such generated temporary files.
    Especially, avoid writing to directories containing inputs -
    they may be on read-only filesystems, and even if they aren't,
    doing so would trash the source tree.</li>
</ul>

<h2 id="location">"$(location)" substitution</h2>

<p>
  In attributes that support it, all occurrences of
  <code>$(location <i>label</i>)</code> are replaced by the path to the
  file denoted by <i>label</i>. Use <code>location</code> if the <i>label</i>
  outputs exactly one filename. This allows bazel to perform a check and give
  an error if no or more than one files are represented by the given label; a
  label referring to a source file always represents a single file, but a label
  referring to a rule refers to all output files of that rule. Otherwise use
  <code>$(location<b>s</b> <i>label</i>)</code>; bazel will then raise an error
  if no files are generated. In both cases, if the label is malformed then an
  error is raised.
</p>
<p>
  The <i>label</i> needs not be in canonical form:
  <code>foo</code>, <code>:foo</code> and <code>//somepkg:foo</code> are
  all fine. It may also be the name of an output file from the
  <code>outs</code> attribute.
</p>
<p>
  The expanded paths are relative to the runfiles directory of the
  <code>*_test</code> or <code>*_binary</code> rule.
</p>

<h2 id="predefined-python-variables">Predefined Python Variables</h2>

<h3 id="packagename">PACKAGE_NAME</h3>
<p>
  This is a string variable with the name
  of the package being evaluated. The value is unaffected by subinclude.
</p>

<!-- ============================================
                      other
     ============================================
-->
<h2 id="misc">Other Stuff</h2>

<h3 id="action_listener">action_listener</h3>


<p>
  <b>DISCLAIMER:</b>
  This is an experimental feature, expect breaking changes when
  implementing an <code>action_listener</code>/<code>extra_action</code>.
</p>

<p class="rule-signature">
action_listener(<a href="#action_listener.name">name</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#action_listener.extra_actions">extra_actions</a>,
<a href="#common.licenses">licenses</a>,
<a href="#action_listener.mnemonics">mnemonics</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
  An <code>action_listener</code> rule doesn't produce any output itself.
  Instead, it allows tool developers to insert
  <a href="#extra_action"><code>extra_action</code></a>s into the build system,
  by providing a mapping from action to <a href="#extra_action"><code>extra_action</code></a>.
</p>

<p>
  This rule's arguments map action mnemonics to
  <a href="#extra_action"><code>extra_action</code></a> rules.
</p>

<p>
  By specifying the option <a href="bazel-user-manual.html#flag--experimental_action_listener">
  <code>--experimental_action_listener=&lt;label&gt;</code></a>,
  the build will use the specified <code>action_listener</code> to insert
  <a href="#extra_action"><code>extra_action</code></a>s into the build graph.
</p>

<h4 id="action_listener_args">Arguments</h4>
<ul>
<li id="action_listener.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="action_listener.extra_actions"><code>extra_actions</code>:
        A list of <code><a href="#extra_action">extra_action</a></code> targets
        this <code>action_listener</code> should add to the build graph.
        <i>(List of <a href="build-ref.html#labels">labels</a>; required)</i><br/>

        E.g. <code>[ "//my/tools:analyzer" ]</code>.
</li>
<li id="action_listener.mnemonics"><code>mnemonics</code>:
        A list of action mnemonics this <code>action_listener</code> should listen
        for, e.g. <code>[ "Javac" ]</code>.
        <i>(List of strings; required)</i><br/>

        <p>
          Mnemonics are not a public interface.
          There's no guarantee that the mnemonics and their actions don't change.
        </p>
</li>
</ul>


<h4 id="action_listener_example">Example</h4>
<pre>
    action_listener(name = "index_all_languages",
                    mnemonics = [ "Javac", "CppCompile" ],
                    extra_actions = [ ":indexer" ])

    action_listener(name = "index_java",
                    mnemonics = [ "Javac" ],
                    extra_actions = [ ":indexer" ])

    extra_action(name = "indexer",
                 tools = [ "//my/tools:indexer" ],
                 cmd = "$(location //my/tools:indexer)" +
                       "--extra_action_file=$(EXTRA_ACTION_FILE)")
</pre>

<h3 id="filegroup">filegroup</h3>


<p class="rule-signature">
filegroup(<a href="#filegroup.name">name</a>,
<a href="#filegroup.srcs">srcs</a>,
<a href="#filegroup.data">data</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#binary.output_licenses">output_licenses</a>,
<a href="#filegroup.path">path</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
  Use <code>filegroup</code> to give a convenient name to a collection of targets.
  These can then be referenced from other rules.
</p>

<p>
  Using <code>filegroup</code> is encouraged instead of referencing directories directly.
  The latter is unsound since the build system does not have full knowledge of all files
  below the directory, so it may not rebuild when these files change. When combined with
  <a href="#glob">glob</a>, <code>filegroup</code> can ensure that all files are explicitly
  known to the build system.
</p>

<h4 id="filegroup_args">Arguments</h4>
<ul>
<li id="filegroup.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="filegroup.srcs"><code>srcs</code>:
        The list of targets that are members of the file group.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        <p>
          It is common to use the result of a <a href="#glob">glob</a> expression for the value
          of the <code>srcs</code> attribute. If a rule and a source file with the same name both
          exist in the package, the glob will return the outputs of the rule instead of the source
          file.
        </p>
</li>
<li id="filegroup.data"><code>data</code>:
        The list of files needed by this rule at runtime.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        <p>
          Targets named in the <code>data</code> attribute will be added to the
          <code>runfiles</code> of this <code>filegroup</code> rule. When the
          <code>filegroup</code> is referenced in the <code>data</code> attribute of
          another rule its <code>runfiles</code> will be added to the <code>runfiles</code>
          of the depending rule. See the <a href="build-ref.html#data">data dependencies</a>
          section and <a href="#common.data">general documentation of <code>data</code></a>
          for more information about how to depend on and use data files.
        </p>
</li>
<li id="filegroup.path"><code>path</code>:
        An optional string to set a path to the files in the group, relative to the package path.
        <i>(String; optional)</i><br/>

        <p>
          This attribute can be used internally by other rules depending on this
          <code>filegroup</code> to find the name of the directory holding the files.
        </p>
</li>
</ul>


<h4 id="filegroup_example">Examples</h4>

<p>
  To create a <code>filegroup</code> consisting of two source files, do
</p>
<pre class="code">
filegroup(
    name = "mygroup",
    srcs = [
        "a_file.txt",
        "some/subdirectory/another_file.txt",
    ],
)
</pre>
<p>
  Or, use a <code>glob</code> to grovel a testdata directory:
</p>
<pre class="code">
filegroup(
    name = "exported_testdata",
    srcs = glob([
        "testdata/*.dat",
        "testdata/logs/**&#47;*.log",
    ]),
)
</pre>
<p>
  To make use of these definitions, reference the <code>filegroup</code> with a label from any rule:
</p>
<pre class="code">
cc_library(
    name = "my_library",
    srcs = ["foo.cc"],
    data = [
        "//my_package:exported_testdata",
        "//my_package:mygroup",
    ],
)
</pre>

<h3 id="extra_action">extra_action</h3>


<p class="rule-signature">
extra_action(<a href="#extra_action.name">name</a>,
<a href="#common.data">data</a>,
<a href="#extra_action.cmd">cmd</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#extra_action.out_templates">out_templates</a>,
<a href="#extra_action.requires_action_output">requires_action_output</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#extra_action.tools">tools</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
  An <code>extra_action</code> rule doesn't produce any meaningful output
  when specified as a regular build target. Instead, it allows tool developers
  to insert additional actions into the build graph that shadow existing actions.
</p>

<p>
  See <a href="#action_listener"><code>action_listener</code></a> for details
  on how to enable <code>extra_action</code>s in Bazel.
</p>

<p>
  The <code>extra_action</code>s run as a command-line. The command-line tool gets
  access to a file containing a protocol buffer as $(EXTRA_ACTION_FILE)
  with detailed information on the original action it is shadowing.
  It also has access to all the input files the original action has access to.
</p>

<h4 id="extra_action_args">Arguments</h4>
<ul>
<li id="extra_action.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i>    You may refer to this rule by <code>label</code> in the <code>extra_actions</code> argument
    of <a href="#action_listener"><code> action_listener</code></a> rules.
</li>
<li id="extra_action.cmd"><code>cmd</code>:
         The command to run.
         <i>(String; required)</i><br/>

         <p>
           Like <a href="#genrule.cmd">genrule cmd attribute</a> with the following differences:
         </p>
         <ol>
           <li>
             <p>
               No heuristic label expansion. Only labels using $(location ...) are expanded.
             </p>
           </li>
           <li>
             <p>
               An additional pass is applied to the string to replace all
               occurrences of the outputs created from the <code>out_templates</code>
               attribute. All occurrences of <code>$(output <i>out_template</i>)</code>
               are replaced with the path to the file denoted by <code>label</code>.
             </p>
             <p>
               E.g. out_template <code>$(ACTION_ID).analysis</code>
               can be matched with <code>$(output $(ACTION_ID).analysis)</code>.
             </p>
             <p>
               In effect, this is the same substitution as <code>$(location)</code>
               but with a different scope.
             </p>
           </li>
         </ol>
</li>
<li id="extra_action.out_templates"><code>out_templates</code>:
         A list of templates for files generated by the <code>extra_action</code> command.
         <i>(List of strings; optional)</i><br/>

         <p>
           The template can use the following variables:
           <ul>
             <li>
               $(ACTION_ID), an id uniquely identifying this <code>extra_action</code>.
               Used to generate a unique output file.
             </li>
           </ul>
         </p>
</li>
<li id="extra_action.requires_action_output"><code>requires_action_output</code>:
         Indicates this <code>extra_action</code> requires the output of the
         original action to be present as input to this <code>extra_action</code>.
         <i>(Boolean; optional; default is 0)</i><br/>

         <p>
           When true (default false), the extra_action can assume that the
           original action outputs are available as part of its inputs.
         </p>
</li>
<li id="extra_action.tools"><code>tools</code>:
        A list of <code>tool</code> dependencies for this rule.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        <p>
          See the definition of <a href="build-ref.html#deps">dependencies</a> for more information.
        </p>
        <p>
          The build system ensures these prerequisites are built before running the
          <code>extra_action</code> command; they are built using the
          <a href='bazel-user-manual.html#configurations'><code>host</code>configuration</a>, since
          they must run as a tool during the build itself. The path of an individual
          <code>tools</code> target <code>//x:y</code> can be obtained using
          <code>$(location //x:y)</code>.
        </p>
        <p>
          All tools and their data dependencies are consolidated into a single tree
          within which the command can use relative paths. The working directory will
          be the root of that unified tree.
        </p>
</li>
</ul>


<h3 id="genquery">genquery</h3>


<p class="rule-signature">
genquery(<a href="#genquery.name">name</a>,
<a href="#common.deps">deps</a>,
<a href="#common.data">data</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#genquery.expression">expression</a>,
<a href="#common.licenses">licenses</a>,
<a href="#genquery.opts">opts</a>,
<a href="#genquery.scope">scope</a>,
<a href="#genquery.strict">strict</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


  <p>
  <code>genquery()</code> runs a query specified in the
    <a href="bazel-query-v2.html">Bazel query language</a> and dumps the result
    into a file.
  </p>
  <p>
    In order to keep the build consistent, the query is allowed only to visit
    the transitive closure of the targets specified in the <code>scope</code>
    attribute. Queries violating this rule will fail during execution if
    <code>strict</code> is unspecified or true (if <code>strict</code> is false,
    the out of scope targets will simply be skipped with a warning). The
    easiest way to make sure this does not happen is to mention the same labels
    in the scope as in the query expression. The only difference between the
    queries allowed here and on the command line is that queries containing
    wildcard target specifications (e.g. <code>//pkg:*</code> or
    <code>//pkg:all</code>) are not allowed here.
  </p>
  <p>
    The name of the output file is the name of the rule.
  </p>

<h4 id="genquery_args">Arguments</h4>
<ul>
<li id="genquery.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="genquery.expression"><code>expression</code>:
        The query to be executed.
        <i>(String; required)</i><br/>

</li>
<li id="genquery.opts"><code>opts</code>:
        The options that are passed to the query engine.
        These correspond to the command line options that can be passed to
        <code>bazel query</code>. The only query option that is not allowed here
        is <code>--keep_going</code>.
        <i>(List of strings; optional)</i><br/>

</li>
<li id="genquery.scope"><code>scope</code>:
        The scope of the query. The query is not allowed to
        touch targets outside the transitive closure of these targets.
        <i>(List of <a href="build-ref.html#labels">labels</a>; required)</i><br/>

</li>
<li id="genquery.strict"><code>strict</code>:
        If true, targets whose queries escape the transitive closure of their
        scopes will fail to build. If false, Bazel will print a warning and skip
        whatever query path led it outside of the scope, while completing the rest
        of the query.
        <i>(Boolean; optional; default is 1)</i><br/>

</li>
</ul>


<h4 id="genquery_examples">Examples</h4>
  <p>
    This example writes the list of the labels in the transitive closure of the
    specified target to a file.
  </p>

<pre class="code">
genquery(
    name = "kiwi-deps",
    expression = "deps(//kiwi:kiwi_lib)",
    scope = ["//kiwi:kiwi_lib"],
)
</pre>

<h3 id="test_suite">test_suite</h3>


<p class="rule-signature">
test_suite(<a href="#test_suite.name">name</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#test_suite.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#test_suite.tests">tests</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
A <code>test_suite</code> defines a set of tests that are considered "useful" to humans.  This
allows projects to define sets of tests, such as "tests you must run before checkin", "our
project's stress tests" or "all small tests."
</p>

<h4 id="test_suite_args">Arguments</h4>
<ul>
<li id="test_suite.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="test_suite.tags"><code>tags</code>:
        List of text tags such as "small" or "database" or "-flaky". Tags may be any valid string.
        <i>(List of strings; optional)</i><br/>

        <p>
          Tags which begin with a "-" character are considered negative tags. The
          preceding "-" character is not considered part of the tag, so a suite tag
          of "-small" matches a test's "small" size. All other tags are considered
          positive tags.
        </p>
        <p>
          Optionally, to make positive tags more explicit, tags may also begin with the
          "+" character, which will not be evaluated as part of the text of the tag. It
          merely makes the positive and negative distinction easier to read.
        </p>
        <p>
          Only test rules that match <b>all</b> of the positive tags and <b>none</b> of the negative
          tags will be included in the test suite. Note that this does not mean that error checking
          for dependencies on tests that are filtered out is skipped; the dependencies on skipped
          tests still need to be legal (e.g. not blocked by visibility or obsoleteness constraints).
        </p>
        <p>
          The <code>manual</code> tag keyword is treated specially. It marks the
          <code>test_suite</code> target as "manual" so that it will be ignored by the wildcard
          expansion and automated testing facilities. It does not work as a filter on the set
          of tests in the suite. So when the <code>manual</code> tag is used on a test_suite, test
          rules do not have to be tagged as <code>manual</code> to be included in the test suite.
        </p>
        <p>
          Note that a test's <code>size</code> is treated as a tag for the purpose of filtering.
        </p>
        <p>
          If you need a <code>test_suite</code> that contains tests with mutually exclusive tags
          (e.g. all small and medium tests), you'll have to create three <code>test_suite</code>
          rules: one for all small tests, one for all medium tests, and one that includes the
          previous two.
        </p>
</li>
<li id="test_suite.tests"><code>tests</code>:
        A list of test suites and test targets of any language.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        <p>
          Any <code>*_test</code> is accepted here, independent of the language. No
          <code>*_binary</code> targets are accepted however, even if they happen to run a test.
          Filtering by the specified <code>tags</code> is only done for tests listed directly in
          this attribute. If this attribute contains <code>test_suite</code>s, the tests inside
          those will not be filtered by this <code>test_suite</code> (they are considered to be
          filtered already).
        </p>
        <p>
          If the <code>tests</code> attribute is unspecified or empty, the rule will default to
          including all test rules in the current BUILD file that are not tagged as
          <code>manual</code> or marked as <code>obsolete</code>. These rules are still subject
          to <code>tag</code> filtering.
        </p>
</li>
</ul>


<h4 id="test_suite_examples">Examples</h4>

<p>A test suite to run all of the small tests in the current package.</p>
<pre class="code">
test_suite(
    name = "small_tests",
    tags = ["small"],
)
</pre>

<p>A test suite that runs a specified set of tests:</p>

<pre class="code">
test_suite(
    name = "smoke_tests",
    tests = [
        "system_unittest",
        "public_api_unittest",
    ],
)
</pre>

<p>A test suite to run all tests in the current package which are not flaky.</p>
<pre class="code">
test_suite(
    name = "non_flaky_test",
    tags = ["-flaky"],
)
</pre>

<h3 id="bind">bind</h3>


<p class="rule-signature">
bind(<a href="#bind.name">name</a>,
<a href="#bind.actual">actual</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>Gives a target an alias in the <code>//external</code> package.</p>

<h4 id="bind_args">Arguments</h4>
<ul>
<li id="bind.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="bind.actual"><code>actual</code>:
        The target to be aliased.
        <i>(<a href="build-ref.html#labels">Label</a>; optional)</i><br/>


        <p>This target must exist, but can be any type of rule (including bind).</p>
</li>
</ul>


<p>The <code>//external</code> package is not a "normal" package: there is no external/ directory,
  so it can be thought of as a "virtual package" that contains all bound targets.</p>

<h4 id="bind_examples">Examples</h4>

<p>To give a target an alias, bind it in the <i>WORKSPACE</i> file.  For example, suppose there is
  a <code>java_library</code> target called <code>//third_party/javacc-v2</code>.  This could be
  aliased by adding the following to the <i>WORKSPACE</i> file:</p>

<pre class="code">
bind(
    name = "javacc-latest",
    actual = "//third_party/javacc-v2",
)
</pre>

<p>Now targets can depend on <code>//external:javacc-latest</code> instead of
  <code>//third_party/javacc-v2</code>. If javacc-v3 is released, the binding can be updated and
  all of the BUILD files depending on <code>//external:javacc-latest</code> will now depend on
  javacc-v3 without needing to be edited.</p>

<p>Bind can also be used to refer to external repositories' targets. For example, if there is a
  remote repository named <code>@my-ssl</code> imported in the WORKSPACE file. If the
  <code>@my-ssl</code> repository has a cc_library target <code>//src:openssl-lib</code>, you
  could make this target accessible for your program to depend on by using <code>bind</code>:</p>

<pre class="code">
bind(
    name = "openssl",
    actual = "@my-ssl//src:openssl-lib",
)
</pre>

<p>BUILD files cannot use labels that include a repository name
  ("@repository-name//package-name:target-name"), so the only way to depend on a target from
  another repository is to <code>bind</code> it in the WORKSPACE file and then refer to it by its
  aliased name in <code>//external</code> from a BUILD file.</p>

<p>For example, in a BUILD file, the bound target could be used as follows:</p>

<pre class="code">
cc_library(
    name = "sign-in",
    srcs = ["sign_in.cc"],
    hdrs = ["sign_in.h"],
    deps = ["//external:openssl"],
)
</pre>

<p>Within <code>sign_in.cc</code> and <code>sign_in.h</code>, the header files exposed by
  <code>//external:openssl</code> can be referred to by their path relative to their repository
  root.  For example, if the rule definition for <code>@my-ssl//src:openssl-lib</code> looks like
  this:</p>

<pre class="code">
cc_library(
    name = "openssl-lib",
    srcs = ["openssl.cc"],
    hdrs = ["openssl.h"],
)
</pre>

<p>Then <code>sign_in.cc</code>'s first lines might look like this:</p>

<pre class="code">
#include "sign_in.h"
#include "src/openssl.h"
</pre>

<h3 id="config_setting">config_setting</h3>


<p class="rule-signature">
config_setting(<a href="#config_setting.name">name</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#config_setting.values">values</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
  Matches an expected configuration state (expressed as Bazel flags) for the purpose of triggering
  configurable attributes. See <a href="#select">select</a> for how to consume this rule and
  <a href="#configurable-attributes">Configurable attributes</a> for an overview of
  the general feature.

<h4 id="config_setting_args">Arguments</h4>
<ul>
<li id="config_setting.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="config_setting.values"><code>values</code>:
          The set of configuration values that match this rule (expressed as Bazel flags)
          <i>(null; required)</i><br/>


          <i>(Dictionary mapping flags to expected values, both expressed as strings;
             mandatory)</i>

          <p>This rule inherits the configuration of the configured target that
            references it in a <code>select</code> statement. It is considered to
            "match" a Bazel invocation if, for every entry in the dictionary, its
            configuration matches the entry's expected value. For example
            <code>values = {"compilation_mode": "opt"}</code> matches the invocations
            <code>bazel build --compilation_mode=opt ...</code> and
            <code>bazel build -c opt ...</code> on target-configured rules.
          </p>

          <p>For convenience's sake, configuration values are specified as Bazel flags (without
            the preceding <code>"--"</code>). But keep in mind that the two are not the same. This
            is because targets can be built in multiple configurations within the same
            build. For example, a host configuration's "cpu" matches the value of
            <code>--host_cpu</code>, not <code>--cpu</code>. So different instances of the
            same <code>config_setting</code> may match the same invocation differently
            depending on the configuration of the rule using them.
          </p>

          <p>If a flag is not explicitly set at the command line, its default value is used.
             If a key appears multiple times in the dictionary, only the last instance is used.
             If a key references a flag that can be set multiple times on the command line (e.g.
             <code>bazel build --copt=foo --copt=bar --copt=baz ...</code>), a match occurs if
             <i>any</i> of those settings match.
          <p>

          <p>This attribute cannot be empty.
          </p>
</li>
</ul>


<h4 id="config_setting_examples">Examples</h4>

<p>The following matches any Bazel invocation that specifies <code>--compilation_mode=opt</code>
   or <code>-c opt</code> (either explicitly at the command line or implicitly from .bazelrc
   files, etc.), when applied to a target configuration rule:
</p>

<pre class="code">
config_setting(
    name = "simple",
    values = {"compilation_mode": "opt"}
)
</pre>

<p>The following matches any Bazel invocation that builds for ARM and applies a custom define
   (e.g. <code>bazel build --cpu=armeabi --define FOO=bar ...</code>), , when applied to a target
   configuration rule:
</p>

<pre class="code">
config_setting(
    name = "two_conditions",
    values = {
        "cpu": "armeabi",
        "define": "FOO=bar"
    }
)
</pre>

<h4 id="config_setting_notes">Notes</h4>

<p>See <a href="#select">select</a> for policies on what happens depending on how many rules match
   an invocation.
</p>

<p>For flags that support shorthand forms (e.g. <code>--compilation_mode</code> vs.
  <code>-c</code>), <code>values</code> definitions must use the full form. These automatically
  match invocations using either form.
</p>

<p>The currently endorsed method for creating custom conditions that can't be expressed through
  dedicated build flags is through the --define flag. Use this flag with caution: it's not ideal
  and only endorsed for lack of a currently better workaround. See the
  <a href="#configurable-attributes">Configurable attributes</a> section for more discussion.
</p>

<p>Try to consolidate <code>config_setting</code> definitions as much as possible. In other words,
  define <code>//common/conditions:foo</code> in one common package instead of repeating separate
  instances in <code>//project1:foo</code>, <code>//project2:foo</code>, etc. that all mean the
  same thing.
</p>

<h3 id="genrule">genrule</h3>


<p class="rule-signature">
genrule(<a href="#genrule.name">name</a>,
<a href="#genrule.srcs">srcs</a>,
<a href="#genrule.outs">outs</a>,
<a href="#genrule.cmd">cmd</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#genrule.executable">executable</a>,
<a href="#genrule.heuristic_label_expansion">heuristic_label_expansion</a>,
<a href="#common.licenses">licenses</a>,
<a href="#genrule.message">message</a>,
<a href="#genrule.output_to_bindir">output_to_bindir</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#genrule.tools">tools</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>A <code>genrule</code> generates one or more files using a user-defined Bash command.</p>

<p>
  Genrules are generic build rules that you can use if there's no specific rule for the task. If for
  example you want to minify JavaScript files then you can use a genrule to do so. If however you
  need to compile C++ files, stick to the existing <code>cc_*</code> rules, because all the heavy
  lifting has already been done for you.
</p>
<p>
  Do not use a genrule for running tests. There are special dispensations for tests and test
  results, including caching policies and environment variables. Tests generally need to be run
  after the build is complete and on the target architecture, whereas genrules are executed during
  the build and on the host architecture (the two may be different). If you need a general purpose
  testing rule, use <a href="#sh_test"><code>sh_test</code></a>.
</p>

<h4>Cross-compilation Considerations</h4>

<p>
  <em>See <a href="bazel-user-manual.html#configurations">the user manual</a> for more info about
  cross-compilation.</em>
</p>
<p>
  While genrules run during a build, their outputs are often used after the build, for deployment or
  testing. Consider the example of compiling C code for a microcontroller: the compiler accepts C
  source files and generates code that runs on a microcontroller. The generated code obviously
  cannot run on the CPU that was used for building it, but the C compiler (if compiled from source)
  itself has to.
</p>
<p>
  The build system uses the host configuration to describe the machine(s) on which the build runs
  and the target configuration to describe the machine(s) on which the output of the build is
  supposed to run. It provides options to configure each of these and it segregates the
  corresponding files into separate directories to avoid conflicts.
</p>
<p>
  For genrules, the build system ensures that dependencies are built appropriately:
  <code>srcs</code> are built (if necessary) for the <em>target</em> configuration,
  <code>tools</code> are built for the <em>host</em> configuration, and the output is considered to
  be for the <em>target</em> configuration. It also provides <a href="#make_variables">"Make"
  variables</a> that genrule commands can pass to the corresponding tools.
</p>
<p>
  It is intentional that genrule defines no <code>deps</code> attribute: other built-in rules use
  language-dependent meta information passed between the rules to automatically determine how to
  handle dependent rules, but this level of automation is not possible for genrules. Genrules work
  purely at the file and runfiles level.
</p>

<h4>Special Cases</h4>

<p>
  <i>Host-host compilation</i>: in some cases, the build system needs to run genrules such that the
  output can also be executed during the build. If for example a genrule builds some custom compiler
  which is subsequently used by another genrule, the first one has to produce its output for the
  host configuration, because that's where the compiler will run in the other genrule. In this case,
  the build system does the right thing automatically: it builds the <code>srcs</code> and
  <code>outs</code> of the first genrule for the host configuration instead of the target
  configuration. See <a href="bazel-user-manual.html#configurations">the user manual</a> for more
  info.
</p>
<p>
  <i>JDK & C++ Tooling</i>: to use a tool from the JDK or the C++ compiler suite, the build system
  provides a set of variables to use. See <a href="#make_variables">"Make" variable</a> for details.
</p>

<h4>Genrule Environment</h4>

<p>
  The genrule command is executed in a Bash shell, configured to fail when a command or a pipeline
  fails (<code>set -e -o pipefail</code>). Genrules should not access the network (except to create
  connections between processes running within the same genrule on the same machine), though this is
  not currently enforced.
</p>
<p>
  The build system automatically deletes any existing output files, but creates any necessary parent
  directories before it runs a genrule. It also removes any output files in case of a failure.
</p>

<h4>General Advice</h4>

<ul>
  <li>Do ensure that tools run by a genrule are deterministic and hermetic. They should not write
    timestamps to their output, and they should use stable ordering for sets and maps, as well as
    write only relative file paths to the output, no absolute paths. Not following this rule will
    lead to unexpected build behavior (Bazel not rebuilding a genrule you thought it would) and
    degrade cache performance.</li>
  <li>Do use <code>$(location)</code> extensively, for outputs, tools and sources. Due to the
    segregation of output files for different configurations, genrules cannot rely on hard-coded
    and/or absolute paths.</li>
  <li>Do write a common Skylark macro in case the same or very similar genrules are used in multiple
    places. If the genrule is complex, consider implementing it in a script or as a Skylark rule.
    This improves readability as well as testability.</li>
  <li>Do make sure that the exit code correctly indicates success or failure of the genrule.</li>
  <li>Do not write informational messages to stdout or stderr. While useful for debugging, this can
    easily become noise; a successful genrule should be silent. On the other hand, a failing genrule
    should emit good error messages.</li>
  <li><code>$$</code> evaluates to a <code>$</code>, a literal dollar-sign, so in order to invoke a
    shell command containing dollar-signs such as <code>ls $(dirname $x)</code>, one must escape it
    thus: <code>ls $$(dirname $$x)</code>.</li>
  <li>Avoid creating symlinks and directories. Bazel doesn't copy over the directory/symlink
    structure created by genrules and its dependency checking of directories is unsound.</li>
  <li>When referencing the genrule in other rules, you can use either the genrule's label or the
    labels of individual output files. Sometimes the one approach is more readable, sometimes the
    other: referencing outputs by name in a consuming rule's <code>srcs</code> will avoid
    unintentionally picking up other outputs of the genrule, but can be tedious if the genrule
    produces many outputs.</li>
</ul>

<h4 id="genrule_args">Arguments</h4>
<ul>
<li id="genrule.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i>    <br/>You may refer to this rule by name in the <code>srcs</code> or <code>deps</code> section of
    other <code>BUILD</code> rules. If the rule generates source files, you should use the
    <code>srcs</code> attribute.
</li>
<li id="genrule.srcs"><code>srcs</code>:
        A list of inputs for this rule, such as source files to process.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        <p>
          <em>This attributes is not suitable to list tools executed by the <code>cmd</code>; use
          the <a href="#genrule.tools"><code>tools</code></a> attribute for them instead.</em>
        </p>
        <p>
          The build system ensures these prerequisites are built before running the genrule
          command; they are built using the same configuration as the original build request. The
          names of the files of these prerequisites are available to the command as a
          space-separated list in <code>$(SRCS)</code>; alternatively the path of an individual
          <code>srcs</code> target <code>//x:y</code> can be obtained using <code>$(location
          //x:y)</code>, or using <code>$&lt;</code> provided it's the only entry in
          //<code>srcs</code>.
        </p>
</li>
<li id="genrule.outs"><code>outs</code>:
        A list of files generated by this rule.
        <i>(List of <a href="build-ref.html#filename">filenames</a>; required)</i><br/>

        <p>
          All output files must be generated into the same directory and must not cross package
          boundaries. Output filenames are interpreted as relative to the package.
        </p>
        <p>
          If the <code>executable</code> flag is set, <code>outs</code> must contain exactly one
          label.
        </p>
</li>
<li id="genrule.cmd"><code>cmd</code>:
        The command to run.
        <i>(String; required)</i><br/>

        Subject to <a href="#location">$(location)</a> and <a href="#make_variables">"Make"
        variable</a> substitution.
        <ol>
          <li>
            First <a href="#location">$(location)</a> substitution is applied, replacing all
            occurrences of <code>$(location <i>label</i>)</code> and of <code>$(locations
            <i>label</i>)</code>.
          </li>
          <li>
            <p>
              Then, if <a href="#genrule.heuristic_label_expansion"><code>heuristic label
              expansion</code></a> is enabled, a heuristic pass is applied to the string to replace
              all occurrences of the labels listed in the <code>srcs</code> and <code>tools</code>
              attributes of the rule, by their corresponding filenames. In effect, this is the same
              substitution as <code>$(location)</code>, but is done implicitly and is not always
              accurate.
            </p>
            <p>
              Note that <code>outs</code> are <i>not</i> included in this substitution. Output files
              are always generated into a predictable location (available via <code>$(@D)</code>,
              <code>$@</code>, <code>$(OUTS)</code> or <code>$(location <i>output_name</i>)</code>;
              see below).
            </p>
          </li>
          <li>
            Next, <a href="#make_variables">"Make" variables</a> are expanded. Note that predefined
            variables <code>$(JAVA)</code>, <code>$(JAVAC)</code> and <code>$(JAVABASE)</code>
            expand under the <i>host</i> configuration, so Java invocations that run as part of a
            build step can correctly load shared libraries and other dependencies.
          </li>
          <li>
            Finally, the resulting command is executed using the Bash shell. If its exit code is
            non-zero the command is considered to have failed.
          </li>
        </ol>
        <p>
          The command may refer to binaries that were declared as
          <a href="#genrule.tools"><code>tools</code></a>; it should use a
          <a href="build-ref.html#labels">label</a> and <code>$(location)</code> expansion for this.
          The <a href="#predefined_variables">Predefined "Make" Variables</a> and the
          <a href="#predefined_variables.genrule.cmd">genrule-specific "Make" variables</a> are also
          available for <code>cmd</code>.
        </p>
</li>
<li id="genrule.executable"><code>executable</code>:
        Declare output to be executable.
        <i>(Boolean; optional; default is 0)</i><br/>

        <p>
          Setting this flag to 1 means the output is an executable file and can be run using the
          <code>bazel run</code> command. The genrule must produce exactly one output in this case.
          If this attribute is set, <code>bazel run</code> will try executing the file regardless of
          its content.
        </p>
        <p>Declaring data dependencies for the generated executable is not supported.</p>
</li>
<li id="genrule.heuristic_label_expansion"><code>heuristic_label_expansion</code>:
        Whether to perform heuristic label expansion.
        <i>(Boolean; optional; default is 1)</i><br/>

        <p>
          <em>This attribute is only documented for completeness' sake and because it may be the
          culprit of surprising errors when it's enabled. We recommend to always disable it.</em>
        </p>
        <p>
          If enabled, Bazel attempts to find labels in the command and expand them, forgiving for
          missing <code>$(location)</code> function calls. However, enabling this heuristic does not
          guarantee that Bazel will find all labels, meaning that it doesn't remove the need to use
          <code>$(location)</code> calls. Even worse, it can lead to surprising behavior when Bazel
          thinks something is a label which actually isn't. See the
          <a href="genrule_examples">examples</a> section for an illustration of heuristic label
          expansion going wrong.
        </p>
        <p>
          When disabled, Bazel only expands labels in <code>$(location)</code> and
          <code>$(locations)</code> functions. We recommend that you always disable this feature.
        </p>
</li>
<li id="genrule.message"><code>message</code>:
        A progress message.
        <i>(String; optional)</i><br/>

        <p>
          A progress message that will be printed as this build step is executed. By default, the
          message is "Generating <i>output</i>" (or something equally bland) but you may provide a
          more specific one. Use this attribute instead of <code>echo</code> or other print
          statements in your <code>cmd</code> command, as this allows the build tool to control
          whether such progress messages are printed or not.
        </p>
</li>
<li id="genrule.output_to_bindir"><code>output_to_bindir</code>:
        <i>(Boolean; optional; default is 0)</i><br/>

        <p>
          If set to 1, this option causes output files to be written into the <code>bin</code>
          directory instead of the <code>genfiles</code> directory.
        </p>
</li>
<li id="genrule.tools"><code>tools</code>:
        A list of <i>tool</i> dependencies for this rule.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        <p>
          The build system ensures these prerequisites are built before running the genrule command;
          they are built using the <a href='bazel-user-manual.html#configurations'><i>host</i>
          configuration</a>, since these tools are executed as part of the build. The path of an
          individual <code>tools</code> target <code>//x:y</code> can be obtained using
          <code>$(location //x:y)</code>.
        </p>
        <p>
          Any <code>*_binary</code> or tool to be executed by <code>cmd</code> must appear in this
          list, not in <code>srcs</code>, to ensure they are built in the correct configuration.
        </p>
</li>
</ul>


<h4 id="genrule_examples">Examples</h4>

<p>
  This example generates <code>foo.h</code>. There are no sources, because the command doesn't take
  any input. The "binary" run by the command is a perl script in the same package as the genrule.
</p>
<pre class="code">
genrule(
    name = "foo",
    srcs = [],
    outs = ["foo.h"],
    cmd = "$(location create_foo.pl) &gt; \"$@\"",
    tools = ["create_foo.pl"],
)
</pre>

<p>
  The following example shows how to use a <a href="#filegroup"><code>filegroup</code></a> and
  the outputs of another <code>genrule</code>. Note that using <code>$(SRCS)</code> instead of
  explicit <code>$(location)</code> directives would also work; this example uses the latter for
  sake of demonstration.
</p>
<pre class="code">
genrule(
    name = "concat_all_files",
    srcs = [
        "//some:files",  # a filegroup with multiple files in it ==> $(location<b>s</b>)
        "//other:gen",   # a genrule with a single output ==> $(location)
    ],
    outs = ["concatenated.txt"],
    cmd = "cat $(locations //some:files) $(location //other:gen) > $@",
)
</pre>

<p>
  The following example shows why enabling
  <a href="#genrule.heuristic_label_expansion">heuristic label expansion</a> is discouraged.
</p>
<pre class="code">
genrule(
    name = "foo",
    srcs = ["a.txt"],
    outs = ["foo.out"],
    heuristic_label_expansion = 1,
    cmd = ("tmp=$$(mktemp -d) ; " +
           "cd $$tmp ; " +
           "echo hello &gt; a.txt ; " +  # a.txt will be automatically expanded though it shouldn't!
           "cd - ; " +
           "cp $$tmp/a.txt &gt; $@"),
)
</pre>

<h3 id="http_archive">http_archive</h3>


<p class="rule-signature">
http_archive(<a href="#http_archive.name">name</a>,
<a href="#http_archive.sha256">sha256</a>,
<a href="#http_archive.url">url</a>)
</p>


<p>Downloads a Bazel repository as a compressed archive file, decompresses it, and makes its
  targets available for binding.</p>

<p>Only Zip-formatted archives with the .zip extension are supported.</p>

<h4 id="http_archive_args">Arguments</h4>
<ul>
<li id="http_archive.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="http_archive.sha256"><code>sha256</code>:
        The expected SHA-256 hash of the file downloaded.
        <i>(String; required)</i><br/>


        <p>This must match the SHA-256 hash of the file downloaded.</p>
</li>
<li id="http_archive.url"><code>url</code>:
        A URL to an archive file containing a Bazel repository.
        <i>(String; required)</i><br/>


        <p>This must be an HTTP URL that ends with .zip. There is no support for authentication or
          redirection.</p>
</li>
</ul>


<h4 id="http_archive_examples">Examples</h4>

<p>Suppose the current repository contains the source code for a chat program, rooted at the
  directory <i>~/chat-app</i>. It needs to depend on an SSL library which is available from
  <i>http://example.com/openssl.zip</i>. This .zip file contains the following directory
  structure:</p>

<pre class="code">
WORKSPACE
src/
  BUILD
  openssl.cc
  openssl.h
</pre>

<p><i>src/BUILD</i> contains the following target definition:</p>

<pre class="code">
cc_library(
    name = "openssl-lib",
    srcs = ["openssl.cc"],
    hdrs = ["openssl.h"],
)
</pre>

<p>Targets in the <i>~/chat-app</i> repository can depend on this target if the following lines are
  added to <i>~/chat-app/WORKSPACE</i>:</p>

<pre class="code">
http_archive(
    name = "my-ssl",
    url = "http://example.com/openssl.zip",
    sha256 = "03a58ac630e59778f328af4bcc4acb4f80208ed4",
)

bind(
    name = "openssl",
    actual = "@my-ssl//src:openssl-lib",
)
</pre>

<p>See <a href="#bind_examples">Bind</a> for how to use bound targets.</p>

<h3 id="http_jar">http_jar</h3>


<p class="rule-signature">
http_jar(<a href="#http_jar.name">name</a>,
<a href="#http_jar.sha256">sha256</a>,
<a href="#http_jar.url">url</a>)
</p>


<p>Downloads a jar from a URL and makes it available to be used as a Java dependency.</p>

<p>Downloaded files must have a .jar extension.</p>

<h4 id="http_jar_args">Arguments</h4>
<ul>
<li id="http_jar.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="http_jar.sha256"><code>sha256</code>:
        The expected SHA-256 of the file downloaded.
        <i>(String; required)</i><br/>


        <p>This must match the SHA-256 of the file downloaded.</p>
</li>
<li id="http_jar.url"><code>url</code>:
        A URL to an archive file containing a Bazel repository.
        <i>(String; required)</i><br/>


        <p>This must be an http or https URL that ends with .jar. Redirects are not followed.</p>
</li>
</ul>


<h4 id="http_jar_examples">Examples</h4>

<p>Suppose the current repository contains the source code for a chat program, rooted at the
  directory <i>~/chat-app</i>. It needs to depend on an SSL library which is available from
  <i>http://example.com/openssl-0.2.jar</i>.</p>

<p>Targets in the <i>~/chat-app</i> repository can depend on this target if the following lines are
  added to <i>~/chat-app/WORKSPACE</i>:</p>

<pre class="code">
http_jar(
    name = "my-ssl",
    url = "http://example.com/openssl-0.2.jar",
    sha256 = "03a58ac630e59778f328af4bcc4acb4f80208ed4",
)

bind(
    name = "openssl",
    actual = "@my-ssl//jar:openssl-0.2.jar",
)
</pre>

<p>See <a href="#bind_examples">Bind</a> for how to use bound targets.</p>

<h3 id="java_plugin">java_plugin</h3>


<p class="rule-signature">
java_plugin(<a href="#java_plugin.name">name</a>,
<a href="#java_plugin.deps">deps</a>,
<a href="#java_plugin.srcs">srcs</a>,
<a href="#java_plugin.data">data</a>,
<a href="#java_plugin.resources">resources</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#java_plugin.javacopts">javacopts</a>,
<a href="#common.licenses">licenses</a>,
<a href="#java_plugin.neverlink">neverlink</a>,
<a href="#java_plugin.plugins">plugins</a>,
<a href="#java_plugin.processor_class">processor_class</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>
  <code>java_plugin</code> defines plugins for the Java compiler run by Bazel. At the moment, the
  only supported kind of plugins are annotation processors. A <code>java_library</code> or
  <code>java_binary</code> rule can run plugins by depending on them via the <code>plugins</code>
  attribute. A <code>java_library</code> can also automatically export plugins to libraries that
  directly depend on it using
  <code><a href="#java_library.exported_plugins">exported_plugins</a></code>.
</p>

<h4 id="java_plugin_implicit_outputs">Implicit output targets</h4>
        <ul>
          <li><code><var>libname</var>.jar</code>: A Java archive.</li>
        </ul>


<h4 id="java_plugin_args">Arguments</h4>
<ul>
<li id="java_plugin.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="java_plugin.deps"><code>deps</code>:
        The list of libraries to link into this library.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        See general comments about <code>deps</code> at <a href="#common-attributes">Attributes
        common to all build rules</a>.
        <p>
          The jars built by <code>java_library</code> rules listed in <code>deps</code> will be on
          the compile-time classpath of this rule. Furthermore the transitive closure of their
          <code>deps</code>, <code>runtime_deps</code> and <code>exports</code> will be on the
          runtime classpath.
        </p>
        <p>
          By contrast, targets in the <code>data</code> attribute are included in the runfiles but
          on neither the compile-time nor runtime classpath.
        </p>
</li>
<li id="java_plugin.srcs"><code>srcs</code>:
          The list of source files that are processed to create the target.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          This attribute is almost always required; see exceptions below.
          <p>
            Source files of type <code>.java</code> are compiled. In case of generated
            <code>.java</code> files it is generally advisable to put the generating rule's name
            here instead of the name of the file itself. This not only improves readability but
            makes the rule more resilient to future changes: if the generating rule generates
            different files in the future, you only need to fix one place: the <code>outs</code> of
            the generating rule. You should not list the generating rule in <code>deps</code>
            because it is a no-op.
          </p>
          <p>
            Source files of type <code>.srcjar</code> are unpacked and compiled. (This is useful if
            you need to generate a set of <code>.java</code> files with a genrule.)
          </p>
          <p>
            Source files of type <code>.jar</code> are linked in. <em class="harmful">This is
            discouraged, use <a href="#java_import"><code>java_import</code></a></em> if you need to
            link against existing (or generated) jar files (which is useful if you have a
            <code>.jar</code> file without sources).
          </p>
          <p>
            Rules: if the rule (typically <code>genrule</code> or <code>filegroup</code>) generates
            any of the files listed above, they will be used the same way as described for source
            files.
          </p>

          <p>
            This argument is almost always required, except if a
            <a href="#java_binary.main_class"><code>main_class</code></a> attribute specifies a
            class on the runtime classpath or you specify the <code>runtime_deps</code> argument.
          </p>
</li>
<li id="java_plugin.data"><code>data</code>:
        The list of files needed by this library at runtime.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

        See general comments about <code>data</code> at <a href="#common-attributes">Attributes
        common to all build rules</a>.
        <p>
          When building a <code>java_library</code>, Bazel doesn't put these files anywhere; if the
          <code>data</code> files are generated files then Bazel generates them. When building a
          test that depends on this <code>java_library</code> Bazel copies or links the
          <code>data</code> files into the runfiles area.
        </p>
</li>
<li id="java_plugin.resources"><code>resources</code>:
          A list of data files to include in a Java jar.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          If resources are specified, they will be bundled in the jar along with the usual
          <code>.class</code> files produced by compilation. The location of the resources inside of
          the jar file is determined using a heuristic, but it's often in a directory corresponding
          to the build package name. Resources may be source files or generated files.
</li>
<li id="java_plugin.javacopts"><code>javacopts</code>:
          Extra compiler options for this library.
          <i>(List of strings; optional)</i><br/>

          Subject to <a href="#make_variables">"Make variable"</a> substitution and
          <a href="#sh-tokenization">Bourne shell tokenization</a>.
          <p>These compiler options are passed to javac after the global compiler options.</p>
</li>
<li id="java_plugin.neverlink"><code>neverlink</code>:
        Whether this library should only be used for compilation and not at runtime.
        <i>(Boolean; optional; default is 0)</i><br/>

        Useful if the library will be provided by the runtime environment during execution. Examples
        of such libraries are the IDE APIs for IDE plug-ins or <code>tools.jar</code> for anything
        running on a standard JDK.
        <p>
          Note that <code>neverlink = 1</code> does not prevent the compiler from inlining material
          from this library into compilation targets that depend on it, as permitted by the Java
          Language Specification (e.g., <code>static final</code> constants of <code>String</code>
          or of primitive types). The preferred use case is therefore when the runtime library is
          identical to the compilation library.
        </p>
        <p>
          If the runtime library differs from the compilation library then you must ensure that it
          differs only in places that the JLS forbids compilers to inline (and that must hold for
          all future versions of the JLS).
        </p>
</li>
<li id="java_plugin.plugins"><code>plugins</code>:
          Java compiler plugins to run at compile-time.
          <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

          Every <code>java_plugin</code> specified in this attribute will be run whenever this rule
          is built. A library may also inherit plugins from dependencies that use
          <code><a href="#java_library.exported_plugins">exported_plugins</a></code>. Resources
          generated by the plugin will be included in the resulting jar of this rule.
</li>
<li id="java_plugin.processor_class"><code>processor_class</code>:
        <i>(String; optional)</i><br/>

        The processor class is the fully qualified type of the class that the Java compiler should
        use as entry point to the annotation processor. If not specified, this rule will not
        contribute an annotation processor to the Java compiler's annotation processing, but its
        runtime classpath will still be included on the compiler's annotation processor path. (This
        is primarily intended for use by <a href="http://errorprone.info/">Error Prone plugins</a>,
        which are loaded from the annotation processor path using <code>META-INF/services</code>
        files.)
</li>
</ul>


<p>
  Arguments are identical to <a href="#java_library"><code>java_library</code></a>, except for the
  addition of the <code>processor_class</code> argument.
</p>

<h3 id="local_repository">local_repository</h3>


<p class="rule-signature">
local_repository(<a href="#local_repository.name">name</a>,
<a href="#local_repository.path">path</a>)
</p>


<p>Allows targets from a local directory to be bound. This means that the current repository can
  use targets defined in this other directory. See the <a href="#bind_examples">bind section</a>
  for more details.</p>

<h4 id="local_repository_args">Arguments</h4>
<ul>
<li id="local_repository.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="local_repository.path"><code>path</code>:
        The path to the local repository's directory.
        <i>(String; required)</i><br/>


        <p>This must be an absolute path to the directory containing the repository's
        <i>WORKSPACE</i> file.</p>
</li>
</ul>


<h4 id="local_repository_examples">Examples</h4>

<p>Suppose the current repository is a chat client, rooted at the directory <i>~/chat-app</i>. It
  would like to use an SSL library which is defined in a different repository: <i>~/ssl</i>.  The
  SSL library has a target <code>//src:openssl-lib</code>.</p>

<p>The user can add a dependency on this target by adding the following lines to
  <i>~/chat-app/WORKSPACE</i>:</p>

<pre class="code">
local_repository(
    name = "my-ssl",
    path = "/home/user/ssl",
)

bind(
    name = "openssl",
    actual = "@my-ssl//src:openssl-lib",
)
</pre>

<p>See <a href="#bind_examples">Bind</a> for how to use bound targets.</p>

<h3 id="maven_jar">maven_jar</h3>


<p class="rule-signature">
maven_jar(<a href="#maven_jar.name">name</a>,
<a href="#maven_jar.artifact_id">artifact_id</a>,
<a href="#maven_jar.exclusions">exclusions</a>,
<a href="#maven_jar.group_id">group_id</a>,
<a href="#maven_jar.repositories">repositories</a>,
<a href="#maven_jar.version">version</a>)
</p>


<p>Downloads a jar from Maven and makes it available to be used as a Java dependency.</p>

<h4 id="maven_jar_args">Arguments</h4>
<ul>
<li id="maven_jar.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="maven_jar.artifact_id"><code>artifact_id</code>:
        The artifactId of the Maven dependency.
        <i>(String; required)</i><br/>

</li>
<li id="maven_jar.exclusions"><code>exclusions</code>:
        Transitive dependencies of this dependency that should not be downloaded.
        <i>(List of strings; optional)</i><br/>


        <p>Defaults to None: Bazel will download all of the dependencies requested by the Maven
          dependency.  If exclusions are specified, they will not be downloaded.</p>

        <p>Exclusions are specified in the format "<group_id>:<artifact_id>", for example,
          "com.google.guava:guava".</p>

        <p><b>Not yet implemented.</b></p>
</li>
<li id="maven_jar.group_id"><code>group_id</code>:
        The groupId of the Maven dependency.
        <i>(String; required)</i><br/>

</li>
<li id="maven_jar.repositories"><code>repositories</code>:
        A list of repositories to use to attempt to fetch the jar.
        <i>(List of strings; optional)</i><br/>


        <p>Defaults to Maven Central ("repo1.maven.org"). If repositories are specified, they will
          be checked in the order listed here (Maven Central will not be checked in this case,
          unless it is on the list).</p>

        <p><b>To be implemented: add a maven_repositories rule that allows a list of repositories
        to be labeled.</b></p>
</li>
<li id="maven_jar.version"><code>version</code>:
        The version of the Maven dependency.
        <i>(String; required)</i><br/>

</li>
</ul>


<h4 id="http_jar_examples">Examples</h4>

Suppose that the current repostory contains a java_library target that needs to depend on Guava.
Using Maven, this dependency would be defined in the pom.xml file as:

<pre>
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>18.0</version>
</dependency>
</pre>

In Bazel, the following lines can be added to the WORKSPACE file:

<pre>
maven_jar(
    name = "guava",
    group_id = "com.google.guava",
    artifact_id = "guava",
    version = "18.0",
)

bind(
    name = "guava-jar",
    actual = "@guava//jar"
)
</pre>

Then the java_library can depend on <code>//external:guava-jar</code>.

<p>See <a href="#bind_examples">Bind</a> for how to use bound targets.</p>

<h3 id="new_http_archive">new_http_archive</h3>


<p class="rule-signature">
new_http_archive(<a href="#new_http_archive.name">name</a>,
<a href="#new_http_archive.build_file">build_file</a>,
<a href="#new_http_archive.sha256">sha256</a>,
<a href="#new_http_archive.url">url</a>)
</p>


<p>Downloads a compressed archive file, decompresses it, and creates a Bazel repository by
combining the archive with the provided BUILD file.</p>

<p>Only Zip-formatted archives with the .zip extension are supported.</p>

<h4 id="new_http_archive_args">Arguments</h4>
<ul>
<li id="new_http_archive.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="new_http_archive.build_file"><code>build_file</code>:
        A file to use as a BUILD file for this directory.
        <i>(String; required)</i><br/>


        <p>This path is relative to the build's workspace. The file does not need to be named
        BUILD, but can be (something like BUILD.new-repo-name may work well for distinguishing it
        from the repository's actual BUILD files.</p>
</li>
<li id="new_http_archive.sha256"><code>sha256</code>:
        The expected SHA-256 hash of the file downloaded.
        <i>(String; required)</i><br/>


        <p>This must match the SHA-256 hash of the file downloaded.</p>
</li>
<li id="new_http_archive.url"><code>url</code>:
        A URL to an archive file containing a Bazel repository.
        <i>(String; required)</i><br/>


        <p>This must be an HTTP URL that ends with .zip. There is no support for authentication or
          redirection.</p>
</li>
</ul>


<h4 id="new_http_archive_examples">Examples</h4>

<p>Suppose the current repository contains the source code for a chat program, rooted at the
  directory <i>~/chat-app</i>. It needs to depend on an SSL library which is available from
  <i>http://example.com/openssl.zip</i>. This .zip file contains the following directory
  structure:</p>

<pre class="code">
src/
  openssl.cc
  openssl.h
</pre>

<p>In the local repository, the user creates a <i>ssl.BUILD</i> file which contains the following
target definition:</p>

<pre class="code">
cc_library(
    name = "openssl-lib",
    srcs = ["src/openssl.cc"],
    hdrs = ["src/openssl.h"],
)
</pre>

<p>Targets in the <i>~/chat-app</i> repository can depend on this target if the following lines are
  added to <i>~/chat-app/WORKSPACE</i>:</p>

<pre class="code">
new_http_archive(
    name = "my-ssl",
    url = "http://example.com/openssl.zip",
    sha256 = "03a58ac630e59778f328af4bcc4acb4f80208ed4",
    build_file = "ssl.BUILD",
)

bind(
    name = "openssl",
    actual = "@my-ssl//:openssl-lib",
)
</pre>

<p>See <a href="#bind_examples">Bind</a> for how to use bound targets.</p>

<h3 id="new_local_repository">new_local_repository</h3>


<p class="rule-signature">
new_local_repository(<a href="#new_local_repository.name">name</a>,
<a href="#new_local_repository.build_file">build_file</a>,
<a href="#new_local_repository.path">path</a>)
</p>


<p>Allows a local directory to be turned into a Bazel repository. This means that the current
  repository can define and use targets from anywhere on the filesystem.</p>

<p>This rule creates a Bazel repository by creating a WORKSPACE file and subdirectory containing
symlinks to the BUILD file and path given.  The build file should create targets relative to the
path, which can then be bound and used by the current build.

<h4 id="new_local_repository_args">Arguments</h4>
<ul>
<li id="new_local_repository.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="new_local_repository.build_file"><code>build_file</code>:
        A file to use as a BUILD file for this directory.
        <i>(String; required)</i><br/>


        <p>This path is relative to the build's workspace. The file does not need to be named
        BUILD, but can be (something like BUILD.new-repo-name may work well for distinguishing it
        from the repository's actual BUILD files.</p>
</li>
<li id="new_local_repository.path"><code>path</code>:
        A path on the local filesystem.
        <i>(String; required)</i><br/>


        <p>This must be an absolute path to an existing file or a directory.</p>
</li>
</ul>


<h4 id="new_local_repository_examples">Examples</h4>

<p>Suppose the current repository is a chat client, rooted at the directory <i>~/chat-app</i>. It
  would like to use an SSL library which is defined in a different directory: <i>~/ssl</i>.</p>

<p>The user can add a dependency by creating a BUILD file for the SSL library
(~/chat-app/BUILD.my-ssl) containing:

<pre class="code">
java_library(
    name = "openssl",
    srcs = glob(['ssl/*.java'])
)
</pre>

<p>Then they can add the following lines to <i>~/chat-app/WORKSPACE</i>:</p>

<pre class="code">
new_local_repository(
    name = "my-ssl",
    path = "/home/user/ssl",
    build_file = "BUILD.my-ssl",
)

bind(
    name = "openssl",
    actual = "@my-ssl//my-ssl:openssl",
)
</pre>

<p>This will create a @my-ssl repository containing a my-ssl package that contains a symlink to
/home/user/ssl named ssl (so the BUILD file must refer to paths within /home/user/ssl relative to
ssl).</p>

<p>See <a href="#bind_examples">Bind</a> for how to use bound targets.</p>

<p>You can also use <code>new_local_repository</code> to include single files, not just
directories. For example, suppose you had a jar file at /home/username/Downloads/piano.jar. You
could add just that file to your build by adding the following to your WORKSPACE file:

<pre class="code">
new_local_repository(
    name = "piano",
    path = "/home/username/Downloads/piano.jar",
    build_file = "BUILD.piano",
)

bind(
    name = "music",
    actual = "@piano//piano:play-music",
)
</pre>

<p>And creating the following BUILD file:</p>

<pre class="code">
java_import(
    name = "play-music",
    jars = ["piano.jar"],
)
</pre>

Then targets can depend on //external:music to use piano.jar.

<h3 id="objc_xcodeproj">objc_xcodeproj</h3>


<p class="rule-signature">
objc_xcodeproj(<a href="#objc_xcodeproj.name">name</a>,
<a href="#objc_xcodeproj.deps">deps</a>,
<a href="#common.deprecation">deprecation</a>,
<a href="#common.distribs">distribs</a>,
<a href="#common.licenses">licenses</a>,
<a href="#common.tags">tags</a>,
<a href="#common.testonly">testonly</a>,
<a href="#common.visibility">visibility</a>)
</p>


<p>This rule combines build information about several objc targets (and all their transitive
dependencies) into a single Xcode project file, for use in developing on a Mac.</p>

<h4 id="objc_xcodeproj_args">Arguments</h4>
<ul>
<li id="objc_xcodeproj.name"><code>name</code>: A unique name for this rule.
<i>(<a href="build-ref.html#name">Name</a>; required)</i></li>
<li id="objc_xcodeproj.deps"><code>deps</code>:
        The list of targets to include in the combined Xcode project file.
        <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

</li>
</ul>






<!-- =================================================================
                              package()
     =================================================================
-->

<h3 id="package">package</h3>

<p><code>package(default_deprecation,

  default_testonly,
  default_visibility,
  features)</code>
</p>

<p>This function declares metadata that applies to every subsequent rule in the
package. It is used at most once within a package (BUILD file).</p>

<p>It is recommended that the package function is called at the top of the
file, before any rule.</p>

<h4 id="package_args">Arguments</h4>

<ul>
  <li id="package.default_visibility"><code>default_visibility</code>:
    The default visibility of the rules in this package.
    <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

    <p>Every rule in this package has the visibility specified in this
    attribute, unless otherwise specified in the <code>visibility</code>
    attribute of the rule. For detailed information about the syntax of this
    attribute, see the documentation of the <a href="#common.visibility">visibility</a>
    attribute. The package default visibility applies neither to the
    <a href="#exports_files">exports_files</a> function nor to the
    <a href="#cc_public_library">cc_public_library</a> rule (which are
    public by default).
  </li>

  <li id="package.default_deprecation"><code>default_deprecation</code>:
    Sets the default <a href="#common.deprecation"><code>deprecation</code></a> message
    for all rules in this package. <i>(String; optional)</i>
  </li>

  <li id="package.default_testonly"><code>default_testonly</code>:
    Sets the default <a href="#common.testonly"><code>testonly</code></a> property
    for all rules in this package. <i>(Boolean; optional; default is 0 except as noted)</i>

    <p>In packages under <code>javatests</code> the default value is 1.</p>
  </li>

  <li id="package.features"><code>features</code>:
    Sets various flags that affect the semantics of this BUILD file.
    <i>(List strings; optional)</i>

    <p>This feature is mainly used by the people working on the build system to
    tag packages that need some kind of special handling. Do not use this unless
    explicitly requested by someone working on the build system.</p>
  </li>

</ul>

<h4 id="package_example">Examples</h4>

The declaration below declares that the rules in this package are
visible only to members of package
group <code>//foo:target</code>. Individual visibility declarations
on a rule, if present, override this specification.

<pre class="code">
package(default_visibility = ["//foo:target"])
</pre>

<!-- =================================================================
                              package_group()
     =================================================================
-->

<h3 id="package_group">package_group</h3>

<p><code>package_group(name, packages, includes)</code></p>

<p>This function defines a set of packages and assigns a label to the
group. The label can be referenced in <code>visibility</code> attributes.</p>

<p>Package groups are used for visibility control.  You can grant access to a rule
to one or more package groups, every rule in the entire source tree, or only to rules declared
in the same package. For more detailed description of the visibility system, see
the <a href="#common.visibility">visibility</a> attribute.

<h4 id="package_group_args">Arguments</h4>

<ul>
  <li id="package_group.name"><code>name</code>:
    A unique name for this rule.
    <i>(<a href="build-ref.html#name">Name</a>; required)</i>
  </li>

  <li id="package_group.packages"><code>packages</code>:
    A complete enumeration of packages in this group.
    <i>(List of <a href="build-ref.html#s4">Package</a>; optional)</i><br/>

    <p>Packages should be referred to using their full names,
    starting with a double slash. For
    example, <code>//foo/bar/main</code> is a valid element
    of this list.</p>

    <p>You can also specify wildcards: the specification
    <code>//foo/...</code> specifies every package under
    <code>//foo</code>, including <code>//foo</code> itself.

    <p>If this attribute is missing, the package group itself will contain
    no packages (but it can still include other package groups).</p>
  </li>

  <li id="package_group.includes"><code>includes</code>:
    Other package groups that are included in this one.
    <i>(List of <a href="build-ref.html#labels">labels</a>; optional)</i><br/>

    <p>The labels in this attribute must refer to other package
    groups. Packages in referenced package groups are taken to be part
    of this package group. This is transitive, that is, if package
    group <code>a</code> contains package group <code>b</code>,
    and <code>b</code> contains package group <code>c</code>, every
    package in <code>c</code> will also be a member of <code>a</code>.</p>
  </li>
</ul>


<h4 id="package_group_example">Examples</h4>

The following <code>package_group</code> declaration specifies a
package group called "tropical" that contains tropical fruits.

<pre class="code">
package_group(
    name = "tropical",
    packages = [
        "//fruits/mango",
        "//fruits/orange",
        "//fruits/papaya/...",
    ],
)
</pre>

The following declarations specify the package groups of a fictional
application:

<pre class="code">
package_group(
    name = "fooapp",
    includes = [
        ":controller",
        ":model",
        ":view",
    ],
)

package_group(
    name = "model",
    packages = ["//fooapp/database"],
)

package_group(
    name = "view",
    packages = [
        "//fooapp/swingui",
        "//fooapp/webui",
    ],
)

package_group(
    name = "controller",
    packages = ["//fooapp/algorithm"],
)
</pre>


<!-- =================================================================
                        exports_files([label, ...])
     =================================================================
  -->

<h3 id="exports_files">exports_files</h3>

<p><code>exports_files([<i>label</i>, ...], visibility, licenses)</code></p>

<p>
  <code>exports_files()</code> specifies a list of files belonging to
  this package that are exported to other packages but not otherwise
  mentioned in the BUILD file.
</p>

<p>
  The BUILD file for a package may only refer to files belonging to another
  package if they are mentioned somewhere in the other packages's BUILD file,
  whether as an input to a rule or an explicit or implicit output from a rule.
  The remaining files are not associated with a specific rule but are just "data",
  and for these, <code>exports_files</code> ensures that they may be referenced by
  other packages.  (One kind of data for which this is particularly useful are
  shell scripts.)
</p>

<p>
  Note: A BUILD file only consisting of <code>exports_files()</code> statements
  is needless though, as there are no BUILD rules that could own any files.
  The files listed can already be accessed through the containing package and
  exported from there if needed.
</p>

<h4 id="exports_files_args">Arguments</h4>

<p>
  The argument is a list of names of files within the current package. A
  visibility declaration can also be specified; in this case, the files will be
  visible to the targets specified. If no visibility is specified, the files
  will be visible to every package, even if a package default visibility was
  specified in the <code><a href="#package">package</a></code> function. The
  <a href="#common.licenses">licenses</a> can also be specified.
</p>

<h4 id="exports_files_example">Example</h4>

<p>
  The following example exports <code>golden.txt</code>, a
  text file from the <code>test_data</code> package, so that other
  packages may use it, for example, in the <code>data</code> attribute
  of tests.
</p>

<pre class="code">
# from //test_data/BUILD

exports_files(["golden.txt"])
</pre>

<!-- =================================================================
                               glob()
     =================================================================
  -->

<h3 id="glob">glob</h3>

<p><code>glob(include, exclude=[], exclude_directories=1)</code>
</p>

<p>
Glob is a helper function that can be used anywhere a list of filenames
is expected.  It takes one or two lists of filename patterns containing
the <code>*</code> wildcard: as per the Unix shell, this wildcard
matches any string excluding the directory separator <code>/</code>.
In addition filename patterns can contain the recursive <code>**</code>
wildcard. This wildcard will match zero or more complete
path segments separated by the directory separator <code>/</code>.
This wildcard can only be used as a complete path segment. For example,
<code>"x/**/*.java"</code> is legal, but <code>"test**/testdata.xml"</code>
and <code>"**.java"</code> are both illegal. No other wildcards are supported.
</p>
<p>
Glob returns a list of every file in the current package that:
</p>
<ul>
  <li>Matches at least one pattern in <code>include</code>. </li>
  <li>Does not match any of the patterns in <code>exclude</code> (default []).</li>
</ul>
<p>
If the <code>exclude_directories</code> argument is enabled (set to 1), files of
type directory will be omitted from the results (default 1).
</p>
<p>
There are several important limitations and caveats:
</p>

<ol>
  <li>
    Globs only match files in your source tree, never
    generated files.  If you are building a target that requires both
    source and generated files, create an explicit list of generated
    files, and use <code>+</code> to add it to the result of the
    <code>glob()</code> call.
  </li>

  <li>
    Globs may match files in subdirectories.  And subdirectory names
    may be wildcarded.  However...
  </li>

  <li>
    Labels are not allowed to cross the package boundary and glob does
    not match files in subpackages.

    For example, the glob expression <code>**/*.cc</code> in package
    <code>x</code> does not include <code>x/y/z.cc</code> if
    <code>x/y</code> exists as a package (either as
    <code>x/y/BUILD</code>, or somewhere else on the package-path). This
    means that the result of the glob expression actually depends on the
    existence of BUILD files &mdash; that is, the same glob expression would
    include <code>x/y/z.cc</code> if there was no package called
    <code>x/y</code> or it was marked as deleted using the
    <a href="bazel-user-manual.html#flag--deleted_packages">--deleted_packages</a>
    flag.

  </li>

  <li>
    The restriction above applies to all glob expressions,
    no matter which wildcards they use.
  </li>
  <li>
    A hidden file with filename starting with <code>.</code> is matched by
    both the <code>**</code> and the <code>*</code> wildcards.
  </li>
  <li>
    If a rule and a source file with the same name both exist in the package, the glob will
    return the outputs of the rule instead of the source file.
  </li>
</ol>

<p>
In general, you should <b>try to provide an appropriate extension (e.g. *.html)
instead of using a bare '*'</b> for a glob pattern. The more explicit name
is both self documenting and ensures that you don't accidentally match backup
files, or emacs/vi/... auto-save files.
</p>

<p>
When writing build rules you can enumerate the elements of the glob. This
enables generating individual rules for every input, for example. See the
<a href="#expanded_glob_example">expanded glob example</a> section below.
</p>

<h4 id="glob_example">Glob Examples</h4>

<p> Create a Java library built from all java files in this directory,
and all files generated by the <code>:gen_java_srcs</code> rule.</p>
<pre class="code">
java_library(
    name = "mylib",
    srcs = glob(["*.java"]) + [":localize_strings"],
    deps = "...",
)

genrule(
    name = "gen_java_srcs",
    outs = [
        "Foo.java",
        "Bar.java",
    ],
    ...
)
</pre>

<p>Include all txt files in directory testdata except experimental.txt.
Note that files in subdirectories of testdata will not be included. If
you want those files to be included, use a recursive glob (**).</p>
<pre class="code">
sh_test(
    name = "mytest",
    srcs = ["mytest.sh"],
    data = glob(
        ["testdata/*.txt"],
        exclude = ["testdata/experimental.txt"],
    ),
)
</pre>

<h4 id="recursive_glob_example">Recursive Glob Examples</h4>

<p>Create a library built from all java files in this directory and all
subdirectories except those whose path includes a directory named testing.
Subdirectories containing a BUILD file are ignored.
<b>This should be a very common pattern.</b>
</p>
<pre class="code">
java_library(
    name = "mylib",
    srcs = glob(
        ["**/*.java"],
        exclude = ["**/testing/**"],
    ),
)
</pre>

<p>Make the test depend on all txt files in the testdata directory,
   its subdirectories</p>
<pre class="code">
sh_test(
    name = "mytest",
    srcs = ["mytest.sh"],
    data = glob(["testdata/**/*.txt"]),
)
</pre>

<h4 id="expanded_glob_example">Expanded Glob Examples</h4>

<p>
Create an individual genrule for *_test.cc in the current directory
that counts the number of lines in the file.
</p>

<pre class="code">
# Conveniently, the build language supports list comprehensions.
[genrule(
    name = "count_lines_" + f[:-3],  # strip ".cc"
    srcs = [f],
    outs = ["%s-linecount.txt" % f[:-3]],
    cmd = "wc -l $&lt; &gt;$@",
 ) for f in glob(["*_test.cc"])]
</pre>

<p>
If the BUILD file above is in package //foo and the package contains three
matching files, a_test.cc, b_test.cc and c_test.cc then running
<code>bazel query '//foo:all'</code> will list all rules that were generated:

<pre>
$ bazel query '//foo:all' | sort
//foo:count_lines_a_test
//foo:count_lines_b_test
//foo:count_lines_c_test
</pre>


<!-- =================================================================
                              licenses()
     =================================================================
-->

<h3 id="licenses">licenses</h3>

<p><code>licenses(license_types)</code></p>

<p><code>licenses()</code> specifies the default license type (or types)
   of the build rules in a <code>BUILD</code> file.

   The <code>licenses()</code> directive should appear close to the
   beginning of the <code>BUILD</code> file, before any build rules, as it
   sets the <code>BUILD</code>-file scope default for build rule license
   types.</p>

<h4 id="licenses_args">Arguments</h4>

<p>The argument, <code id="licenses.licence_types">license_types</code>,
   is a list of license-type strings.
   <!-- TODO(bazel-team): specify some examples -->

</p>

<h4 id="licenses_example">Examples</h4>

<p>The following example specifies a single license type of
  <code>"notice"</code>.  Third-party software licenses that do not require
  publishing of source code changes but require some sort of copyright or
  other public notice are included in this license type.
</p>

<pre class="code">

licenses(["notice"])  # MIT license

exports_files(["jquery-2.1.1.js"])
</pre>

<!-- =================================================================
                              load()
     =================================================================
-->

<h3 id="load">load</h3>

<p><code>load(path, symbols...)</code></p>

<p><code>load()</code> is a statement that imports definitions from a
  Skylark module. For example:
</p>

<pre class="code">
load("/tools/build_rules/build_test", "build_test")

build_test(name = ...)
</pre>

<p>This will execute the

  Skylark
  module <code>tools/build_rules/build_test.bzl</code> and import the symbol
  <code>build_test</code> in the local environment. By using more arguments, you
  can load more symbols at once.</p>


<!-- =================================================================
                              select()
     =================================================================
-->

<h3 id="select">select</h3>

<p><code>select({conditionA: valuesA, conditionB: valuesB, ...})</code>
</p>

<p><code>select()</code> is the helper function that makes an
  attribute for a
  rule <a href="#configurable-attributes">configurable</a>. It can
  replace the right-hand side of

  <i>almost</i>
  any attribute assignment so that the attribute's value depends on the
  Bazel flags passed in at the command line. This can be used, for
  example, to define platform-specific dependencies or to embed
  different resources depending on whether a rule is built in
  "developer" vs. "release" mode.
</p>

<p>Basic usage is as follows:</p>

<pre class="code">
sh_binary(
    name = "myrule",
    srcs = select({
        ":conditionA": ["myrule_a.sh"],
        ":conditionB": ["myrule_b.sh"],
        "//conditions:default": ["myrule_default.sh"]
    })
)
</pre>

<p>This makes the <code>srcs</code> attribute of
  a <code>sh_binary</code> configurable by replacing its normal label
  list assignment with a <code>select</code> call that maps
  configuration conditions to matching values. Each condition is a label
  reference to
  a <code><a href="#config_setting">config_setting</a></code> instance,
  which "matches" if the rule's configuration matches an expected set of
  values. The value of <code>myrule#srcs</code> then becomes whichever
  label list matches the current invocation.
</p>

<p>Further notes:</p>

<ul>
  <li>Exactly one condition is selected on any invocation.
  </li>
  <li>If two conditions match and one is a specialization of the other
    (e.g. it matches on the same flags as the other plus additional flags),
    the specialization takes precedence.
  </li>
  <li>If two conditions match and neither is a specialization of the other,
    Bazel fails with an error.
  </li>
  <li>The special pseudo-label <code>//conditions:default</code> is
    considered to match if no other condition matches. If this condition
    is left out, some other rule must match to avoid an error.
  </li>
  <li><code>select</code> cannot currently be embedded <i>within</i> an
    attribute assignment. In other words, <code>srcs = ["common.sh"]
    + select({ "conditionA": ["myrule_a.sh"], ...})</code> does not
    currently work.
  </li>
  <li><code>select</code> works with most, but not all, attributes.

  </li>
</ul>

<!-- =================================================================
                              workspace()
     =================================================================
-->

<h3 id="workspace">workspace</h3>

<p><code>workspace(name = "something")</code></p>

<p>This can only be used in the WORKSPACE file.</p>

<p>The sets an optional name for the repository.</p>

<p>This name is used for the directory that runfiles are stored in. For
  example, if there is a runfile foo/bar and the WORKSPACE file contains
  <code>workspace(name = "baz")</code>, then the runfile will be output under
  mytarget.runfiles/baz/foo/bar.  If no workspace name is specified, then the
  runfile will be symlinked to bar.runfiles/foo/bar.
</p>

<p>A workspace name can contain slashes if a deeper directory listing is
  desired (<code>workspace(name = "baz/qux")</code> will place the runfile at
  bar.runfiles/baz/qux/foo/bar).
</p>

</div>
</div>


